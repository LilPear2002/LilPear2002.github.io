

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="测开求职者">
  <meta name="keywords" content="">
  
    <meta name="description" content="app测试基础知识与appium基础学习">
<meta property="og:type" content="article">
<meta property="og:title" content="APP测试">
<meta property="og:url" content="https://lilpear2002.github.io/2025/12/13/APP%E6%B5%8B%E8%AF%95/index.html">
<meta property="og:site_name" content="测开学习之路">
<meta property="og:description" content="app测试基础知识与appium基础学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lilpear2002.github.io/img/appium.jpg">
<meta property="article:published_time" content="2025-12-13T13:51:53.000Z">
<meta property="article:modified_time" content="2025-12-14T10:35:32.051Z">
<meta property="article:author" content="测开求职者">
<meta property="article:tag" content="APP测试理论基础">
<meta property="article:tag" content="Appium">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://lilpear2002.github.io/img/appium.jpg">
  
  
  
  <title>APP测试 - 测开学习之路</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"lilpear2002.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Java/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Java基础</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Python/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Python基础</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Testing/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>测试基础</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E7%AE%97%E6%B3%95/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>leetcode</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>数据库</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Java%E9%A1%B9%E7%9B%AE/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>Java项目</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E6%B5%8B%E5%BC%80%E9%A1%B9%E7%9B%AE/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>测开项目</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E5%8E%86/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>科研经历</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/LLM/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>大模型</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="APP测试"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-12-13 21:51" pubdate>
          2025年12月13日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          17k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          140 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">APP测试</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="APP与Web区别"><a href="#APP与Web区别" class="headerlink" title="APP与Web区别"></a>APP与Web区别</h1><p>系统架构：APP是C&#x2F;S结构，web是B&#x2F;S结构 </p>
<p>C&#x2F;S（Client&#x2F;Server ） ：即客户端&#x2F;服务器，需要下载安装客户端。</p>
<p>B&#x2F;S（Browser&#x2F;Server ）：即浏览器&#x2F;服务器，基于浏览器访问。</p>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image1.png" srcset="/img/loading.gif" lazyload class="" title="app测试">

<hr>
<h1 id="APP发布"><a href="#APP发布" class="headerlink" title="APP发布"></a>APP发布</h1><h3 id="1-App-发布的完整环境流转"><a href="#1-App-发布的完整环境流转" class="headerlink" title="1. App 发布的完整环境流转"></a>1. App 发布的完整环境流转</h3><p>在 App 发布给真实用户之前，通常会经历几个不同的环境：</p>
<ol>
<li><strong>开发环境 (Dev Environment)</strong><ul>
<li><strong>谁在用</strong>：开发人员 (Developers)。</li>
<li><strong>特点</strong>：代码变动最频繁，最不稳定，功能可能只有雏形。</li>
</ul>
</li>
<li><strong>测试环境 (Test &#x2F; SIT - System Integration Testing)</strong><ul>
<li><strong>谁在用</strong>：<strong>测试&#x2F;测开</strong>。</li>
<li><strong>特点</strong>：比较稳定。开发提测后，在这里找 Bug。<strong>所有的自动化脚本通常也是针对这个环境编写的。</strong></li>
</ul>
</li>
<li><strong>预发布环境 (Pre-production &#x2F; UAT - User Acceptance Testing)</strong><ul>
<li><strong>谁在用</strong>：产品经理、测试人员、少部分内部种子用户。</li>
<li><strong>特点</strong>：<strong>数据源通常连接的是真实的线上数据库</strong>（或者经过脱敏的线上数据），但是代码是新的。这是上线前的最后一道防线，用来检查配置是否正确。</li>
</ul>
</li>
<li><strong>生产环境 (Production)</strong><ul>
<li><strong>谁在用</strong>：真实用户。</li>
<li><strong>特点</strong>：绝对严谨，出了问题就是“线上事故”。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-核心发布策略"><a href="#2-核心发布策略" class="headerlink" title="2. 核心发布策略"></a>2. 核心发布策略</h3><p>问：“你们的 App 是怎么上线的？是一次性全量发布吗？”</p>
<h4 id="A-全量发布"><a href="#A-全量发布" class="headerlink" title="A. 全量发布"></a>A. 全量发布</h4><ul>
<li><strong>含义</strong>：设定一个时间点，所有应用商店同步上架，所有用户都能下载到新版本。</li>
<li><strong>风险</strong>：如果有一个严重的崩溃 Bug（Crash），所有用户都会受影响，损失巨大。</li>
</ul>
<h4 id="B-灰度发布-Gray-scale-Release-Canary-Release-——-非常重要"><a href="#B-灰度发布-Gray-scale-Release-Canary-Release-——-非常重要" class="headerlink" title="B. 灰度发布 (Gray-scale Release &#x2F; Canary Release) —— 非常重要"></a>B. 灰度发布 (Gray-scale Release &#x2F; Canary Release) —— <strong>非常重要</strong></h4><ul>
<li><strong>含义</strong>：先让 <strong>一小部分人</strong> 更新到新版本，如果没有问题，再慢慢扩大范围，直到全量。</li>
<li><strong>怎么做</strong>：<ul>
<li><strong>按比例</strong>：先放 5% 的用户，再放 20%，最后 100%。</li>
<li><strong>按地区</strong>：比如先在某个省份发布。</li>
<li><strong>按白名单</strong>：先让公司内部员工更新。</li>
</ul>
</li>
<li><strong>测试职责</strong>：在灰度期间，测试人员要通过后台监控系统（如 Bugly, Sentry）紧盯崩溃率。如果报错飙升，必须立即<strong>回滚 (Rollback)</strong>。</li>
</ul>
<h4 id="C-A-B-测试"><a href="#C-A-B-测试" class="headerlink" title="C. A&#x2F;B 测试"></a>C. A&#x2F;B 测试</h4><ul>
<li><strong>含义</strong>：这不是为了修 Bug，而是为了<strong>验证功能</strong>。<ul>
<li>A 组用户看到红色的购买按钮。</li>
<li>B 组用户看到蓝色的购买按钮。</li>
<li>看哪组下单的人多，最后决定上线哪个版本。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-Android-与-iOS-发布的区别"><a href="#3-Android-与-iOS-发布的区别" class="headerlink" title="3. Android 与 iOS 发布的区别"></a>3. Android 与 iOS 发布的区别</h3><p>这也是 App 测试必须要知道的背景知识，因为审核机制完全不同。</p>
<table>
<thead>
<tr>
<th><strong>维度</strong></th>
<th><strong>Android (安卓)</strong></th>
<th><strong>iOS (苹果)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>应用商店</strong></td>
<td><strong>渠道极其分散</strong>。国内主要有：华为、小米、OPPO、VIVO、应用宝、百度手机助手等。</td>
<td><strong>App Store 唯一渠道</strong> (TestFlight 用于内测)。</td>
</tr>
<tr>
<td><strong>审核时间</strong></td>
<td>较快（几小时到1天），有时候甚至无需审核（企业包）。</td>
<td><strong>非常严格</strong>且慢（通常需要 1-3 天），甚至可能因为 UI 不符合苹果规范被拒。</td>
</tr>
<tr>
<td><strong>安装包格式</strong></td>
<td><code>.apk</code></td>
<td><code>.ipa</code></td>
</tr>
<tr>
<td><strong>测试痛点</strong></td>
<td>需要验证<strong>多渠道包</strong>（统计不同商店的下载量），每个商店的包签名可能不同。</td>
<td>需要验证审核被拒后的紧急修复流程。</td>
</tr>
</tbody></table>
<hr>
<h3 id="4-强更、弱更与热更新"><a href="#4-强更、弱更与热更新" class="headerlink" title="4. 强更、弱更与热更新"></a>4. 强更、弱更与热更新</h3><p>这是用户感知层面的更新方式，测试时需要专门覆盖这几种场景。</p>
<ol>
<li><strong>强制更新 (Force Update)</strong>：<ul>
<li>App 启动时弹窗，<strong>只有一个“立即更新”按钮</strong>，不更新就退步出，没法用。</li>
<li><em>测试点</em>：通常用于修复重大 Bug 或 API 协议变更，必须确保旧版本被完全拦截。</li>
</ul>
</li>
<li><strong>非强制更新&#x2F;弱更 (Optional Update)</strong>：<ul>
<li>弹窗有“以后再说”或“取消”按钮。</li>
<li><em>测试点</em>：用户点取消后，App 的核心功能（如数据接口）还能不能兼容旧版本？</li>
</ul>
</li>
<li><strong>热更新 (Hotfix) —— 测开必须了解的技术</strong>：<ul>
<li><strong>原理</strong>：用户<strong>不需要</strong>去应用商店重新下载几十 MB 的安装包。App 启动时默默下载一个小补丁（Patch），直接替换代码。</li>
<li><strong>优势</strong>：速度快，用户无感知。常用于游戏或修复紧急 Bug。</li>
<li><em>测试点</em>：补丁下载失败怎么办？补丁是否生效了？</li>
</ul>
</li>
</ol>
<hr>
<h3 id="📝-总结：测试人员在发布阶段要做什么？"><a href="#📝-总结：测试人员在发布阶段要做什么？" class="headerlink" title="📝 总结：测试人员在发布阶段要做什么？"></a>📝 总结：测试人员在发布阶段要做什么？</h3><ol>
<li><strong>回归测试 (Regression Test)</strong>：确保新功能没问题，且<strong>旧功能没有被改坏</strong>。</li>
<li><strong>验收测试 (UAT)</strong>：产品经理确认功能符合需求。</li>
<li><strong>兼容性检查</strong>：抽取目前市场上主流的 TOP 10 手机型号（测开通常会维护一个云真机平台）跑一遍安装启动。</li>
<li><strong>渠道包检查</strong>：如果是安卓，要检查不同应用商店的包（华为包、小米包）是否都能正常唤起支付、登录（因为不同渠道SDK可能不同）。</li>
</ol>
<hr>
<h1 id="APP功能测试"><a href="#APP功能测试" class="headerlink" title="APP功能测试"></a>APP功能测试</h1><p>App 的<strong>功能测试（Functional Testing）</strong>，其核心逻辑和 Web 测试、桌面软件测试是一致的。都是基于<strong>黑盒测试</strong>方法（如等价类划分、边界值分析、错误推测法），验证“<strong>输入</strong>”经过“<strong>处理</strong>”后，得到的“<strong>输出</strong>”是否符合需求文档。</p>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image2.png" srcset="/img/loading.gif" lazyload class="" title="功能测试">

<h4 id="第一部分：输入框验证（对应图中“1-输入”）"><a href="#第一部分：输入框验证（对应图中“1-输入”）" class="headerlink" title="第一部分：输入框验证（对应图中“1. 输入”）"></a>第一部分：输入框验证（对应图中“1. 输入”）</h4><p>这部分主要考察<strong>等价类划分</strong>（有效数据 vs 无效数据）和<strong>错误推测</strong>。</p>
<table>
<thead>
<tr>
<th><strong>测试点</strong></th>
<th><strong>详细测试用例</strong></th>
<th><strong>预期结果 (基于需求图)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>基础输入</strong></td>
<td>输入“牙膏” (汉字)</td>
<td>搜索出牙膏相关商品</td>
</tr>
<tr>
<td></td>
<td>输入“yagao” (全拼)</td>
<td>搜索出牙膏相关商品</td>
</tr>
<tr>
<td></td>
<td>输入“yag” 或 “gao” (部分拼音)</td>
<td>搜索出牙膏相关商品</td>
</tr>
<tr>
<td></td>
<td>输入“toothpaste” (英文)</td>
<td>搜索出牙膏相关商品</td>
</tr>
<tr>
<td><strong>混合输入</strong></td>
<td>输入“牙gao” (中英混合)</td>
<td>搜索出牙膏相关商品</td>
</tr>
<tr>
<td><strong>纠错机制</strong></td>
<td>输入“呀高”、“牙稿” (同音错别字)</td>
<td><strong>纠错提示</strong>：“您是否要找‘牙膏’？”，或直接展示牙膏结果，但顶部提示“已为您显示‘牙膏’的搜索结果”</td>
</tr>
<tr>
<td><strong>同音&#x2F;数字</strong></td>
<td>输入“yinle”</td>
<td>搜索出“音乐”相关商品</td>
</tr>
<tr>
<td></td>
<td>输入“12”</td>
<td>搜索结果包含带“12”的商品，也包含带“十二”的商品</td>
</tr>
<tr>
<td><strong>符号处理</strong></td>
<td>输入“牙 膏】” (含空格和特殊符号)</td>
<td>忽略干扰符号，搜索结果等同于“牙膏”</td>
</tr>
<tr>
<td><strong>自动补全</strong></td>
<td>输入“手机”</td>
<td>下拉联想框出现“手机壳”、“手机膜”、“手机支架”等高频词</td>
</tr>
<tr>
<td></td>
<td>删除输入框内容</td>
<td>联想框消失，恢复初始状态（如显示搜索历史）</td>
</tr>
</tbody></table>
<h4 id="第二部分：匹配逻辑验证（对应图中“2-匹配”）"><a href="#第二部分：匹配逻辑验证（对应图中“2-匹配”）" class="headerlink" title="第二部分：匹配逻辑验证（对应图中“2. 匹配”）"></a>第二部分：匹配逻辑验证（对应图中“2. 匹配”）</h4><p>这部分是搜索的核心算法逻辑，主要验证<strong>后端逻辑</strong>。</p>
<table>
<thead>
<tr>
<th><strong>测试点</strong></th>
<th><strong>详细测试用例</strong></th>
<th><strong>预期结果 (基于需求图)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>多维度匹配</strong></td>
<td>输入“华为” (品牌)</td>
<td>列表展示华为手机、华为电脑、华为数据线等</td>
</tr>
<tr>
<td></td>
<td>输入某一具体商品标题</td>
<td>精确匹配到该商品</td>
</tr>
<tr>
<td></td>
<td>输入商品分类 (如“零食”)</td>
<td>展示该分类下的所有商品</td>
</tr>
<tr>
<td><strong>分词匹配</strong></td>
<td>输入“康师傅饮料”</td>
<td><strong>分词逻辑</strong>：搜索结果应包含“康师傅”品牌且属于“饮料”类的商品 (即 A 且 B)</td>
</tr>
<tr>
<td><strong>为空匹配</strong></td>
<td>不输入任何内容，直接点击搜索</td>
<td><strong>需求规定</strong>：展示“推荐内容” (这里要确认是热门推荐还是个性化推荐)</td>
</tr>
<tr>
<td><strong>无结果处理</strong></td>
<td>输入乱码或数据库不存在的词 (如“@#￥%”)</td>
<td>展示“未找到相关商品”，并推荐相似商品或热门商品 (依据图中“联想相近词”的需求)</td>
</tr>
</tbody></table>
<h4 id="第三部分：排序与结果展示（对应图中“3-排序”）"><a href="#第三部分：排序与结果展示（对应图中“3-排序”）" class="headerlink" title="第三部分：排序与结果展示（对应图中“3. 排序”）"></a>第三部分：排序与结果展示（对应图中“3. 排序”）</h4><table>
<thead>
<tr>
<th><strong>测试点</strong></th>
<th><strong>详细测试用例</strong></th>
<th><strong>预期结果 (基于需求图)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>默认排序</strong></td>
<td>搜索任意关键词</td>
<td>列表第一页商品默认按<strong>销量</strong>降序排列</td>
</tr>
<tr>
<td><strong>手动排序</strong></td>
<td>点击“价格”</td>
<td>第一次点击按价格升序，再次点击按价格降序</td>
</tr>
<tr>
<td></td>
<td>点击“最新”</td>
<td>按商品上架时间倒序排列</td>
</tr>
<tr>
<td></td>
<td>点击“人气&#x2F;收藏”</td>
<td>按收藏量或浏览量排序</td>
</tr>
<tr>
<td><strong>分页加载</strong></td>
<td>上滑列表到底部</td>
<td>自动加载下一页数据（通常每页 10-20 条）</td>
</tr>
</tbody></table>
<hr>
<h3 id="🔥-第四部分：App-特有的功能测试点"><a href="#🔥-第四部分：App-特有的功能测试点" class="headerlink" title="🔥 第四部分：App 特有的功能测试点"></a>🔥 第四部分：App 特有的功能测试点</h3><p><strong>针对 App 搜索，补充以下场景：</strong></p>
<h4 id="1-软键盘交互-Interaction"><a href="#1-软键盘交互-Interaction" class="headerlink" title="1. 软键盘交互 (Interaction)"></a>1. 软键盘交互 (Interaction)</h4><ul>
<li><strong>键盘唤起</strong>：点击输入框，手机软键盘是否正常弹出？会不会遮挡输入框？</li>
<li><strong>搜索键触发</strong>：点击软键盘右下角的“搜索”&#x2F;“Go”&#x2F;“回车”按钮，是否能触发搜索？（<strong>这个非常重要，很多 Bug 出在这里</strong>）</li>
<li><strong>键盘收起</strong>：开始滚动搜索结果列表时，软键盘是否自动收起？</li>
</ul>
<h4 id="2-搜索历史-Search-History"><a href="#2-搜索历史-Search-History" class="headerlink" title="2. 搜索历史 (Search History)"></a>2. 搜索历史 (Search History)</h4><ul>
<li><strong>历史记录</strong>：搜索成功后，该词条是否存入“历史记录”？</li>
<li><strong>历史点击</strong>：点击历史记录中的词，是否直接发起搜索？</li>
<li><strong>历史清除</strong>：是否有“清空历史”的按钮？</li>
</ul>
<h4 id="3-语音搜索-Voice-Input"><a href="#3-语音搜索-Voice-Input" class="headerlink" title="3. 语音搜索 (Voice Input)"></a>3. 语音搜索 (Voice Input)</h4><ul>
<li>如果输入框有麦克风图标，点击能否唤起语音输入？识别的文字是否自动填入输入框？</li>
</ul>
<h4 id="4-特殊场景-Interruptions-Network"><a href="#4-特殊场景-Interruptions-Network" class="headerlink" title="4. 特殊场景 (Interruptions &amp; Network)"></a>4. 特殊场景 (Interruptions &amp; Network)</h4><ul>
<li><strong>网络延迟</strong>：在网络极差（弱网）时，输入“手”，联想词“手机”还没加载出来，用户这时候快速输入了“表”，联想结果会不会乱跳？（比如突然跳出“手”的联想结果覆盖了“手表”的结果）。</li>
<li><strong>前后台切换</strong>：在搜索结果页切到后台（比如回微信消息），再切回来，页面是否保持原样？还是被刷新了？</li>
</ul>
<hr>
<h1 id="APP专项测试"><a href="#APP专项测试" class="headerlink" title="APP专项测试"></a>APP专项测试</h1><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image8.png" srcset="/img/loading.gif" lazyload class="" title="专项测试">

<h2 id="安装、卸载、升级"><a href="#安装、卸载、升级" class="headerlink" title="安装、卸载、升级"></a>安装、卸载、升级</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image3.png" srcset="/img/loading.gif" lazyload class="" title="安装测试">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image4.png" srcset="/img/loading.gif" lazyload class="" title="卸载升级测试">

<p>挑几个测试点写测试用例：</p>
<table>
<thead>
<tr>
<th><strong>模块</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤</strong></th>
<th><strong>预期结果</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>安装</strong></td>
<td><strong>P0</strong></td>
<td><strong>正常安装流程验证</strong></td>
<td>手机空间充足，网络正常</td>
<td>1. 获取最新 APK 安装包 2. 点击安装</td>
<td>1. 安装过程流畅无报错 2. 桌面出现正确图标 3. 点击图标能正常启动</td>
</tr>
<tr>
<td><strong>安装</strong></td>
<td>P1</td>
<td><strong>存储空间不足时的安装处理</strong></td>
<td>手机剩余存储空间 <strong>小于</strong> 安装包大小</td>
<td>1. 点击 APK 进行安装 2. 观察系统提示</td>
<td>1. 安装被终止，无 Crash 2. 弹出“存储空间不足”提示</td>
</tr>
<tr>
<td><strong>安装</strong></td>
<td>P2</td>
<td><strong>安装过程中断网&#x2F;断电测试</strong></td>
<td>手机处于安装进度条约 50% 时</td>
<td>1. 突然断开网络或强制关机 2. 重启手机检查环境</td>
<td>1. 安装失败 2. 系统无残留不可用的垃圾文件 3. 再次安装能正常进行</td>
</tr>
<tr>
<td><strong>安装</strong></td>
<td>P2</td>
<td><strong>低版本覆盖安装高版本（降级）</strong></td>
<td>手机已安装 V2.0 版本</td>
<td>1. 尝试覆盖安装 V1.0 版本</td>
<td>1. 系统提示安装失败（禁止降级） 2. 原有 V2.0 版本不受影响</td>
</tr>
<tr>
<td><strong>卸载</strong></td>
<td><strong>P0</strong></td>
<td><strong>正常卸载及数据清理</strong></td>
<td>App 已登录并产生缓存数据</td>
<td>1. 长按图标卸载 2. 检查文件管理器</td>
<td>1. 图标消失 2. 应用私有目录下的缓存文件被彻底删除</td>
</tr>
<tr>
<td><strong>卸载</strong></td>
<td>P1</td>
<td><strong>App 运行时强制卸载</strong></td>
<td>App 正在后台播放音频或下载</td>
<td>1. 进入系统设置强制卸载该 App</td>
<td>1. 后台进程立即终止（声音&#x2F;下载停止） 2. 卸载成功，无报错</td>
</tr>
<tr>
<td><strong>卸载</strong></td>
<td>P2</td>
<td><strong>取消卸载操作</strong></td>
<td>无</td>
<td>1. 点击卸载 2. 在确认弹窗点“取消”</td>
<td>1. App 未被卸载 2. 点击 App 能正常进入，账号未登出</td>
</tr>
<tr>
<td><strong>升级</strong></td>
<td><strong>P0</strong></td>
<td><strong>跨版本升级数据兼容性</strong></td>
<td>安装 V1.0 并保存了本地数据（如购物车）</td>
<td>1. 直接覆盖安装 V3.0（跳过 V2.0） 2. 启动 App 检查数据</td>
<td>1. 启动正常 2. <strong>V1.0 的购物车数据在 V3.0 中完整保留</strong></td>
</tr>
<tr>
<td><strong>升级</strong></td>
<td>P1</td>
<td><strong>非 WiFi 环境下应用内升级提醒</strong></td>
<td>手机使用 4G&#x2F;5G 网络</td>
<td>1. App 内点击“检查更新” 2. 点击“下载”</td>
<td>1. 弹出流量消耗提示框 2. 只有用户确认后才开始下载</td>
</tr>
<tr>
<td><strong>升级</strong></td>
<td>P1</td>
<td><strong>强制更新策略验证</strong></td>
<td>服务端配置该版本为“强更”</td>
<td>1. 启动旧版本 App</td>
<td>1. 弹出更新弹窗，且<strong>无</strong>关闭&#x2F;取消按钮 2. 不更新无法使用 App 任何功能</td>
</tr>
</tbody></table>
<h2 id="兼容性测试"><a href="#兼容性测试" class="headerlink" title="兼容性测试"></a>兼容性测试</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image5.png" srcset="/img/loading.gif" lazyload class="" title="兼容性测试1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image6.png" srcset="/img/loading.gif" lazyload class="" title="兼容性测试2">

<table>
<thead>
<tr>
<th><strong>维度</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤</strong></th>
<th><strong>预期结果</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>屏幕适配</strong></td>
<td><strong>P0</strong></td>
<td><strong>异形屏（刘海&#x2F;挖孔&#x2F;灵动岛）UI 适配验证</strong></td>
<td>选取一台刘海屏或挖孔屏手机（如 iPhone 14 Pro 或部分安卓机）</td>
<td>1. 启动 App 进入首页 2. 观察顶部导航栏和状态栏区域 3. 旋转屏幕（横屏模式）</td>
<td>1. 核心内容未被“刘海”遮挡 2. 按钮可点击，未错位 3. 底部操作栏未被系统手势条覆盖</td>
</tr>
<tr>
<td><strong>系统版本</strong></td>
<td><strong>P0</strong></td>
<td><strong>高低版本系统权限兼容性测试</strong></td>
<td>准备两台手机： A: Android 13&#x2F;14 (高版本) B: Android 6.0&#x2F;8.0 (低版本)</td>
<td>1. 在两台手机安装 App 2. 首次启动，触发需要权限的功能（如拍照、定位）</td>
<td>1. <strong>高版本</strong>：必须弹出运行时权限申请框（Runtime Permission），拒绝后 App 不崩溃 2. <strong>低版本</strong>：功能正常运行，无闪退</td>
</tr>
<tr>
<td><strong>应用共存</strong></td>
<td>P1</td>
<td><strong>后台音频播放冲突测试</strong></td>
<td>1. 手机后台正在使用网易云&#x2F;QQ音乐播放歌曲 2. 手机未静音</td>
<td>1. 打开被测 App 2. 进入播放视频或音频的页面 3. 点击播放</td>
<td>1. <strong>音频焦点抢占</strong>：后台音乐应自动暂停或音量降低（Duck） 2. App 内视频声音正常播出 3. 退出 App 视频后，后台音乐恢复（可选，视需求而定）</td>
</tr>
<tr>
<td><strong>硬件兼容</strong></td>
<td>P2</td>
<td><strong>蓝牙外设连接切换测试</strong></td>
<td>1. 手机蓝牙开启 2. 准备一副蓝牙耳机</td>
<td>1. App 正在外放播放视频 2. 连接蓝牙耳机 3. 断开蓝牙耳机</td>
<td>1. 连接时：声音无缝切换到耳机，且无杂音 2. 断开时：视频自动暂停（防止在公共场合突然外放尴尬）或切换回扬声器</td>
</tr>
<tr>
<td><strong>分辨率</strong></td>
<td>P1</td>
<td><strong>低分辨率小屏机型显示测试</strong></td>
<td>选取老旧机型或设置模拟器为 720*1280 分辨率</td>
<td>1. 打开 App 包含长文本或列表的页面 2. 调整字体大小（如系统设置了大字体）</td>
<td>1. 文字未重叠、未溢出边界 2. 底部按钮依然可见，未被挤出屏幕外</td>
</tr>
</tbody></table>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image7.png" srcset="/img/loading.gif" lazyload class="" title="兼容性测试3">

<p>问：“市面上手机好几千款，不可能把这些用例在每一台手机上都跑一遍吧？”</p>
<p>标准的工业级解决方案是：</p>
<ol>
<li><strong>Top N 策略</strong>：<ul>
<li>查看线上的用户数据（比如通过百度统计、Umeng），找出你们 App 用户量最大的 <strong>Top 20 - Top 50</strong> 款机型进行覆盖。</li>
</ul>
</li>
<li><strong>云测平台 (Cloud Testing)</strong>：<ul>
<li>使用 <strong>Testin (云测)</strong>、<strong>腾讯 WeTest</strong> 等平台。</li>
<li><strong>怎么做</strong>：只需要把打包好的 APK 上传到网页上，选择“兼容性测试”，勾选 100 台热门手机。</li>
<li><strong>结果</strong>：云平台会自动安装、启动、运行 Monkey（随机乱点），然后给一份报告，哪款手机安装失败，哪款手机 UI 错位（带截图）。</li>
</ul>
</li>
</ol>
<h2 id="push消息推送"><a href="#push消息推送" class="headerlink" title="push消息推送"></a>push消息推送</h2><p>Push消息是APP推送的各种通知。 如：点赞、评论、关注</p>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image9.png" srcset="/img/loading.gif" lazyload class="" title="push消息推送测试1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image10.png" srcset="/img/loading.gif" lazyload class="" title="push消息推送测试2">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image11.png" srcset="/img/loading.gif" lazyload class="" title="push消息推送测试3">

<table>
<thead>
<tr>
<th><strong>维度</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤</strong></th>
<th><strong>预期结果</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>状态场景</strong></td>
<td><strong>P0</strong></td>
<td><strong>App 后台运行时的消息接收与展示</strong></td>
<td>1. 手机网络正常 2. App 登录并切换至后台（Home 键）</td>
<td>1. 通过推送平台发送一条标准通知 2. 观察手机通知栏</td>
<td>1. 手机震动&#x2F;响铃（视系统设置而定） 2. 通知栏弹出消息，标题内容无误 3. 收到消息时 App <strong>不应</strong>被系统唤醒至前台（保持后台状态）</td>
</tr>
<tr>
<td><strong>状态场景</strong></td>
<td>P1</td>
<td><strong>App 前台运行时的消息提示</strong></td>
<td>App 正在当前屏幕运行（用户正在使用）</td>
<td>1. 发送一条推送消息</td>
<td>1. <strong>UI 体验检查</strong>：通常不应直接弹出系统通知栏打断用户操作 2. 常见逻辑是：App 顶部出现应用内横幅提醒，或仅在图标上显示小红点（Badging）</td>
</tr>
<tr>
<td><strong>状态场景</strong></td>
<td>P1</td>
<td><strong>App 离线&#x2F;进程被杀后的接收能力</strong></td>
<td>手动划掉 App 进程，确保 App 未运行</td>
<td>1. 发送推送消息 2. 等待 1-2 分钟</td>
<td>1. <strong>安卓</strong>：取决于推送通道（厂商通道如华为&#x2F;小米应能收到；第三方 App 通道可能收不到） 2. <strong>iOS</strong>：必须能收到（走 APNs 系统通道）</td>
</tr>
<tr>
<td><strong>交互跳转</strong></td>
<td><strong>P0</strong></td>
<td><strong>点击推送消息跳转至指定详情页 (Deep Link)</strong></td>
<td>手机通知栏已收到一条关于“商品 A 降价”的推送</td>
<td>1. 点击该条通知消息</td>
<td>1. 自动启动 App 2. <strong>直接跳转</strong>到“商品 A”的详情页，而不是 App 首页 3. 如果 App 未登录，应先跳登录页，登录后自动跳回商品页</td>
</tr>
<tr>
<td><strong>精准推送</strong></td>
<td>P1</td>
<td><strong>特定用户定向推送验证</strong></td>
<td>准备两台手机： A 手机登录用户 User1 B 手机登录用户 User2</td>
<td>1. 后台配置仅向 User1 发送优惠券通知 2. 观察两台手机</td>
<td>1. <strong>A 手机</strong>：收到推送 2. <strong>B 手机</strong>：<strong>未</strong>收到推送（验证身份匹配逻辑）</td>
</tr>
<tr>
<td><strong>用户设置</strong></td>
<td>P2</td>
<td><strong>客户端关闭推送权限验证</strong></td>
<td>在 App 的“设置”或手机系统设置中，<strong>关闭</strong>“接收通知”开关</td>
<td>1. 后台发送全量推送消息</td>
<td>1. 手机通知栏<strong>没有任何反应</strong> 2. App 启动后，消息中心（站内信）可能依然有红点（视需求而定，但系统级通知必须屏蔽）</td>
</tr>
<tr>
<td><strong>过期逻辑</strong></td>
<td>P2</td>
<td><strong>消息过期&#x2F;TTL 测试</strong></td>
<td>手机开启飞行模式（断网）</td>
<td>1. 后台发送一条有效期为 5 分钟的限时抢购消息 2. 等待 10 分钟后 3. 手机关闭飞行模式（恢复网络）</td>
<td>1. 手机<strong>不应</strong>收到该条消息（因为已过期，服务器应丢弃该消息，避免用户点进去发现活动结束了）</td>
</tr>
</tbody></table>
<p>问：“为什么有时候安卓手机收不到推送，苹果却能收到？” 你可以用图中的知识点回答：</p>
<ol>
<li><strong>机制不同</strong>：<ul>
<li>根据 <code>image_cd349e.png</code>，Push 本质是<strong>长连接</strong>。</li>
<li><strong>iOS</strong>：统一走苹果官方的 <strong>APNs</strong> (Apple Push Notification service)。只要苹果服务器不崩，手机有网就能收到。</li>
<li><strong>Android</strong>：虽然谷歌有 GCM&#x2F;FCM，但在国内无法使用。所以各家 App 只能自己搭建或者用第三方（极光、友盟）。</li>
</ul>
</li>
<li><strong>保活问题</strong>：<ul>
<li>安卓为了省电，系统经常杀后台进程。进程一死，长连接就断了，消息就推不进来了。</li>
<li><strong>解决方案</strong>：这就是为什么现在的 App 都要接入 <strong>厂商通道</strong>（华为推送、小米推送等）。因为厂商的推送服务是系统级的，杀不掉。</li>
</ul>
</li>
</ol>
<h2 id="交叉测试"><a href="#交叉测试" class="headerlink" title="交叉测试"></a>交叉测试</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image12.png" srcset="/img/loading.gif" lazyload class="" title="交叉测试">

<p>一个功能正在执行过程中，另外一个事件或操作对该过程进行干扰</p>
<table>
<thead>
<tr>
<th><strong>干扰类型</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤</strong></th>
<th><strong>预期结果</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>电话干扰</strong></td>
<td><strong>P0</strong></td>
<td><strong>App 核心操作中接听电话验证</strong></td>
<td>1. 手机插入 SIM 卡 2. App 正在进行核心操作（如：正在支付输入密码、正在播放视频、正在录入表单）</td>
<td>1. 使用另一台手机呼叫测试机 2. 测试机<strong>接通</strong>电话，通话 5 秒 3. 挂断电话，自动返回 App</td>
<td>1. <strong>来电时</strong>：App 自动暂停（视频&#x2F;音乐暂停），不应有异响 2. <strong>挂断后</strong>：App 页面恢复原状，<strong>输入框内的文字不消失</strong>，支付流程可继续，无 Crash</td>
</tr>
<tr>
<td><strong>电话干扰</strong></td>
<td>P1</td>
<td><strong>App 运行时拒接&#x2F;挂断电话</strong></td>
<td>同上</td>
<td>1. 呼叫测试机 2. 测试机直接点击**“挂断”**</td>
<td>1. 电话提示框消失 2. App 画面无缝恢复，操作流畅，无卡顿</td>
</tr>
<tr>
<td><strong>网络干扰</strong></td>
<td><strong>P0</strong></td>
<td><strong>WiFi 与 4G&#x2F;5G 网络动态切换</strong></td>
<td>手机连接 WiFi，且已开启 4G 数据流量</td>
<td>1. App 正在加载列表或下载文件 2. 突然关闭 WiFi 开关（切换到 4G） 3. 等待 10 秒后再打开 WiFi</td>
<td>1. <strong>切 4G 时</strong>：如下载大文件，应暂停并提示“正在使用流量”；如仅浏览资讯，应自动平滑切换无感知 2. <strong>切回 WiFi 时</strong>：自动恢复下载或数据加载 3. 全程无闪退、无“网络异常”死循环提示</td>
</tr>
<tr>
<td><strong>系统弹窗</strong></td>
<td>P1</td>
<td><strong>低电量&#x2F;闹钟弹窗干扰</strong></td>
<td>1. 设置闹钟为 1 分钟后响铃 2. 或模拟低电量（部分手机可用 ADB 模拟）</td>
<td>1. 在 App 内滑动浏览 2. 等待闹钟响铃或低电量弹窗弹出</td>
<td>1. 系统弹窗&#x2F;闹钟画面覆盖在 App 之上 2. <strong>App 进程不被杀掉</strong> 3. 关闭弹窗后，App 页面状态保持不变</td>
</tr>
<tr>
<td><strong>硬件干扰</strong></td>
<td>P2</td>
<td><strong>蓝牙设备连接与断开</strong></td>
<td>App 正在播放音频&#x2F;视频</td>
<td>1. 打开蓝牙耳机充电仓（自动连接） 2. 听一会儿后，关闭蓝牙（断开）</td>
<td>1. <strong>连接时</strong>：声音自动切到耳机 2. <strong>断开时</strong>：App 视频应<strong>自动暂停</strong>（防止公共场合外放尴尬），或者切回扬声器但用户需手动继续播放</td>
</tr>
<tr>
<td><strong>屏幕旋转</strong></td>
<td>P2</td>
<td><strong>横竖屏切换的数据保持</strong></td>
<td>手机开启“自动旋转”，App 支持横屏</td>
<td>1. 在输入框输入一段文字 2. 旋转手机 90 度（竖屏变横屏） 3. 再转回来</td>
<td>1. UI 布局适配正常（按钮没飞出屏幕） 2. <strong>关键点</strong>：输入框里的<strong>文字没有被清空</strong></td>
</tr>
</tbody></table>
<p>问交叉测试，可以补充以下两个核心观点：</p>
<ol>
<li><strong>资源抢占（Resource Preemption）</strong>：<ul>
<li>电话和闹钟属于<strong>系统级最高优先级</strong>事件。当它们发生时，App 必须乖乖让出音频焦点（Audio Focus）和屏幕焦点。如果 App “死皮赖脸”还要播放声音，就会出现 Bug（比如电话里依然听到游戏背景音）。</li>
</ul>
</li>
<li><strong>生命周期（Lifecycle）管理</strong>：<ul>
<li>当电话进来时，App 会经历 <code>onPause()</code> -&gt; <code>onStop()</code>。</li>
<li>电话挂断后，App 会经历 <code>onRestart()</code> -&gt; <code>onStart()</code> -&gt; <code>onResume()</code>。</li>
<li>交叉测试本质上就是在测<strong>开发人员有没有在 <code>onPause</code> 里保存数据，在 <code>onResume</code> 里恢复数据</strong>。</li>
</ul>
</li>
</ol>
<h2 id="用户体验测试"><a href="#用户体验测试" class="headerlink" title="用户体验测试"></a>用户体验测试</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image13.png" srcset="/img/loading.gif" lazyload class="" title="用户体验测试">

<table>
<thead>
<tr>
<th><strong>维度</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤</strong></th>
<th><strong>预期结果</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>易用性</strong></td>
<td><strong>P0</strong></td>
<td><strong>空数据状态下的引导页验证</strong></td>
<td>1. 新注册账号 2. 进入“我的订单”页面</td>
<td>1. 查看页面显示内容</td>
<td>1. <strong>不可留白</strong> 2. 显示友好的插图（如箱子图标） 3. 提供“去首页逛逛”的跳转按钮</td>
</tr>
<tr>
<td><strong>易用性</strong></td>
<td>P1</td>
<td><strong>按钮点击热区（点击范围）测试</strong></td>
<td>App 首页右上角有“消息”小图标</td>
<td>1. 不点击图标中心，点击图标边缘或略微偏离的位置</td>
<td>1. <strong>能成功触发点击</strong>（实际响应区域应比图标视觉区域大，防止误触或点不中）</td>
</tr>
<tr>
<td><strong>UI</strong></td>
<td>P1</td>
<td><strong>加载过程中的反馈提示</strong></td>
<td>网络设为慢速（弱网）</td>
<td>1. 点击“提交订单” 2. 等待服务器响应</td>
<td>1. 必须出现 <code>Loading</code> 转圈动画或进度条 2. 按钮置灰，<strong>禁止用户重复点击</strong>提交</td>
</tr>
<tr>
<td><strong>横竖屏</strong></td>
<td>P2</td>
<td><strong>横屏状态下的表格显示</strong></td>
<td>手机开启自动旋转，进入“股票行情”列表</td>
<td>1. 旋转手机至横屏</td>
<td>1. 列表自动适配宽度 2. <strong>显示更多列的信息</strong>（如原本只显示价格，现在显示涨跌幅），而不是单纯拉伸文字</td>
</tr>
<tr>
<td><strong>辅助功能</strong></td>
<td>P2</td>
<td><strong>系统超大字体适配测试</strong></td>
<td>1. 在手机系统设置中，将字体调至<strong>最大</strong> 2. 启动 App</td>
<td>1. 查看首页新闻标题 2. 查看底部导航栏文字</td>
<td>1. App 文字随系统变大 2. <strong>文字未重叠、未被遮挡</strong>（这是很多 App 的重灾区）</td>
</tr>
<tr>
<td><strong>易用性</strong></td>
<td>P2</td>
<td><strong>操作步骤层级深度检查</strong></td>
<td>无</td>
<td>1. 尝试找到“修改密码”功能 2. 计数点击次数</td>
<td>1. 路径清晰 2. 点击层级不宜过深（建议不超过 4 层菜单）</td>
</tr>
</tbody></table>
<hr>
<h1 id="APP性能测试"><a href="#APP性能测试" class="headerlink" title="APP性能测试"></a>APP性能测试</h1><p>测试app使用期间占用硬件资源（cpu、内存、流量、电量）使用情况.分类 ① App程序运行时占用手机硬件资源情况 ② App稳定性</p>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image14.png" srcset="/img/loading.gif" lazyload class="" title="app性能测试1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image15.png" srcset="/img/loading.gif" lazyload class="" title="app性能测试2">

<h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image16.png" srcset="/img/loading.gif" lazyload class="" title="内存1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image17.png" srcset="/img/loading.gif" lazyload class="" title="内存2">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image18.png" srcset="/img/loading.gif" lazyload class="" title="内存3">

<table>
<thead>
<tr>
<th><strong>用例编号</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤 (操作逻辑)</strong></th>
<th><strong>预期结果 (判断标准)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>MEM_001</strong></td>
<td><strong>P0</strong></td>
<td><strong>App 首页静态内存占用基准测试</strong></td>
<td>1. 手机安装 SoloPi 和被测 App (如 tpshop) 2. 杀掉后台其他无关进程</td>
<td>1. 打开 SoloPi，勾选 <strong>Memory (PSS)</strong> 监控指标，开启悬浮窗。 2. 启动被测 App，进入首页。 3. <strong>静置 1 分钟</strong>，不要进行任何操作。</td>
<td>1. PSS 曲线应保持相对平稳，无明显持续上升趋势。 2. 记录一个平均值（例如 200MB）作为<strong>基准线 (Baseline)</strong>。</td>
</tr>
<tr>
<td><strong>MEM_002</strong></td>
<td><strong>P0</strong></td>
<td><strong>重复进出页面检测内存泄漏 (核心用例)</strong></td>
<td>1. SoloPi 悬浮窗已开启 2. 处于 App 首页</td>
<td>1. 点击进入一个<strong>内容丰富</strong>的二级页面（如“商品详情页”，包含大图&#x2F;视频）。 2. 待加载完成后，点击“返回”回到首页。 3. <strong>重复上述“进入-返回”操作 20 次</strong>。 4. 观察 SoloPi 的曲线变化。</td>
<td>1. <strong>正常</strong>：内存曲线呈锯齿状（进详情页升高，退回首页降低），最终回到基准线附近。 2. <strong>异常（内存泄漏）</strong>：曲线呈<strong>阶梯状上升</strong>（如 <code>image_c1e1f7.png</code> 所示），每次返回首页后，内存都比上一次高，无法回落到基准线。</td>
</tr>
<tr>
<td><strong>MEM_003</strong></td>
<td>P1</td>
<td><strong>长时间滑动列表的内存稳定性测试</strong></td>
<td>1. SoloPi 悬浮窗已开启 2. 进入“商品列表”或“信息流”页面</td>
<td>1. 快速向下滑动屏幕，不断加载新图片和数据。 2. 持续滑动 3-5 分钟。 3. 停止滑动，静置 1 分钟。</td>
<td>1. 滑动过程中内存会上升（正常缓存）。 2. <strong>关键点</strong>：停止滑动后，内存应有明显的<strong>回落</strong>机制（释放离开屏幕的图片资源），不能一直维持在最高点。</td>
</tr>
</tbody></table>
<h2 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image19.png" srcset="/img/loading.gif" lazyload class="" title="CPU1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image20.png" srcset="/img/loading.gif" lazyload class="" title="CPU2">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image21.png" srcset="/img/loading.gif" lazyload class="" title="CPU3">

<table>
<thead>
<tr>
<th><strong>用例编号</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤 (操作逻辑)</strong></th>
<th><strong>预期结果 (判断标准)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>CPU_001</strong></td>
<td><strong>P0</strong></td>
<td><strong>App 静默&#x2F;待机状态 CPU 占用测试</strong></td>
<td>1. 启动 SoloPi 监控 CPU 2. 手机无后台下载任务</td>
<td>1. 启动被测 App，进入首页。 2. <strong>不进行任何操作</strong>，静置 1 分钟。 3. 观察“应用进程 CPU”曲线。</td>
<td>1. CPU 占用率应极低（通常 &lt; 5%）。 2. 曲线应为一条接近 0 的直线。 3. <strong>如果不为 0</strong>：说明代码里有死循环或无效的轮询（Polling）在空转。</td>
</tr>
<tr>
<td><strong>CPU_002</strong></td>
<td><strong>P0</strong></td>
<td><strong>高频滑动&#x2F;复杂动效下的 CPU 峰值测试</strong></td>
<td>1. 进入 App 内容最密集的页面（如商品瀑布流、朋友圈）</td>
<td>1. 快速上下滑动屏幕，持续 1 分钟。 2. 或者进入直播间&#x2F;播放高清视频。 3. 观察 CPU 峰值。</td>
<td>1. 允许有瞬间峰值（如加载时飙到 60%-80%）。 2. <strong>严禁</strong>长时间维持在 90% 以上。 3. 操作停止后，CPU 应迅速回落到低水平。</td>
</tr>
<tr>
<td><strong>CPU_003</strong></td>
<td>P1</td>
<td><strong>后台运行时的 CPU 占用（防偷跑）</strong></td>
<td>1. App 正在运行</td>
<td>1. 按 Home 键将 App 切到后台。 2. 锁屏，静置 5 分钟。 3. 解锁查看 SoloPi 记录的数据。</td>
<td>1. <strong>应用进程 CPU 必须接近 0%</strong>。 2. 如果在后台 CPU 依然很高，说明 App 在偷偷挖矿、死循环或者滥用定位，必须报 Bug。</td>
</tr>
</tbody></table>
<p>问：“发现 CPU 占用高，怎么分析？” </p>
<blockquote>
<p>“先看 SoloPi 的 <strong>应用进程 CPU</strong> 和 <strong>全局占用 CPU</strong>。 如果是<strong>全局高、应用低</strong>，可能是手机后台有系统更新或别的程序在跑，属于环境干扰。 如果是<strong>应用高</strong>，结合场景：</p>
<ol>
<li>如果是<strong>静止</strong>时高，多半是<strong>死循环</strong>或者<strong>定时器</strong>没关。</li>
<li>如果是<strong>滑动</strong>时高且卡顿，可能是<strong>UI 渲染</strong>太复杂（主线程阻塞），这往往就是导致 <strong>ANR</strong> 的元凶。”</li>
</ol>
</blockquote>
<h2 id="流量"><a href="#流量" class="headerlink" title="流量"></a>流量</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image22.png" srcset="/img/loading.gif" lazyload class="" title="流量1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image23.png" srcset="/img/loading.gif" lazyload class="" title="流量2">

<table>
<thead>
<tr>
<th><strong>用例编号</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤 (操作逻辑)</strong></th>
<th><strong>预期结果 (判断标准)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>NET_001</strong></td>
<td><strong>P0</strong></td>
<td><strong>App 首次启动与页面加载流量消耗</strong></td>
<td>1. 手机连接 4G&#x2F;5G 网络（模拟真实环境） 2. 清除 App 缓存（确保是冷启动）</td>
<td>1. 打开 SoloPi，勾选 <strong>网络 (Network)</strong> 监控。 2. 启动 App，进入首页，等待加载完成。 3. 记录消耗的流量。</td>
<td>1. 首页加载流量应在合理范围内（如纯文本+缩略图页不应超过 2MB）。 2. 图片资源应经过压缩，不应直接加载原图。</td>
</tr>
<tr>
<td><strong>NET_002</strong></td>
<td><strong>P0</strong></td>
<td><strong>二次加载缓存机制验证 (省流测试)</strong></td>
<td>1. 已完成 NET_001 的操作（首页已加载过） 2. <strong>不清除缓存</strong></td>
<td>1. 杀掉进程，重新启动 App。 2. 再次进入同一个首页。 3. 对比本次流量与 NET_001 的流量。</td>
<td>1. <strong>本次流量应显著低于首次加载</strong>。 2. 说明 App 成功利用了本地缓存（Cache），没有重复向服务器请求相同的图片资源。</td>
</tr>
<tr>
<td><strong>NET_003</strong></td>
<td>P1</td>
<td><strong>后台静默流量偷跑检测</strong></td>
<td>1. App 处于运行状态</td>
<td>1. 按 Home 键切入后台。 2. 观察 SoloPi 的流量数据，持续 5 分钟。</td>
<td>1. <strong>Process Downlink Traffic (进程下行流量)</strong> 应接近 0KB。 2. 如果后台还在持续跑流量，说明有未关闭的长连接或轮询，属于 Bug。</td>
</tr>
<tr>
<td><strong>NET_004</strong></td>
<td>P2</td>
<td><strong>特定业务场景流量评估</strong></td>
<td>SoloPi 开启</td>
<td>1. 打开 App 首页。 2. <strong>上下滑动浏览动态 20秒</strong>。 3. 停止滑动。</td>
<td>1. 记录这 20秒消耗的总流量（例如 5MB）。 2. 与竞品（如淘宝&#x2F;京东）进行对比，如果远高于竞品，说明代码优化不足。</td>
</tr>
</tbody></table>
<p>“如果发现流量消耗过大，建议开发怎么改？” </p>
<ol>
<li><strong>图片压缩</strong>：缩略图用小图，点击大图再加载原图。</li>
<li><strong>数据缓存</strong>：加载过的数据存本地数据库，下次别再请求了。</li>
<li><strong>增量更新</strong>：刷新列表时，只请求最新的几条数据，而不是把整个列表重新拉一遍。</li>
<li><strong>数据压缩</strong>：接口传输的 JSON 数据进行 Gzip 压缩。</li>
</ol>
<h2 id="电量"><a href="#电量" class="headerlink" title="电量"></a>电量</h2><p>APP应用使用时对电池电量的平均消耗 常见的耗电量大的场景： 定位 网络传输 屏幕亮度 wake_locker（锁屏-解锁）</p>
<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image24.png" srcset="/img/loading.gif" lazyload class="" title="电量1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image25.png" srcset="/img/loading.gif" lazyload class="" title="电量2">

<table>
<thead>
<tr>
<th><strong>用例编号</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤 (操作逻辑)</strong></th>
<th><strong>预期结果 (判断标准)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>BAT_001</strong></td>
<td><strong>P0</strong></td>
<td><strong>高频操作场景下的电量消耗测试</strong></td>
<td>1. 手机电量充足（&gt;30%） 2. 屏幕亮度固定（如 50%） 3. 关闭蓝牙&#x2F;GPS（减少干扰）</td>
<td>1. 打开 SoloPi，勾选 <strong>电池 (Battery)</strong> 监控指标。 2. 启动 App 进入首页。 3. <strong>上下滑动浏览动态 2 分钟</strong>（模拟用户逛淘宝）。 4. 停止操作，查看消耗的电量值（mAh）。</td>
<td>1. 记录 2 分钟内的耗电量（例如 15mAh）。 2. <strong>横向对比</strong>：不能比竞品（如京东）高出太多。 3. 手机背部无异常发烫。</td>
</tr>
<tr>
<td><strong>BAT_002</strong></td>
<td>P1</td>
<td><strong>后台静默耗电测试（待机测试）</strong></td>
<td>1. App 保持后台运行 2. 手机锁屏</td>
<td>1. SoloPi 开启监控。 2. 将 App 切到后台，锁屏静置 <strong>30 分钟</strong>。 3. 唤醒手机看数据。</td>
<td>1. 耗电量应极低（接近系统待机水平）。 2. 如果 30 分钟掉了 5% 电，说明 App 唤醒了 GPS 或在该休眠时不休眠（WakeLock 锁死）。</td>
</tr>
<tr>
<td><strong>BAT_003</strong></td>
<td>P2</td>
<td><strong>硬件调用场景耗电测试</strong></td>
<td>1. 开启 GPS 或 摄像头</td>
<td>1. 使用 App 的地图导航或直播功能 10 分钟。 2. 记录耗电曲线。</td>
<td>1. 耗电会明显增加（这是正常的）。 2. 但不应导致手机温度触发“过热保护”而降频卡顿。</td>
</tr>
</tbody></table>
<h2 id="流畅度"><a href="#流畅度" class="headerlink" title="流畅度"></a>流畅度</h2><img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image26.png" srcset="/img/loading.gif" lazyload class="" title="流畅度1">

<img src="/2025/12/13/APP%E6%B5%8B%E8%AF%95/image27.png" srcset="/img/loading.gif" lazyload class="" title="流畅度2">

<table>
<thead>
<tr>
<th><strong>用例编号</strong></th>
<th><strong>优先级</strong></th>
<th><strong>用例标题</strong></th>
<th><strong>前置条件</strong></th>
<th><strong>测试步骤 (操作逻辑)</strong></th>
<th><strong>预期结果 (判断标准)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>FPS_001</strong></td>
<td><strong>P0</strong></td>
<td><strong>长列表快速滑动流畅度测试</strong></td>
<td>1. 手机开启 60Hz 或更高刷新率 2. SoloPi 勾选 <strong>帧率 (FPS)</strong></td>
<td>1. 打开 App，进入内容丰富的首页（如商品流）。 2. <strong>快速上下滑动屏幕</strong>，持续 <strong>2分钟</strong>，不要停。 3. 观察 SoloPi 记录的 FPS 均值。</td>
<td>1. 平均 FPS 应保持在 <strong>50帧以上</strong>（针对 60Hz 屏幕）。 2. 过程中无明显的<strong>冻结帧 (Jank)</strong>（即 FPS 突然掉到 0 这种卡死现象）。</td>
</tr>
<tr>
<td><strong>FPS_002</strong></td>
<td>P1</td>
<td><strong>复杂动画转场流畅度测试</strong></td>
<td>1. SoloPi 监控开启</td>
<td>1. 点击进入一个带有复杂转场动画的页面（如直播间、送礼物特效）。 2. 反复进出该页面 10 次。</td>
<td>1. 动画播放过程中 FPS 不应低于 24帧。 2. 画面无撕裂、无掉帧。</td>
</tr>
<tr>
<td><strong>FPS_003</strong></td>
<td>P2</td>
<td><strong>静态页面 FPS 校验 (反向测试)</strong></td>
<td>1. SoloPi 监控开启</td>
<td>1. 进入一个纯文字详情页。 2. <strong>手指离开屏幕，完全静止不动</strong> 30秒。</td>
<td>1. <strong>FPS 极低（甚至为 0）是正常的</strong>。 2. 这不是 Bug，而是系统为了省电停止了 GPU 绘制（SurfaceFlinger 休眠）。</td>
</tr>
</tbody></table>
<hr>
<h1 id="ADB"><a href="#ADB" class="headerlink" title="ADB"></a>ADB</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="1-什么是-ADB？-What-is-ADB"><a href="#1-什么是-ADB？-What-is-ADB" class="headerlink" title="1. 什么是 ADB？(What is ADB?)"></a>1. 什么是 ADB？(What is ADB?)</h3><p>全称 <strong>Android Debug Bridge</strong>（安卓调试桥）。</p>
<ul>
<li><strong>通俗理解</strong>：它是一座 <strong>“桥”</strong>，或者说是一个 <strong>“翻译官”</strong>。</li>
<li><strong>作用</strong>：它连接了 <strong>电脑 (PC&#x2F;Mac)</strong> 和 <strong>手机 (Android Device)</strong>。<ul>
<li>电脑不懂手机的内部指令，手机也不听电脑的鼠标点击。</li>
<li>ADB 的作用就是：在电脑的黑窗口（CMD）里输入一行命令，ADB 把它翻译给手机，手机执行后，再把结果（比如日志、截图）传回给电脑。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-ADB-的工作原理（架构）"><a href="#2-ADB-的工作原理（架构）" class="headerlink" title="2. ADB 的工作原理（架构）"></a>2. ADB 的工作原理（架构）</h3><p>ADB 采用的是 <strong>C&#x2F;S 架构 (Client-Server)</strong>，由三部分组成：</p>
<ol>
<li><strong>Client (客户端)</strong>：<ul>
<li><strong>在哪</strong>：在你的 <strong>电脑</strong> 上。</li>
<li><strong>是谁</strong>：就是你敲命令的那个黑窗口（CMD &#x2F; Terminal）。当你输入 <code>adb devices</code> 时，就是 Client 在发号施令。</li>
</ul>
</li>
<li><strong>Server (服务端)</strong>：<ul>
<li><strong>在哪</strong>：在你的 <strong>电脑</strong> 后台运行。</li>
<li><strong>作用</strong>：它是一个管家。它负责管理 Client 和手机之间的通信。如果 ADB 挂了，通常重启这个 Server 就能好 (<code>adb kill-server</code> &#x2F; <code>adb start-server</code>)。</li>
</ul>
</li>
<li><strong>Daemon (守护进程 adbd)</strong>：<ul>
<li><strong>在哪</strong>：在你的 <strong>手机</strong> 上。</li>
<li><strong>作用</strong>：它是手机里的执行者。你发出的命令，最终都是由它在手机后台默默执行的。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="3-为什么学-ADB？"><a href="#3-为什么学-ADB？" class="headerlink" title="3. 为什么学 ADB？"></a>3. 为什么学 ADB？</h3><ul>
<li><strong>自动化测试的灵魂</strong>：<ul>
<li>Appium等自动化工具，底层全是调用的 ADB 命令。<strong>没有 ADB，就没有自动化。</strong></li>
</ul>
</li>
<li><strong>抓取崩溃日志 (Logcat)</strong>：<ul>
<li>App 闪退了，界面上什么都不显示。开发会问：“日志呢？” 这时候你需要用 <code>adb logcat</code> 把手机肚子里的报错信息抓出来。</li>
</ul>
</li>
<li><strong>模拟特殊场景</strong>：<ul>
<li>怎么模拟“低电量”？怎么模拟“弱网”？怎么在不碰手机的情况下“模拟点击屏幕”？全靠 ADB。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-ADB常用功能预览"><a href="#4-ADB常用功能预览" class="headerlink" title="4. ADB常用功能预览"></a>4. ADB常用功能预览</h3><table>
<thead>
<tr>
<th><strong>分类</strong></th>
<th><strong>能帮你做什么？</strong></th>
<th><strong>例子</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>设备连接</strong></td>
<td>查看手机连没连上</td>
<td><code>adb devices</code></td>
</tr>
<tr>
<td><strong>应用管理</strong></td>
<td>电脑上一键安装&#x2F;卸载 App</td>
<td><code>adb install xxx.apk</code></td>
</tr>
<tr>
<td><strong>文件传输</strong></td>
<td>把电脑的电影传到手机，或把手机截图传到电脑</td>
<td><code>adb push</code> &#x2F; <code>adb pull</code></td>
</tr>
<tr>
<td><strong>日志获取</strong></td>
<td>抓取 Crash 报错信息</td>
<td><code>adb logcat</code></td>
</tr>
<tr>
<td><strong>模拟操作</strong></td>
<td>模拟点击、滑动、按键（Home&#x2F;返回）</td>
<td><code>adb shell input tap ...</code></td>
</tr>
<tr>
<td><strong>性能监控</strong></td>
<td>查看 CPU、内存、启动时间</td>
<td><code>adb shell dumpsys ...</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="基础指令"><a href="#基础指令" class="headerlink" title="基础指令"></a>基础指令</h2><h4 id="1-检查设备连接"><a href="#1-检查设备连接" class="headerlink" title="1. 检查设备连接"></a>1. 检查设备连接</h4><p>这是每天工作的第一件事。不连上设备，后面什么都做不了。</p>
<ul>
<li><p><strong>命令</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb devices<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>可能看到的结果</strong>：</p>
<ul>
<li><p><strong>成功</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">List of devices attached<br>HT75W020xxxx    device  &lt;-- 看到这个 <span class="hljs-string">&quot;device&quot;</span> 才算真正成功<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>失败 1 (Unauthorized)</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">HT75W020xxxx    unauthorized<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>原因</strong>：手机上没点“允许”。<strong>解决</strong>：看手机屏幕，会有一个弹窗“允许 USB 调试吗？”，勾选“始终允许”并点击确认。</li>
</ul>
</li>
<li><p><strong>失败 2 (Offline)</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">HT75W020xxxx    offline<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>原因</strong>：连接线接触不良或 ADB 服务卡死。<strong>解决</strong>：拔掉线重插，或者输入 <code>adb kill-server</code> 然后再 <code>adb start-server</code>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-安装与卸载-App"><a href="#2-安装与卸载-App" class="headerlink" title="2. 安装与卸载 App"></a>2. 安装与卸载 App</h4><ul>
<li><p><strong>安装 App</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb install 路径\安装包.apk<br><span class="hljs-comment"># 技巧：输入 &quot;adb install &quot; (有个空格)，然后直接把 apk 文件拖进黑窗口，路径会自动生成！</span><br></code></pre></td></tr></table></figure>

<ul>
<li><em>覆盖安装（保留数据）</em>：<code>adb install -r 路径\安装包.apk</code></li>
</ul>
</li>
<li><p>卸载 App：注意：卸载不能用“应用名”（比如微信），必须用 “包名” (Package Name)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb uninstall 包名<br><span class="hljs-comment"># 例如：adb uninstall com.tencent.mm</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-查找包名"><a href="#3-查找包名" class="headerlink" title="3. 查找包名"></a>3. 查找包名</h4><p><strong>查看手机里所有的 App</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell pm list packages<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>查看当前正在运行的 App 包名</strong><ol>
<li>在手机上打开你想测的 App（比如淘宝）。</li>
<li>在电脑输入：<ul>
<li><strong>Windows</strong>: <code>adb shell dumpsys window | findstr mCurrentFocus</code></li>
<li><strong>Mac</strong>: <code>adb shell dumpsys window | grep mCurrentFocus</code></li>
</ul>
</li>
<li>输出结果中，<code>&#123;&#125;</code> 里的内容，斜杠 <code>/</code> 前面的就是包名。<ul>
<li>例如：<code>u0a205 com.taobao.taobao/com.taobao.tao.TBMainActivity...</code></li>
<li>包名就是：<code>com.taobao.taobao</code></li>
</ul>
</li>
</ol>
</li>
</ul>
<hr>
<h3 id="靶场App"><a href="#靶场App" class="headerlink" title="靶场App"></a>靶场App</h3><h4 id="1-Sauce-Labs-Demo-App-Swag-Labs-——-强烈推荐"><a href="#1-Sauce-Labs-Demo-App-Swag-Labs-——-强烈推荐" class="headerlink" title="1. Sauce Labs Demo App (Swag Labs) —— 强烈推荐"></a>1. Sauce Labs Demo App (Swag Labs) —— <strong>强烈推荐</strong></h4><ul>
<li><strong>特点</strong>：包含标准的登录页、商品列表、拖拽操作、WebView 混合页面、绘图板等，专门为了刁难自动化工具而设计的。</li>
<li><strong>下载地址 (GitHub)</strong>：<a target="_blank" rel="noopener" href="https://github.com/saucelabs/my-demo-app-android/releases">Sauce Labs My Demo App Android Releases</a></li>
</ul>
<h4 id="2-ApiDemos-官方-API-演示"><a href="#2-ApiDemos-官方-API-演示" class="headerlink" title="2. ApiDemos (官方 API 演示)"></a>2. ApiDemos (官方 API 演示)</h4><p>这是 Google 官方提供的“安卓字典”。</p>
<ul>
<li><strong>特点</strong>：它没有任何商业逻辑，但包含了安卓系统里<strong>所有的</strong>控件（按钮、下拉框、弹窗、通知栏等）。</li>
<li><strong>下载地址 (GitHub)</strong>：<a target="_blank" rel="noopener" href="https://github.com/appium/android-apidemos/releases">ApiDemos-debug.apk</a></li>
</ul>
<hr>
<h2 id="文件管理与日志操作"><a href="#文件管理与日志操作" class="headerlink" title="文件管理与日志操作"></a>文件管理与日志操作</h2><p>三条命令：<code>push</code>、<code>pull</code> 和 <code>logcat</code>。</p>
<h3 id="📂-Part-1：文件搬运工-Push-Pull"><a href="#📂-Part-1：文件搬运工-Push-Pull" class="headerlink" title="📂 Part 1：文件搬运工 (Push &amp; Pull)"></a>📂 Part 1：文件搬运工 (Push &amp; Pull)</h3><p>安卓手机的文件系统和 Windows 不太一样，记住一个“万能路径”：<strong><code>/sdcard/</code></strong>。这通常是手机的内部存储根目录</p>
<h4 id="1-adb-push：电脑-➔-手机"><a href="#1-adb-push：电脑-➔-手机" class="headerlink" title="1. adb push：电脑 ➔ 手机"></a>1. <code>adb push</code>：电脑 ➔ 手机</h4><ul>
<li><p><strong>场景</strong>：测“上传头像”功能，需要往手机里放一张图片；或者要测“导入文档”功能。</p>
</li>
<li><p><strong>命令格式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb push &lt;电脑上的文件路径&gt; &lt;手机上的目标路径&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>👉 实操任务 A：把一个文件推送到手机</strong></p>
<ol>
<li><p><strong>准备</strong>：在你的电脑桌面上新建一个文本文档，命名为 <code>test.txt</code>，里面随便写点字（比如 “Hello ADB”）。</p>
</li>
<li><p><strong>执行</strong>：在 CMD 里输入以下命令（配合拖拽大法）：</p>
<ul>
<li><p>输入 <code>adb push </code> (注意空格)</p>
</li>
<li><p>把桌面的 <code>test.txt</code> <strong>拖进</strong> CMD 窗口。</p>
</li>
<li><p>接着输入手机路径 <code> /sdcard/</code> (注意前面有个空格)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Users\LilPear2002&gt;adb push C:\Users\LilPear2002\Desktop\test.txt /sdcard/<br>C:\Users\LilPear2002\Desktop\test.txt: 1 file pushed. 0.0 MB/s (9 bytes <span class="hljs-keyword">in</span> 0.028s)<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>看到 <code>1 file pushed</code>，成功！</p>
</li>
</ol>
<h4 id="2-adb-pull：手机-➔-电脑"><a href="#2-adb-pull：手机-➔-电脑" class="headerlink" title="2. adb pull：手机 ➔ 电脑"></a>2. <code>adb pull</code>：手机 ➔ 电脑</h4><ul>
<li><p><strong>场景</strong>：手机截图了 Bug，或者录屏了，需要把文件拉到电脑上发给开发；或者把手机里的数据库拉出来分析。</p>
</li>
<li><p><strong>命令格式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb pull &lt;手机上的文件路径&gt; &lt;电脑上的目标路径&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>👉 实操任务 B：把刚才的文件拉回来</p>
<p>我们把刚才推过去的 test.txt 拉回到电脑的 C盘根目录（或者其他盘），并改个名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Users\LilPear2002&gt;adb pull /sdcard/test.txt C:\Users\LilPear2002\Desktop\test_back.txt<br>/sdcard/test.txt: 1 file pulled. 0.0 MB/s (9 bytes <span class="hljs-keyword">in</span> 0.008s)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="📝-Part-2：日志侦探-Logcat-——-重点中的重点"><a href="#📝-Part-2：日志侦探-Logcat-——-重点中的重点" class="headerlink" title="📝 Part 2：日志侦探 (Logcat) —— 重点中的重点"></a>📝 Part 2：日志侦探 (Logcat) —— 重点中的重点</h3><p>当 App 闪退（Crash）或者报错时，界面上往往什么都不说。开发问：“Log 呢？” 这时候就要用 adb logcat 把手机报错信息全倒出来。</p>
<h4 id="1-体验“刷屏”"><a href="#1-体验“刷屏”" class="headerlink" title="1. 体验“刷屏”"></a>1. 体验“刷屏”</h4><p>在 CMD 里直接输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb logcat<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>现象</strong>：会看到屏幕疯狂滚动，像黑客帝国一样。这是手机系统和所有 App 正在产生的实时日志。</li>
<li><strong>停止</strong>：按键盘上的 <strong><code>Ctrl + C</code></strong> 终止。</li>
</ul>
<h4 id="2-“抓”日志到文件-最常用"><a href="#2-“抓”日志到文件-最常用" class="headerlink" title="2. “抓”日志到文件 (最常用)"></a>2. “抓”日志到文件 (最常用)</h4><p>直接看屏幕是看不清的，需要把日志<strong>保存</strong>到电脑的一个 <code>.txt</code> 或 <code>.log</code> 文件里。</p>
<p><strong>👉 实操任务 C：抓取一段日志</strong></p>
<ol>
<li><p><strong>清理缓存</strong>（好习惯）：先清空旧的日志，只抓新的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb logcat -c<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>开始抓取</strong>：输入命令，<strong>把日志“重定向”到桌面</strong>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Users\LilPear2002&gt;adb logcat &gt; C:\Users\LilPear2002\Desktop\test.log<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>制造场景</strong>：</p>
<ul>
<li>现在 CMD 看起来像“卡死”了一样（其实它在后台默默记录）。</li>
<li>拿起手机，打开刚才安装的 <strong>Sauce Labs</strong> 或 <strong>ApiDemos</strong>，随便点两下。</li>
</ul>
</li>
<li><p><strong>结束抓取</strong>：</p>
<ul>
<li>回到 CMD，按 <strong><code>Ctrl + C</code></strong> 结束。</li>
</ul>
</li>
<li><p><strong>查看战果</strong>：</p>
<ul>
<li>桌面看看crash.log,里面就是刚才操作手机时产生的所有系统日志！</li>
</ul>
</li>
</ol>
<hr>
<h2 id="模拟用户操作"><a href="#模拟用户操作" class="headerlink" title="模拟用户操作"></a>模拟用户操作</h2><p>自动化测试工具（Appium）的底层原理，其实就是把这些命令封装起来了。</p>
<p>主要使用 <code>adb shell input</code> 这个命令集。</p>
<hr>
<h3 id="🎮-Part-1：物理按键-Key-Events"><a href="#🎮-Part-1：物理按键-Key-Events" class="headerlink" title="🎮 Part 1：物理按键 (Key Events)"></a>🎮 Part 1：物理按键 (Key Events)</h3><p>这是最简单也是最稳定的命令。就算不知道屏幕坐标，也能控制手机。</p>
<p>比如：手机的 Home 键、返回键、电源键。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell input keyevent &lt;按键代码&gt;<br></code></pre></td></tr></table></figure>

<h4 id="常用代码速查表"><a href="#常用代码速查表" class="headerlink" title="常用代码速查表"></a>常用代码速查表</h4><table>
<thead>
<tr>
<th><strong>按键</strong></th>
<th><strong>代码 (Code)</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Home</strong></td>
<td><code>3</code></td>
<td>回到桌面</td>
</tr>
<tr>
<td><strong>Back</strong></td>
<td><code>4</code></td>
<td>返回上一页</td>
</tr>
<tr>
<td><strong>Enter</strong></td>
<td><code>66</code></td>
<td>回车&#x2F;确认</td>
</tr>
</tbody></table>
<p><strong>👉 实操任务 A：</strong></p>
<ol>
<li>打开刚才安装的 <strong>Sauce Labs</strong> 或 <strong>ApiDemos</strong> 应用。</li>
<li>在 CMD 输入：<code>adb shell input keyevent 3</code></li>
<li><strong>结果</strong>：手机瞬间回到桌面了</li>
<li>再输入：<code>adb shell input keyevent 4</code></li>
</ol>
<hr>
<h3 id="👆-Part-2：触摸操作-Tap-Swipe"><a href="#👆-Part-2：触摸操作-Tap-Swipe" class="headerlink" title="👆 Part 2：触摸操作 (Tap &amp; Swipe)"></a>👆 Part 2：触摸操作 (Tap &amp; Swipe)</h3><p>想要像手指一样点击屏幕，你必须告诉 ADB <strong>“点哪里”</strong>。这就涉及到 <strong>X, Y 坐标</strong>。</p>
<h4 id="🔧-开启“上帝之眼”：指针位置"><a href="#🔧-开启“上帝之眼”：指针位置" class="headerlink" title="🔧 开启“上帝之眼”：指针位置"></a>🔧 开启“上帝之眼”：指针位置</h4><p>为了知道坐标，我们需要去手机开启一个开发者设置：</p>
<ol>
<li>打开手机 <strong>“设置” -&gt; “开发者选项”</strong>。</li>
<li>找到并开启 <strong>“指针位置” (Pointer Location)</strong>。</li>
<li><strong>效果</strong>：现在你触摸屏幕，屏幕顶部会显示当前手指的 <strong>X:xxx Y:xxx</strong> 坐标。</li>
</ol>
<h4 id="1-点击-Tap"><a href="#1-点击-Tap" class="headerlink" title="1. 点击 (Tap)"></a>1. 点击 (Tap)</h4><ul>
<li><p><strong>命令</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell input tap &lt;X&gt; &lt;Y&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>例子：假设你现在的 App 图标在屏幕中间，坐标大概是 500 1000。</p>
</li>
</ul>
<h4 id="2-滑动-Swipe"><a href="#2-滑动-Swipe" class="headerlink" title="2. 滑动 (Swipe)"></a>2. 滑动 (Swipe)</h4><ul>
<li><p><strong>命令</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell input swipe &lt;起点X&gt; &lt;起点Y&gt; &lt;终点X&gt; &lt;终点Y&gt; [耗时毫秒]<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>场景</strong>：刷抖音（上滑）、解锁屏幕。</p>
</li>
</ul>
<p>自动刷抖音脚本：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><span class="hljs-built_in">chcp</span> <span class="hljs-number">65001</span> &gt;<span class="hljs-built_in">nul</span><br><span class="hljs-built_in">title</span> 抖音自动刷 - 按Ctrl+C停止<br><span class="hljs-built_in">echo</span> 抖音自动刷脚本启动...<br><span class="hljs-built_in">echo</span> 按 Ctrl+C 停止程序<br><span class="hljs-built_in">echo</span>.<br><br>:loop<br><span class="hljs-comment">REM 上滑操作（从屏幕下方滑到上方）</span><br>adb shell input swipe <span class="hljs-number">500</span> <span class="hljs-number">1600</span> <span class="hljs-number">500</span> <span class="hljs-number">600</span> <span class="hljs-number">350</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">%time%</span> 上滑一次<br><span class="hljs-comment"></span><br><span class="hljs-comment">REM 随机等待时间（3-6秒，更像真人）</span><br><span class="hljs-built_in">set</span> /a waitTime=<span class="hljs-variable">%random%</span> %% <span class="hljs-number">4</span> + <span class="hljs-number">3</span><br>timeout /t <span class="hljs-variable">%waitTime%</span> /nobreak &gt;<span class="hljs-built_in">nul</span><br><span class="hljs-keyword">goto</span> loop<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="⌨️-Part-3：输入文本-Text"><a href="#⌨️-Part-3：输入文本-Text" class="headerlink" title="⌨️ Part 3：输入文本 (Text)"></a>⌨️ Part 3：输入文本 (Text)</h3><p>可以帮你自动输入账号密码。</p>
<ul>
<li><p><strong>注意</strong>：<code>adb shell input text</code> <strong>只能输入英文和数字</strong>，不支持中文（除非安装特殊的 ADB 键盘）。</p>
</li>
<li><p><strong>注意</strong>：输入前，必须先保证<strong>光标已经在输入框里了</strong>（也就是你需要先点一下输入框）。</p>
</li>
<li><p><strong>命令</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb shell input text &lt;内容&gt;<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="🔥-终极实战任务：自动化登录"><a href="#🔥-终极实战任务：自动化登录" class="headerlink" title="🔥 终极实战任务：自动化登录"></a>🔥 终极实战任务：自动化登录</h3><p>结合刚才学的，我们要用纯命令完成 <strong>Sauce Labs</strong> App 的登录操作。</p>
<p><strong>请一步步跟着做：</strong></p>
<ol>
<li><p><strong>启动 App</strong>：手动点击打开 <strong>Sauce Labs</strong> App（那个红色的 Swag Labs）。</p>
</li>
<li><p><strong>获取坐标</strong>：</p>
<ul>
<li>看一眼屏幕上 <strong>“Username”</strong> 输入框的位置，记下它的 X, Y（例如 X&#x3D;500, Y&#x3D;400）。</li>
<li>看一眼 <strong>“LOGIN”</strong> 按钮的位置，记下它的 X, Y（例如 X&#x3D;500, Y&#x3D;1000）。</li>
</ul>
</li>
<li><p><strong>执行自动化脚本</strong>（在 CMD 依次输入）：</p>
<ul>
<li><p>步骤 1 (聚焦)：点击输入框</p>
<p>adb shell input tap 500 400 (把这里的坐标换成你刚才记下的)</p>
</li>
<li><p>步骤 2 (输入)：输入用户名</p>
<p>adb shell input text standard_user</p>
</li>
<li><p>步骤 3 (收起键盘)：有时候键盘挡住按钮了，按一下返回键收起键盘</p>
<p>adb shell input keyevent 4</p>
</li>
<li><p>步骤 4 (登录)：点击登录按钮</p>
<p>adb shell input tap 500 1000 (换成你记下的按钮坐标)</p>
</li>
</ul>
</li>
</ol>
<hr>
<p>如果这个时候要测 100 台 不同型号的手机，每台手机分辨率不一样，按钮坐标肯定也不一样。</p>
<p>这时候用 ADB 写死坐标 tap 500 400 还有用吗？</p>
<p><em>(这就是为什么需要 Appium —— 它能通过“控件名”而不是“死坐标”来点击。)</em></p>
<hr>
<h1 id="Appium"><a href="#Appium" class="headerlink" title="Appium"></a>Appium</h1><h2 id="1-Appium-是什么？"><a href="#1-Appium-是什么？" class="headerlink" title="1. Appium 是什么？"></a>1. Appium 是什么？</h2><p>用一句话定义：<strong>Appium 是移动端自动化测试的“世界通用语”。</strong></p>
<ul>
<li><strong>跨平台 (Cross-Platform)</strong>：<ul>
<li>学会了一套代码，既能测 <strong>Android</strong>（安卓），也能测 <strong>iOS</strong>（苹果）。</li>
<li><em>注：ADB 只能测安卓。</em></li>
</ul>
</li>
<li><strong>多语言支持</strong>：<ul>
<li><strong>Python</strong> 写</li>
<li><strong>Java</strong></li>
<li>JavaScript、Ruby… 都支持。</li>
</ul>
</li>
<li><strong>黑盒测试</strong>：<ul>
<li>不需要 App 的源代码，只要有个安装包就能测。</li>
</ul>
</li>
</ul>
<h3 id="Appium-的核心原理（C-S-架构）"><a href="#Appium-的核心原理（C-S-架构）" class="headerlink" title="Appium 的核心原理（C&#x2F;S 架构）"></a>Appium 的核心原理（C&#x2F;S 架构）</h3><p>这是面试必考题，也是理解后续安装步骤的关键。请看下面这个流程：</p>
<blockquote>
<p><strong>你的代码 (Client) ↔ Appium Server ↔ 手机 (Driver)</strong></p>
</blockquote>
<ol>
<li><strong>Client (客户端)</strong>：<ul>
<li>这就是你写的 Python 代码。写了一句 <code>driver.click()</code>。</li>
</ul>
</li>
<li><strong>Appium Server (服务端)</strong>：<ul>
<li>这是一个运行在电脑上的程序（基于 Node.js）。</li>
<li>它像个**“翻译官”**。它收到 Python 代码，把它翻译成手机能听懂的 JSON 指令。</li>
</ul>
</li>
<li><strong>Driver (驱动)</strong>：<ul>
<li>在安卓上，Appium 会在手机里装一个叫 <code>UiAutomator2</code> 的东西。</li>
<li>这个驱动接收“翻译官”的指令，然后指挥手机去点击按钮。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><ol>
<li><strong>Node.js</strong>：因为 Appium Server 是用 JS 写的，必须装它才能运行 Server。</li>
<li><strong>Appium Server</strong>：核心服务程序。</li>
<li><strong>Appium Inspector</strong>：一个<strong>可视化工具</strong>。<ul>
<li><em>它的作用</em>：你可以像在网页上“审查元素”一样，用鼠标点一下手机屏幕上的按钮，它就会告诉你这个按钮的 ID 是什么，XPath 是什么。<strong>这是写脚本的神器。</strong></li>
</ul>
</li>
<li><strong>Appium-Python-Client</strong>：Python 的第三方库（<code>pip install</code> 即可）。</li>
</ol>
<hr>
<h2 id="2-元素定位"><a href="#2-元素定位" class="headerlink" title="2.元素定位"></a>2.元素定位</h2><p>主要使用 <strong><code>AppiumBy</code></strong> 这个类（需要导入：<code>from appium.webdriver.common.appiumby import AppiumBy</code>）。</p>
<hr>
<h3 id="🏆-第一梯队：最推荐"><a href="#🏆-第一梯队：最推荐" class="headerlink" title="🏆 第一梯队：最推荐"></a>🏆 第一梯队：最推荐</h3><h4 id="1-ID-定位-AppiumBy-ID"><a href="#1-ID-定位-AppiumBy-ID" class="headerlink" title="1. ID 定位 (AppiumBy.ID)"></a>1. ID 定位 (<code>AppiumBy.ID</code>)</h4><ul>
<li><p><strong>对应属性</strong>：<strong><code>resource-id</code></strong></p>
</li>
<li><p><strong>Selenium 对比</strong>：等同于 Web 的 <code>id</code>。</p>
</li>
<li><p><strong>特点</strong>：通常是唯一的，也是最快的。</p>
</li>
<li><p>B站例子：</p>
<p>B站首页搜索框的 resource-id 通常长这样：tv.danmaku.bili:id&#x2F;expand_search。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/expand_search&quot;</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-Accessibility-ID-定位-AppiumBy-ACCESSIBILITY-ID-——-移动端特有"><a href="#2-Accessibility-ID-定位-AppiumBy-ACCESSIBILITY-ID-——-移动端特有" class="headerlink" title="2. Accessibility ID 定位 (AppiumBy.ACCESSIBILITY_ID) —— 移动端特有"></a>2. Accessibility ID 定位 (<code>AppiumBy.ACCESSIBILITY_ID</code>) —— <strong>移动端特有</strong></h4><ul>
<li><p><strong>对应属性</strong>：<strong><code>content-desc</code></strong> (Android) &#x2F; <strong><code>accessibility-id</code></strong> (iOS)</p>
</li>
<li><p><strong>特点</strong>：这是 Appium 的<strong>王牌</strong>。</p>
<ul>
<li>它原本是给盲人读屏软件用的（比如“这是一个搜索按钮”）。</li>
<li><strong>跨平台神器</strong>：如果你将来测 iOS，这招也通用。</li>
<li><strong>B站例子</strong>：很多图片按钮没有文字，但开发会加 <code>content-desc</code>。比如“更多”按钮。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">driver.find_element(AppiumBy.ACCESSIBILITY_ID, <span class="hljs-string">&quot;更多&quot;</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="🥈-第二梯队：万能但慢（兜底方案）"><a href="#🥈-第二梯队：万能但慢（兜底方案）" class="headerlink" title="🥈 第二梯队：万能但慢（兜底方案）"></a>🥈 第二梯队：万能但慢（兜底方案）</h3><h4 id="3-XPath-定位-AppiumBy-XPATH"><a href="#3-XPath-定位-AppiumBy-XPATH" class="headerlink" title="3. XPath 定位 (AppiumBy.XPATH)"></a>3. XPath 定位 (<code>AppiumBy.XPATH</code>)</h4><ul>
<li><p><strong>对应属性</strong>：可以使用任何属性组合（text, class, index…）。</p>
</li>
<li><p><strong>Selenium 对比</strong>：语法基本一样，但<strong>标签名变了</strong>。</p>
<ul>
<li>Web 标签是 <code>div</code>, <code>input</code>, <code>a</code>。</li>
<li>Android 标签是 <strong>完整的类名</strong>，比如 <code>android.widget.TextView</code>, <code>android.widget.EditText</code>。</li>
</ul>
</li>
<li><p>B站例子：</p>
<p>定位那个写着“Python”的搜索建议：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 语法：//类名[@属性=&#x27;值&#x27;]</span><br>driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;//android.widget.TextView[@text=&#x27;Python自动化&#x27;]&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>包含匹配 (contains)</strong>：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;//android.widget.TextView[contains(@text, &#x27;Python&#x27;)]&quot;</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="🥉-第三梯队：安卓原生黑科技（进阶）"><a href="#🥉-第三梯队：安卓原生黑科技（进阶）" class="headerlink" title="🥉 第三梯队：安卓原生黑科技（进阶）"></a>🥉 第三梯队：安卓原生黑科技（进阶）</h3><h4 id="4-Android-UIAutomator-AppiumBy-ANDROID-UIAUTOMATOR"><a href="#4-Android-UIAutomator-AppiumBy-ANDROID-UIAUTOMATOR" class="headerlink" title="4. Android UIAutomator (AppiumBy.ANDROID_UIAUTOMATOR)"></a>4. Android UIAutomator (<code>AppiumBy.ANDROID_UIAUTOMATOR</code>)</h4><ul>
<li><p><strong>原理</strong>：这是绕过 Appium，直接用安卓底层的 Java 代码去查元素。<strong>速度极快</strong>，特别适合滚动查找。</p>
</li>
<li><p><strong>语法</strong>：里面写的是 <strong>Java 字符串</strong>。</p>
</li>
<li><p><strong>B站例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 相当于：new UiSelector().text(&quot;推荐&quot;)</span><br>driver.find_element(AppiumBy.ANDROID_UIAUTOMATOR, <span class="hljs-string">&#x27;new UiSelector().text(&quot;推荐&quot;)&#x27;</span>)<br><br><span class="hljs-comment"># 组合定位：找一个 resource-id 是 xxx 且 text 是 &quot;搜索&quot; 的元素</span><br>driver.find_element(AppiumBy.ANDROID_UIAUTOMATOR, <span class="hljs-string">&#x27;new UiSelector().resourceId(&quot;xxx&quot;).text(&quot;搜索&quot;)&#x27;</span>)<br></code></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="🚫-避坑指南：不再推荐的方式"><a href="#🚫-避坑指南：不再推荐的方式" class="headerlink" title="🚫 避坑指南：不再推荐的方式"></a>🚫 避坑指南：不再推荐的方式</h3><ol>
<li><strong><code>By.NAME</code></strong>：在 Appium 1.x 早期版本可以用，但在 Appium 2.x 和高版本安卓中基本<strong>废弃</strong>了，不要用。</li>
<li><strong><code>By.TAG_NAME</code></strong>（Class Name）：<ul>
<li>在 Web 里，<code>TAG_NAME</code> 是 <code>input</code>，这很明确。</li>
<li>在 App 里，页面上可能有 100 个 <code>android.widget.TextView</code>。你用这个定位，肯定不准。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="🛠️-实战演练：如何在-Inspector-里挑"><a href="#🛠️-实战演练：如何在-Inspector-里挑" class="headerlink" title="🛠️ 实战演练：如何在 Inspector 里挑"></a>🛠️ 实战演练：如何在 Inspector 里挑</h3><p>当你用 Appium Inspector 点击 B站的一个图标时，右侧会显示一大堆属性。<strong>选谁？请按这个顺序：</strong></p>
<ol>
<li>先看 <strong><code>accessibility-id</code> (content-desc)</strong>：如果有值，<strong>首选它</strong>！</li>
<li>再看 <strong><code>resource-id</code></strong>：如果有值，用 <code>AppiumBy.ID</code>。</li>
<li>如果前两个都没有，或者都不唯一：<ul>
<li>看 <strong><code>text</code></strong>：如果有文字，用 XPath <code>//...[@text=&#39;文字&#39;]</code>。</li>
<li>如果连文字都没有（只是个纯图标）：只能靠 XPath 的层级关系（找它爸爸）或者坐标了。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="📝-总结表"><a href="#📝-总结表" class="headerlink" title="📝 总结表"></a>📝 总结表</h3><table>
<thead>
<tr>
<th><strong>定位方式</strong></th>
<th><strong>代码写法 (AppiumBy.xxx)</strong></th>
<th><strong>依赖属性 (Inspector里看)</strong></th>
<th><strong>推荐指数</strong></th>
<th><strong>评价</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ID</strong></td>
<td><code>ID</code></td>
<td><code>resource-id</code></td>
<td>⭐⭐⭐⭐⭐</td>
<td><strong>首选</strong>，最快最稳。</td>
</tr>
<tr>
<td><strong>Accessibility ID</strong></td>
<td><code>ACCESSIBILITY_ID</code></td>
<td><code>content-desc</code></td>
<td>⭐⭐⭐⭐⭐</td>
<td><strong>首选</strong>，跨平台，语义清晰。</td>
</tr>
<tr>
<td><strong>XPath</strong></td>
<td><code>XPATH</code></td>
<td>任意 (text, class…)</td>
<td>⭐⭐⭐</td>
<td><strong>万能</strong>，但性能较差，语法繁琐。</td>
</tr>
<tr>
<td><strong>UIAutomator</strong></td>
<td><code>ANDROID_UIAUTOMATOR</code></td>
<td>任意 (Java语法)</td>
<td>⭐⭐⭐⭐</td>
<td><strong>安卓特供</strong>，速度快，适合复杂场景（如滚动）。</td>
</tr>
<tr>
<td><strong>Class Name</strong></td>
<td><code>CLASS_NAME</code></td>
<td><code>class</code></td>
<td>⭐</td>
<td><strong>不推荐</strong>，重复率太高。</td>
</tr>
</tbody></table>
<hr>
<p>案例：打开B站搜索Python自动化测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> appium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> appium.webdriver.common.appiumby <span class="hljs-keyword">import</span> AppiumBy<br><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait<br><span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># --- 配置参数 ---</span><br>desired_caps = &#123;<br>    <span class="hljs-string">&#x27;platformName&#x27;</span>: <span class="hljs-string">&#x27;Android&#x27;</span>,<br>    <span class="hljs-string">&#x27;platformVersion&#x27;</span>: <span class="hljs-string">&#x27;13&#x27;</span>,<br>    <span class="hljs-string">&#x27;deviceName&#x27;</span>: <span class="hljs-string">&#x27;V4YHB6XS6DSSQ89L&#x27;</span>,<br>    <span class="hljs-string">&#x27;appPackage&#x27;</span>: <span class="hljs-string">&#x27;tv.danmaku.bili&#x27;</span>,<br>    <span class="hljs-string">&#x27;appActivity&#x27;</span>: <span class="hljs-string">&#x27;.MainActivityV2&#x27;</span>,<br>    <span class="hljs-string">&#x27;automationName&#x27;</span>: <span class="hljs-string">&#x27;UiAutomator2&#x27;</span>,<br>    <span class="hljs-comment"># 关键参数：不重置应用（保留你的登录状态，避免每次都弹隐私协议）</span><br>    <span class="hljs-string">&#x27;noReset&#x27;</span>: <span class="hljs-literal">True</span><br>&#125;<br><br>driver = <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在连接 Appium...&quot;</span>)<br>    driver = webdriver.Remote(<span class="hljs-string">&#x27;http://127.0.0.1:4723&#x27;</span>, desired_caps)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;强制唤醒 B站...&quot;</span>)<br>    driver.activate_app(<span class="hljs-string">&quot;tv.danmaku.bili&quot;</span>)<br>    <span class="hljs-comment"># 设置全局隐式等待 10秒（给B站启动一点缓冲时间）</span><br>    driver.implicitly_wait(<span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B站启动成功！&quot;</span>)<br><br>    time.sleep(<span class="hljs-number">5</span>)<br><br>    <span class="hljs-comment"># --- 1. 处理“青少年模式”弹窗 (B站特有) ---</span><br>    <span class="hljs-comment"># 这是一个“可能出现，也可能不出现”的弹窗，所以我们要用 try-except</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;检查是否有青少年模式弹窗...&quot;</span>)<br>        <span class="hljs-comment"># 这里需要你填入你在 Inspector 里抓到的“我知道了”按钮的 ID</span><br>        <span class="hljs-comment"># B站通常的 ID 可能是 text_view 或者 close_button，下面是示例 ID，你需要替换！</span><br>        teenager_btn = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/text_ok&quot;</span>)<br>        teenager_btn.click()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;已关闭青少年模式弹窗&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;未检测到弹窗，继续执行...&quot;</span>)<br><br>    <span class="hljs-comment"># --- 2. 点击首页顶部的“搜索框” ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在寻找搜索框...&quot;</span>)<br>    <span class="hljs-comment"># 这里的 ID 是 B站首页顶部搜索框的典型 ID (expand_search)</span><br>    <span class="hljs-comment"># 如果报错，请用 Inspector 确认一下是不是这个</span><br>    search_box = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/search_text&quot;</span>)<br><br>    search_box.click()<br><br>    <span class="hljs-comment"># --- 3. 输入关键字 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;进入搜索页，输入关键字...&quot;</span>)<br>    <span class="hljs-comment"># 点击搜索框后，会跳转到一个新页面，这里有一个真正的输入框</span><br>    <span class="hljs-comment"># 这里的 ID 通常是 search_src_text</span><br>    <span class="hljs-comment"># input_field = driver.find_element(AppiumBy.ID, &quot;tv.danmaku.bili:id/search_src_text&quot;)</span><br>    input_field = driver.find_element(AppiumBy.ACCESSIBILITY_ID, <span class="hljs-string">&quot;搜索查询&quot;</span>)<br>    input_field.send_keys(<span class="hljs-string">&quot;Python自动化测试&quot;</span>)<br><br>    <span class="hljs-comment"># --- 4. 点击“搜索”按钮 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;点击搜索按钮...&quot;</span>)<br>    <span class="hljs-comment"># 这是一个 text 属性为“搜索”的 TextView</span><br>    search_btn = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&#x27;//android.widget.TextView[@resource-id=&quot;tv.danmaku.bili:id/action_search&quot;]&#x27;</span>)<br>    search_btn.click()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 搜索动作完成！请看手机屏幕效果&quot;</span>)<br><br>    <span class="hljs-comment"># 停留一会让你看结果</span><br>    time.sleep(<span class="hljs-number">5</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 出错了: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">finally</span>:<br>    <span class="hljs-keyword">if</span> driver:<br>        driver.quit()<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="3-操作"><a href="#3-操作" class="headerlink" title="3.操作"></a>3.操作</h2><p>因为手机和浏览器不一样（手机有实体按键、手指触摸），所以常用方法分为两类：</p>
<ol>
<li><strong>“老朋友”</strong>：和 Selenium 一模一样的（点击、输入）。</li>
<li><strong>“新面孔”</strong>：移动端特有的（按键、触摸、属性获取）。</li>
</ol>
<hr>
<h3 id="🕹️-Part-1-元素操作-和-Selenium-对标"><a href="#🕹️-Part-1-元素操作-和-Selenium-对标" class="headerlink" title="🕹️ Part 1: 元素操作 (和 Selenium 对标)"></a>🕹️ Part 1: 元素操作 (和 Selenium 对标)</h3><h4 id="1-点击与输入-完全一致"><a href="#1-点击与输入-完全一致" class="headerlink" title="1. 点击与输入 (完全一致)"></a>1. 点击与输入 (完全一致)</h4><ul>
<li><code>element.click()</code>：点击。</li>
<li><code>element.send_keys(&quot;...&quot;)</code>：输入。</li>
<li><code>element.clear()</code>：清空输入框。</li>
</ul>
<h4 id="2-获取属性-Get-Attribute-——-有差异！"><a href="#2-获取属性-Get-Attribute-——-有差异！" class="headerlink" title="2. 获取属性 (Get Attribute) —— 有差异！"></a>2. 获取属性 (Get Attribute) —— <strong>有差异！</strong></h4><p>在 Appium 里，属性名变了：</p>
<table>
<thead>
<tr>
<th><strong>想要获取什么？</strong></th>
<th><strong>Selenium (Web)</strong></th>
<th><strong>Appium (Android)</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>显示的文字</strong></td>
<td><code>element.text</code></td>
<td><code>element.text</code></td>
<td><strong>通用</strong>。优先用这个。</td>
</tr>
<tr>
<td><strong>是否被选中</strong></td>
<td><code>get_attribute(&quot;checked&quot;)</code></td>
<td><code>get_attribute(&quot;checked&quot;)</code></td>
<td>复选框&#x2F;单选框常用（返回 “true”&#x2F;“false” 字符串）。</td>
</tr>
<tr>
<td><strong>是否可用</strong></td>
<td><code>is_enabled()</code></td>
<td><code>get_attribute(&quot;enabled&quot;)</code></td>
<td>按钮是否变灰。</td>
</tr>
<tr>
<td><strong>无障碍描述</strong></td>
<td>(无)</td>
<td><strong><code>get_attribute(&quot;content-desc&quot;)</code></strong></td>
<td><strong>重点！</strong> 很多图片按钮没文字，只能靠这个断言。</td>
</tr>
<tr>
<td><strong>包名</strong></td>
<td>(无)</td>
<td><code>get_attribute(&quot;package&quot;)</code></td>
<td>验证是否跳到了别的 App。</td>
</tr>
</tbody></table>
<p>👉 实战场景：</p>
<p>你搜索完“Python”后，想验证搜索框里的字是不是“Python”？或者想获取某个视频的标题。</p>
<hr>
<h3 id="📱-Part-2-手机硬按键-Hardware-Keys-——-Appium-特有"><a href="#📱-Part-2-手机硬按键-Hardware-Keys-——-Appium-特有" class="headerlink" title="📱 Part 2: 手机硬按键 (Hardware Keys) —— Appium 特有"></a>📱 Part 2: 手机硬按键 (Hardware Keys) —— <strong>Appium 特有</strong></h3><p>做 App 测试经常需要：返回上一页、回到桌面、调节音量。使用 driver.press_keycode(代码) 方法。</p>
<h4 id="常用按键代码-KeyCodes"><a href="#常用按键代码-KeyCodes" class="headerlink" title="常用按键代码 (KeyCodes)"></a>常用按键代码 (KeyCodes)</h4><ul>
<li><strong>返回键 (Back)</strong>: <code>4</code> (最常用！)</li>
<li><strong>Home 键</strong>: <code>3</code></li>
<li><strong>音量加</strong>: <code>24</code></li>
<li><strong>音量减</strong>: <code>25</code></li>
<li><strong>回车 (Enter)</strong>: <code>66</code> (搜索时除了点搜索按钮，也可以按这个)</li>
</ul>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 模拟手指按手机侧面的“返回”键</span><br>driver.press_keycode(<span class="hljs-number">4</span>) <br></code></pre></td></tr></table></figure>

<hr>
<h3 id="👆-Part-3-滑动操作-Swipe-——-重头戏"><a href="#👆-Part-3-滑动操作-Swipe-——-重头戏" class="headerlink" title="👆 Part 3: 滑动操作 (Swipe) —— 重头戏"></a>👆 Part 3: 滑动操作 (Swipe) —— <strong>重头戏</strong></h3><p>这是 Web 和 App 最大的区别。</p>
<p>Web 页面长了有滚动条，Selenium 可以用 JS window.scrollTo。App 没有滚动条，全靠手指滑。Appium 提供了简单的滑动 API：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">driver.swipe(start_x, start_y, end_x, end_y, duration)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>start_x</code>, <code>start_y</code>: 起点坐标。</li>
<li><code>end_x</code>, <code>end_y</code>: 终点坐标。</li>
<li><code>duration</code>: 滑动耗时（毫秒）。<strong>越短滑得越快（惯性大），越长越精准。</strong></li>
</ul>
<p>📐 坐标怎么算？</p>
<p>不要写死 500, 1000！因为不同手机屏幕大小不一样。</p>
<p>通用公式：先获取屏幕尺寸，然后按百分比滑。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 获取屏幕宽高</span><br>size = driver.get_window_size()<br>width = size[<span class="hljs-string">&#x27;width&#x27;</span>]<br>height = size[<span class="hljs-string">&#x27;height&#x27;</span>]<br><br><span class="hljs-comment"># 向上滑动 (手指从下往上，浏览下面的内容)</span><br><span class="hljs-comment"># x 轴不变（屏幕中间），y 轴从 90% 处滑到 10% 处</span><br>driver.swipe(width * <span class="hljs-number">0.5</span>, height * <span class="hljs-number">0.9</span>, width * <span class="hljs-number">0.5</span>, height * <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="⚔️-实战任务：B-站搜索-滑动-返回"><a href="#⚔️-实战任务：B-站搜索-滑动-返回" class="headerlink" title="⚔️ 实战任务：B 站搜索 + 滑动 + 返回"></a>⚔️ 实战任务：B 站搜索 + 滑动 + 返回</h3><p>任务目标：</p>
<ol>
<li>启动 B 站，搜“Python自动化”。</li>
<li><strong>断言</strong>：验证搜索结果页的输入框里确实填着“Python自动化”（练习 <code>text</code> 属性）。</li>
<li><strong>滑动</strong>：向下滑动两下，浏览下面的视频（练习 <code>swipe</code>）。</li>
<li><strong>返回</strong>：按两次物理返回键，回到 B 站首页（练习 <code>keycode</code>）。</li>
</ol>
<p>请更新你的脚本（保留前面的 setup 部分）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ... (前面的配置和启动代码保持不变) ...</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 1. --- 之前的搜索流程 (略，保留你写的) ---</span><br>    <span class="hljs-comment"># ... (点击搜索框 -&gt; 输入&quot;Python自动化&quot; -&gt; 点击搜索按钮) ...</span><br>    <span class="hljs-comment"># 假设你已经点完搜索按钮了，现在在结果页</span><br><br>    time.sleep(<span class="hljs-number">3</span>) <span class="hljs-comment"># 等结果加载</span><br><br>    <span class="hljs-comment"># 2. --- 练习：获取属性与断言 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在验证搜索结果...&quot;</span>)<br>    <span class="hljs-comment"># 重新定位结果页顶部的搜索框 (ID 通常和首页不一样，或者是同一个，视 B 站版本而定)</span><br>    <span class="hljs-comment"># B 站结果页输入框 ID 通常还是: tv.danmaku.bili:id/search_src_text</span><br>    result_input = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/search_src_text&quot;</span>)<br>    <br>    <span class="hljs-comment"># 获取它显示的文字</span><br>    actual_text = result_input.text<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;搜索框里的文字是: <span class="hljs-subst">&#123;actual_text&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-comment"># 断言</span><br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&quot;Python&quot;</span> <span class="hljs-keyword">in</span> actual_text<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 断言成功：搜索词正确&quot;</span>)<br><br>    <span class="hljs-comment"># 3. --- 练习：屏幕滑动 (Swipe) ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;准备向下滑动浏览视频...&quot;</span>)<br>    <br>    <span class="hljs-comment"># 获取屏幕尺寸</span><br>    size = driver.get_window_size()<br>    w = size[<span class="hljs-string">&#x27;width&#x27;</span>]<br>    h = size[<span class="hljs-string">&#x27;height&#x27;</span>]<br>    <br>    <span class="hljs-comment"># 滑动两次</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;第 <span class="hljs-subst">&#123;i+<span class="hljs-number">1</span>&#125;</span> 次滑动...&quot;</span>)<br>        <span class="hljs-comment"># 从下(70%) 往上(30%) 滑，模拟手指上滑</span><br>        driver.swipe(w * <span class="hljs-number">0.5</span>, h * <span class="hljs-number">0.7</span>, w * <span class="hljs-number">0.5</span>, h * <span class="hljs-number">0.3</span>, <span class="hljs-number">1000</span>)<br>        time.sleep(<span class="hljs-number">2</span>) <span class="hljs-comment"># 滑完停顿一下，像真人在看</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 滑动完成&quot;</span>)<br><br>    <span class="hljs-comment"># 4. --- 练习：物理按键 (Back) ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;准备按物理返回键回到首页...&quot;</span>)<br>    <br>    <span class="hljs-comment"># 按一次返回 (可能只是收起键盘，或者退回上一步)</span><br>    driver.press_keycode(<span class="hljs-number">4</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br>    <br>    <span class="hljs-comment"># 再按一次返回 (彻底退回首页)</span><br>    driver.press_keycode(<span class="hljs-number">4</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 已执行返回操作&quot;</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 出错了: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">finally</span>:<br>    time.sleep(<span class="hljs-number">3</span>)<br>    driver.quit()<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="4-窗口和标签页操作"><a href="#4-窗口和标签页操作" class="headerlink" title="4.窗口和标签页操作"></a>4.窗口和标签页操作</h2><p>这里有一个 <strong>巨大的思维转换</strong> 需要注意：</p>
<h3 id="🤯-核心概念：Appium-vs-Selenium-的“窗口”区别"><a href="#🤯-核心概念：Appium-vs-Selenium-的“窗口”区别" class="headerlink" title="🤯 核心概念：Appium vs Selenium 的“窗口”区别"></a>🤯 核心概念：Appium vs Selenium 的“窗口”区别</h3><p>在 Selenium（Web）中，点击一个链接，可能会弹出一个新的浏览器标签页（Tab）或窗口（Window），此时必须用 <code>driver.switch_to.window(handle)</code> 才能控制新页面。</p>
<p><strong>但在 Appium（原生 App）中，逻辑完全不同：</strong></p>
<ol>
<li><strong>没有“多窗口”概念</strong>：<ul>
<li>手机屏幕一次只能显示一个 App 的页面。</li>
<li>当点击一个按钮跳到新页面时（比如从“搜索列表”跳到“视频详情页”），<strong>Appium 会自动跟随过去</strong>。</li>
<li><strong>结论</strong>：<strong>不需要</strong>写 <code>switch_to.window</code>！焦点永远在当前显示的屏幕上。</li>
</ul>
</li>
<li><strong>“Activity” 代替了 “Window”</strong>：<ul>
<li>Web 里的“页面 URL”，在安卓里叫 <strong><code>Activity</code></strong>（活动）。</li>
<li>可以通过检查 <code>driver.current_activity</code> 来判断当前是在“首页”还是“详情页”。</li>
</ul>
</li>
<li><strong>唯一的“特殊情况” —— WebView (H5)</strong>：<ul>
<li>如果在 B站里点了一个广告，打开了一个<strong>网页</strong>，这时候才涉及到类似 Selenium 的“切换框架”操作（这叫 <strong>Context 切换</strong>，它是高级内容）。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="🎬-实战案例：B站“视频详情页”进出测试"><a href="#🎬-实战案例：B站“视频详情页”进出测试" class="headerlink" title="🎬 实战案例：B站“视频详情页”进出测试"></a>🎬 实战案例：B站“视频详情页”进出测试</h3><p>既然不用切换窗口，那我们怎么测“页面跳转”呢？</p>
<p>逻辑是： 记录当前 Activity -&gt; 点击跳转 -&gt; 等待新页面 -&gt; 验证新 Activity -&gt; 按返回键“关闭”页面。</p>
<p><strong>任务目标</strong>：</p>
<ol>
<li>在搜索结果页，点击<strong>第一个视频</strong>。</li>
<li><strong>验证</strong>：是否成功进入了“视频播放页”（检测 Activity 变了没）。</li>
<li><strong>操作</strong>：在播放页停留 5 秒（模拟看视频）。</li>
<li><strong>返回</strong>：按返回键，回到搜索结果页。</li>
</ol>
<h4 id="💻-代码实战"><a href="#💻-代码实战" class="headerlink" title="💻 代码实战"></a>💻 代码实战</h4><p>请在之前的搜索脚本后面，续写以下内容（注意看注释里的 Activity 变化）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ... (前面是搜索代码：输入关键字 -&gt; 点击搜索按钮 -&gt; 验证结果页文字) ...</span><br><span class="hljs-comment"># 假设现在代码运行到了搜索结果页</span><br><br>    <span class="hljs-comment"># --- 5. 进阶：页面跳转与 Activity 验证 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 开始测试页面跳转 ---&quot;</span>)<br>    <br>    <span class="hljs-comment"># A. 打印当前的 Activity (应该是搜索结果页)</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;跳转前 Activity: <span class="hljs-subst">&#123;driver.current_activity&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-comment"># B. 点击第一个视频</span><br>    <span class="hljs-comment"># B站搜索结果通常是一个列表，我们用 XPath 找第一个包含“Python”的标题</span><br>    <span class="hljs-comment"># 注意：这里可能会点到广告，为了简单，我们尝试点列表里的第一个项</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;点击第一个视频...&quot;</span>)<br>    <br>    <span class="hljs-comment"># 这个 XPath 意思是：找当前页面所有包含文本的 TextView，选第2个或第3个(因为第1个可能是搜索框里的字)</span><br>    <span class="hljs-comment"># 更好的方式是用 Inspector 抓取视频封面的 ID，这里演示通用逻辑</span><br>    video_item = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;(//android.widget.TextView[contains(@text, &#x27;Python&#x27;)])[3]&quot;</span>)<br>    video_item.click()<br>    <br>    <span class="hljs-comment"># C. 等待跳转 (页面切换需要时间)</span><br>    time.sleep(<span class="hljs-number">3</span>)<br>    <br>    <span class="hljs-comment"># D. 验证是否进入了新页面 (Activity 应该变了)</span><br>    current_act = driver.current_activity<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;跳转后 Activity: <span class="hljs-subst">&#123;current_act&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-comment"># B站的视频播放页 Activity 通常包含 &quot;VideoDetails&quot; 或 &quot;Bangumi&quot;</span><br>    <span class="hljs-comment"># 如果 Activity 名字变了，就说明跳转成功</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Details&quot;</span> <span class="hljs-keyword">in</span> current_act <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;Video&quot;</span> <span class="hljs-keyword">in</span> current_act:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 成功进入视频详情页！&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;⚠️ Activity 名字好像没变，当前是: <span class="hljs-subst">&#123;current_act&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># E. 模拟看视频 5秒</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在假装看视频...&quot;</span>)<br>    time.sleep(<span class="hljs-number">5</span>)<br>    <br>    <span class="hljs-comment"># F. 退出页面 (相当于 Selenium 的 close window)</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;看完啦，按返回键退出...&quot;</span>)<br>    driver.press_keycode(<span class="hljs-number">4</span>) <span class="hljs-comment"># Back 键</span><br>    <br>    <span class="hljs-comment"># 验证是否回到了搜索页</span><br>    time.sleep(<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;返回后 Activity: <span class="hljs-subst">&#123;driver.current_activity&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># ... (后面的 quit 代码) ...</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="🕵️‍♂️-真正的“Tab”操作：底部导航栏"><a href="#🕵️‍♂️-真正的“Tab”操作：底部导航栏" class="headerlink" title="🕵️‍♂️ 真正的“Tab”操作：底部导航栏"></a>🕵️‍♂️ 真正的“Tab”操作：底部导航栏</h3><p>标签页（Tab）在 App 里通常指的是<strong>底部的导航栏</strong>（首页 | 动态 | 会员购 | 我的）。</p>
<p>测这个非常简单，就是点点点。</p>
<p><strong>实战任务 B：底部 Tab 切换测试</strong></p>
<ol>
<li>启动 B 站。</li>
<li>点击底部的 <strong>“我的”</strong>。</li>
<li>检查是否到了个人中心。</li>
<li>点击底部的 <strong>“首页”</strong>。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 这段代码可以单独运行，或者放在搜索之前</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># ... (连接 Appium 代码) ...</span><br>    driver.activate_app(<span class="hljs-string">&quot;tv.danmaku.bili&quot;</span>)<br>    time.sleep(<span class="hljs-number">5</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 开始测试底部 Tab 切换 ---&quot;</span>)<br>    <br>    <span class="hljs-comment"># 1. 寻找底部的“我的”按钮</span><br>    <span class="hljs-comment"># 这种固定按钮，通常 text 是固定的，用 XPath 或者 Accessibility ID 找</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;点击 &#x27;我的&#x27;...&quot;</span>)<br>    <span class="hljs-comment"># 尝试用 XPath 文本定位</span><br>    me_tab = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;//*[@text=&#x27;我的&#x27;]&quot;</span>)<br>    me_tab.click()<br>    time.sleep(<span class="hljs-number">2</span>)<br>    <br>    <span class="hljs-comment"># 2. 验证 (比如找一下页面上有没有“历史记录”这个按钮)</span><br>    <span class="hljs-comment"># 注意：如果你没登录，可能看到的是“点击登录”</span><br>    <span class="hljs-keyword">try</span>:<br>        driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;//*[@text=&#x27;历史记录&#x27; or @text=&#x27;点击登录&#x27;]&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 已切换到个人中心&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;❌ 切换失败&quot;</span>)<br>        <br>    <span class="hljs-comment"># 3. 切回首页</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;点击 &#x27;首页&#x27;...&quot;</span>)<br>    home_tab = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;//*[@text=&#x27;首页&#x27;]&quot;</span>)<br>    home_tab.click()<br>    time.sleep(<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 已回到首页&quot;</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;出错: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="⚠️-高级预警：WebView-H5-——-真正的“切窗口”"><a href="#⚠️-高级预警：WebView-H5-——-真正的“切窗口”" class="headerlink" title="⚠️ 高级预警：WebView (H5) —— 真正的“切窗口”"></a>⚠️ 高级预警：WebView (H5) —— 真正的“切窗口”</h3><p>在 App 里，如果嵌入了一个网页（比如 B站的“会员购”页面，或者活动页面），那个东西叫 WebView。</p>
<ul>
<li><strong>Native (原生)</strong>：按钮、图片都是安卓控件。</li>
<li><strong>WebView (H5)</strong>：里面是 HTML 代码。</li>
</ul>
<p><strong>如果你想在 Appium 里控制 WebView 里的元素（比如点击 H5 里的链接）：</strong></p>
<ol>
<li><p>你必须像 Selenium 切换 iframe 一样，切换 <strong>Context</strong>。</p>
</li>
<li><p>代码长这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1. 获取所有上下文</span><br>contexts = driver.contexts  <span class="hljs-comment"># 返回 [&#x27;NATIVE_APP&#x27;, &#x27;WEBVIEW_com.bilibili&#x27;]</span><br><br><span class="hljs-comment"># 2. 切换到 WebView (相当于 switch_to.window/frame)</span><br>driver.switch_to.context(contexts[-<span class="hljs-number">1</span>])<br><br><span class="hljs-comment"># 3. 现在可以用 Selenium 的方式找 div/a 标签了</span><br>driver.find_element(By.CSS_SELECTOR, <span class="hljs-string">&quot;div.banner&quot;</span>).click()<br><br><span class="hljs-comment"># 4. 切回原生</span><br>driver.switch_to.context(<span class="hljs-string">&quot;NATIVE_APP&quot;</span>)<br></code></pre></td></tr></table></figure></li>
</ol>
<p>🛑 劝退警告：绝大多数市面上的 App（包括 B站 release 版），都关闭了 WebView 的调试权限。这意味着 driver.contexts 只能读到 NATIVE_APP，读不到 WEBVIEW。除非你有 B站的内部开发包，或者手机 Root 了。现阶段，把 App 当作纯 Native 应用来测（Activity 跳转 + 底部 Tab 切换），这涵盖了 95% 的工作场景。</p>
<hr>
<h2 id="三大等待"><a href="#三大等待" class="headerlink" title="三大等待"></a>三大等待</h2><p>这部分和selenium基本一样：</p>
<ol>
<li><strong>强制等待</strong>：<code>time.sleep(3)</code><ul>
<li><em>场景</em>：调试时用，或者有些顽固的动画（比如 B 站开屏广告）实在没法定位时，硬等。</li>
</ul>
</li>
<li><strong>隐式等待</strong>：<code>driver.implicitly_wait(10)</code><ul>
<li><em>场景</em>：全局兜底。脚本一上来就设好，管 ID&#x2F;XPath 找不找得到。</li>
</ul>
</li>
<li><strong>显式等待</strong> (WebDriverWait)：<strong>王牌</strong>。<ul>
<li><em>场景</em>：等元素<strong>可点击</strong>、等<strong>文字出现</strong>、等<strong>Toast 消失</strong>。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="🔥-Appium-独有的难点：Toast-消息捕获"><a href="#🔥-Appium-独有的难点：Toast-消息捕获" class="headerlink" title="🔥 Appium 独有的难点：Toast 消息捕获"></a>🔥 Appium 独有的难点：Toast 消息捕获</h3><ul>
<li><p>什么是 Toast？</p>
<p>就是点赞后，屏幕下方弹出的那个黑底白字小气泡：“已点赞” 或 “登录失败”。</p>
</li>
<li><p><strong>难点在哪？</strong></p>
<ol>
<li><strong>它消失得很快</strong>（通常 2-3 秒），手慢无。</li>
<li><strong>它不属于 App 的页面结构</strong>，而是属于 <strong>安卓系统</strong> 的。用普通的 Inspector 截图很难截到它（因为它一闪而过）。</li>
</ol>
</li>
</ul>
<h4 id="🛠️-怎么抓-Toast？"><a href="#🛠️-怎么抓-Toast？" class="headerlink" title="🛠️ 怎么抓 Toast？"></a>🛠️ 怎么抓 Toast？</h4><p>虽然很难截到，但它的 <strong>XPath</strong> 是固定的！(标准安卓 Toast)</p>
<ul>
<li><p><strong>万能 XPath</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 记住这个类名，这是安卓系统级的 Toast 控件</span><br>toast_xpath = <span class="hljs-string">&quot;//android.widget.Toast&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>必须使用显式等待：</p>
<p>因为 Toast 可能是第 0.5 秒出现，第 2 秒消失。如果不用显式等待去“守株待兔”，很难抓到。</p>
</li>
</ul>
<hr>
<h3 id="💻-实战任务：B站“点赞-取消点赞”的-Toast-捕获"><a href="#💻-实战任务：B站“点赞-取消点赞”的-Toast-捕获" class="headerlink" title="💻 实战任务：B站“点赞&#x2F;取消点赞”的 Toast 捕获"></a>💻 实战任务：B站“点赞&#x2F;取消点赞”的 Toast 捕获</h3><p>我们要验证：点击视频的点赞按钮后，是否弹出了“点赞成功”或“取消点赞”的提示。</p>
<p><strong>脚本逻辑：</strong></p>
<ol>
<li>搜 BV 号进视频（用之前的代码）。</li>
<li>点击视频画面（唤起控制条）。</li>
<li>点击“点赞”图标。</li>
<li><strong>【关键】使用显式等待捕获包含“点赞”字样的 Toast</strong>。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> appium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> appium.webdriver.common.appiumby <span class="hljs-keyword">import</span> AppiumBy<br><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait<br><span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># --- 配置参数 ---</span><br>desired_caps = &#123;<br>    <span class="hljs-string">&#x27;platformName&#x27;</span>: <span class="hljs-string">&#x27;Android&#x27;</span>,<br>    <span class="hljs-string">&#x27;platformVersion&#x27;</span>: <span class="hljs-string">&#x27;13&#x27;</span>,<br>    <span class="hljs-string">&#x27;deviceName&#x27;</span>: <span class="hljs-string">&#x27;V4YHB6XS6DSSQ89L&#x27;</span>,<br>    <span class="hljs-string">&#x27;appPackage&#x27;</span>: <span class="hljs-string">&#x27;tv.danmaku.bili&#x27;</span>,<br>    <span class="hljs-string">&#x27;appActivity&#x27;</span>: <span class="hljs-string">&#x27;.MainActivityV2&#x27;</span>,<br>    <span class="hljs-string">&#x27;automationName&#x27;</span>: <span class="hljs-string">&#x27;UiAutomator2&#x27;</span>,<br>    <span class="hljs-comment"># 关键参数：不重置应用（保留你的登录状态，避免每次都弹隐私协议）</span><br>    <span class="hljs-string">&#x27;noReset&#x27;</span>: <span class="hljs-literal">True</span><br>&#125;<br><br>driver = <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在连接 Appium...&quot;</span>)<br>    driver = webdriver.Remote(<span class="hljs-string">&#x27;http://127.0.0.1:4723&#x27;</span>, desired_caps)<br><br>    bv_id = <span class="hljs-string">&quot;BV1Qm2DBLEYk&quot;</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;强制唤醒 B站...&quot;</span>)<br>    driver.activate_app(<span class="hljs-string">&quot;tv.danmaku.bili&quot;</span>)<br>    <span class="hljs-comment"># 设置全局隐式等待 10秒（给B站启动一点缓冲时间）</span><br>    driver.implicitly_wait(<span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;B站启动成功！&quot;</span>)<br><br>    time.sleep(<span class="hljs-number">5</span>)<br><br>    <span class="hljs-comment"># --- 1. 处理“青少年模式”弹窗 (B站特有) ---</span><br>    <span class="hljs-comment"># 这是一个“可能出现，也可能不出现”的弹窗，所以我们要用 try-except</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;检查是否有青少年模式弹窗...&quot;</span>)<br>        <span class="hljs-comment"># 这里需要你填入你在 Inspector 里抓到的“我知道了”按钮的 ID</span><br>        <span class="hljs-comment"># B站通常的 ID 可能是 text_view 或者 close_button，下面是示例 ID，你需要替换！</span><br>        teenager_btn = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/text_ok&quot;</span>)<br>        teenager_btn.click()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;已关闭青少年模式弹窗&quot;</span>)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;未检测到弹窗，继续执行...&quot;</span>)<br><br>    <span class="hljs-comment"># --- 2. 点击首页顶部的“搜索框” ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在寻找搜索框...&quot;</span>)<br>    <span class="hljs-comment"># 这里的 ID 是 B站首页顶部搜索框的典型 ID (expand_search)</span><br>    <span class="hljs-comment"># 如果报错，请用 Inspector 确认一下是不是这个</span><br>    search_box = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/search_text&quot;</span>)<br><br>    search_box.click()<br><br>    <span class="hljs-comment"># --- 3. 输入关键字 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;进入搜索页，输入关键字...&quot;</span>)<br>    <span class="hljs-comment"># 点击搜索框后，会跳转到一个新页面，这里有一个真正的输入框</span><br>    <span class="hljs-comment"># 这里的 ID 通常是 search_src_text</span><br>    <span class="hljs-comment"># input_field = driver.find_element(AppiumBy.ID, &quot;tv.danmaku.bili:id/search_src_text&quot;)</span><br>    input_field = driver.find_element(AppiumBy.ACCESSIBILITY_ID, <span class="hljs-string">&quot;搜索查询&quot;</span>)<br>    input_field.send_keys(bv_id)<br><br>    <span class="hljs-comment"># --- 4. 点击“搜索”按钮 ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;点击搜索按钮...&quot;</span>)<br>    <span class="hljs-comment"># 这是一个 text 属性为“搜索”的 TextView</span><br>    search_btn = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&#x27;//android.widget.TextView[@resource-id=&quot;tv.danmaku.bili:id/action_search&quot;]&#x27;</span>)<br>    search_btn.click()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;✅ 搜索动作完成！请看手机屏幕效果&quot;</span>)<br><br>    <span class="hljs-comment"># 停留一会让你看结果</span><br>    time.sleep(<span class="hljs-number">5</span>)<br><br>    <span class="hljs-comment"># 2. 点击点赞 (难点：B站的点赞按钮 ID)</span><br>    <span class="hljs-comment"># B站播放页结构很复杂，点赞通常叫 &quot;love&quot; 或 &quot;like&quot;</span><br>    <span class="hljs-comment"># 我们先暂停一下视频，防止干扰</span><br>    time.sleep(<span class="hljs-number">5</span>)  <span class="hljs-comment"># 等广告过</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;尝试点击点赞...&quot;</span>)<br>    <span class="hljs-comment"># 注意：B站的点赞按钮 id 经常是 tv.danmaku.bili:id/recommend_icon 或者是类似的</span><br>    <span class="hljs-comment"># 如果你找不到 ID，可以用 xpath 找那个“大拇指”图标</span><br>    <span class="hljs-comment"># 点赞按钮 ID 通常是 tv.danmaku.bili:id/follow</span><br>    follow_btn = driver.find_element(AppiumBy.ID, <span class="hljs-string">&quot;tv.danmaku.bili:id/frame_like&quot;</span>)<br>    follow_btn.click()<br><br>    <span class="hljs-comment"># --- 🔥 核心：捕获 Toast (显式等待) ---</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在等待 Toast 出现...&quot;</span>)<br><br>    <span class="hljs-comment"># 写法：等待 text 包含 &quot;关注&quot; 的 Toast 元素出现</span><br>    <span class="hljs-comment"># 注意：presence_of_element_located 是判断元素在不在 DOM 里，这对 Toast 最有效</span><br>    toast_element = WebDriverWait(driver, <span class="hljs-number">5</span>, poll_frequency=<span class="hljs-number">0.1</span>).until(<br>        EC.presence_of_element_located((AppiumBy.XPATH, <span class="hljs-string">&quot;//android.widget.Toast[contains(@text, &#x27;点赞&#x27;)]&quot;</span>))<br>    )<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;✅ 成功捕获 Toast 内容: <span class="hljs-subst">&#123;toast_element.text&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 出错了: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">finally</span>:<br>    <span class="hljs-keyword">if</span> driver:<br>        driver.quit()<br></code></pre></td></tr></table></figure>

<hr>
<p>特别注意：现在的 App越来越花哨，很多提示不再使用安卓原生的 Toast (android.widget.Toast)，而是开发自己画的一个 TextView 飘在上面。</p>
<ul>
<li><strong>怎么分辨？</strong><ul>
<li><strong>原生 Toast</strong>：不能被点击，Inspector 很难选中。</li>
<li><strong>伪造 Toast (自定义 View)</strong>：Inspector 能选中，它就是一个普通的 TextView。</li>
</ul>
</li>
</ul>
<p>如果上面的代码抓不到，说明用的是自定义 View。需要把 XPath 改成普通的文本查找：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 针对自定义 UI 的 Toast</span><br>xpath = <span class="hljs-string">&quot;//*[contains(@text, &#x27;关注成功&#x27;)]&quot;</span> <br>WebDriverWait(driver, <span class="hljs-number">5</span>).until(EC.visibility_of_element_located((AppiumBy.XPATH, xpath)))<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="5-手势操作"><a href="#5-手势操作" class="headerlink" title="5.手势操作"></a>5.手势操作</h2><p>在 Appium 里，我们依然使用 ActionChains，但底层的逻辑从“鼠标”变成了 “手指 (Touch)”。Appium 现在全面拥抱 <strong>W3C Actions</strong> 标准。这意味着可以像剪辑视频一样，一帧一帧地“编排”手指动作。</p>
<p>看两个 B 站的高频场景：</p>
<ol>
<li><strong>长按 (Long Press)</strong>：长按视频封面，弹出“不感兴趣&#x2F;稍后再看”菜单。</li>
<li><strong>精准拖拽 (Drag &amp; Drop)</strong>：在这个视频上发弹幕，或者拖动进度条。</li>
</ol>
<hr>
<h3 id="👆-核心武器：ActionChains"><a href="#👆-核心武器：ActionChains" class="headerlink" title="👆 核心武器：ActionChains"></a>👆 核心武器：ActionChains</h3><p>需要引入这个老朋友：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium.webdriver.common.action_chains <span class="hljs-keyword">import</span> ActionChains<br><span class="hljs-keyword">from</span> selenium.webdriver.common.actions.action_builder <span class="hljs-keyword">import</span> ActionBuilder<br><span class="hljs-keyword">from</span> selenium.webdriver.common.actions.pointer_input <span class="hljs-keyword">import</span> PointerInput<br><span class="hljs-keyword">from</span> selenium.webdriver.common.actions <span class="hljs-keyword">import</span> interaction<br></code></pre></td></tr></table></figure>

<p><em>(其实通常只引入 <code>ActionChains</code> 就够用了，Appium 封装好了)</em></p>
<hr>
<h3 id="场景一：长按-Long-Press-——-呼出菜单"><a href="#场景一：长按-Long-Press-——-呼出菜单" class="headerlink" title="场景一：长按 (Long Press) —— 呼出菜单"></a>场景一：长按 (Long Press) —— 呼出菜单</h3><p>在 B 站首页或搜索列表，<strong>长按</strong>一个视频封面，通常会弹出一个预览窗口或者快捷菜单。</p>
<p><strong>动作分解</strong>：</p>
<ol>
<li>移动到元素中心。</li>
<li>按下 (click_and_hold)。</li>
<li><strong>停顿 (pause)</strong> —— 关键！不停顿就是普通点击。</li>
<li>松开 (release)。</li>
<li>执行 (perform)。</li>
</ol>
<h4 id="💻-代码实战-1"><a href="#💻-代码实战-1" class="headerlink" title="💻 代码实战"></a>💻 代码实战</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ... (前置代码：启动 B 站，进入搜索结果页) ...</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;准备测试长按手势...&quot;</span>)<br>    <br>    <span class="hljs-comment"># 1. 定位目标元素 (找列表里的第一个视频封面或标题)</span><br>    <span class="hljs-comment"># B站的视频容器 ID 通常包含 &#x27;card&#x27; 或 &#x27;cover&#x27;</span><br>    target_element = driver.find_element(AppiumBy.XPATH, <span class="hljs-string">&quot;(//android.widget.TextView[contains(@text, &#x27;Python&#x27;)])[2]&quot;</span>)<br>    <br>    <span class="hljs-comment"># 2. 构建动作链</span><br>    actions = ActionChains(driver)<br>    <br>    <span class="hljs-comment"># 链式写法：</span><br>    <span class="hljs-comment"># click_and_hold(元素) -&gt; pause(秒) -&gt; release()</span><br>    actions.click_and_hold(target_element)\<br>           .pause(<span class="hljs-number">2</span>)\<br>           .release()<br>           <br>    <span class="hljs-comment"># 3. 执行动作</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;执行长按...&quot;</span>)<br>    actions.perform()<br>    <br>    <span class="hljs-comment"># 4. 验证效果 (长按后通常会震动，或者弹窗)</span><br>    time.sleep(<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;长按结束，请看手机屏幕是否有变化&quot;</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 长按失败: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="场景二：精准拖拽-Drag-Scroll-——-下拉刷新"><a href="#场景二：精准拖拽-Drag-Scroll-——-下拉刷新" class="headerlink" title="场景二：精准拖拽 (Drag &#x2F; Scroll) —— 下拉刷新"></a>场景二：精准拖拽 (Drag &#x2F; Scroll) —— 下拉刷新</h3><p>虽然我们之前学过 <code>driver.swipe</code>，但 <code>ActionChains</code> 能做更细腻的**“慢速滑动”**（比如下拉刷新，滑太快可能触发不了）。</p>
<p><strong>动作分解</strong>：</p>
<ol>
<li>手指按下 (比如屏幕中间 <code>x=500, y=500</code>)。</li>
<li>移动手指 (移动到 <code>x=500, y=1500</code>)。</li>
<li>松开。</li>
</ol>
<h4 id="💻-代码实战：首页下拉刷新"><a href="#💻-代码实战：首页下拉刷新" class="headerlink" title="💻 代码实战：首页下拉刷新"></a>💻 代码实战：首页下拉刷新</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ... (在 B 站首页) ...</span><br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;准备测试下拉刷新...&quot;</span>)<br>    <br>    <span class="hljs-comment"># 获取屏幕尺寸，为了通用性</span><br>    size = driver.get_window_size()<br>    w = size[<span class="hljs-string">&#x27;width&#x27;</span>]<br>    h = size[<span class="hljs-string">&#x27;height&#x27;</span>]<br>    <br>    <span class="hljs-comment"># 起点：屏幕上方 20% 处</span><br>    start_x = w * <span class="hljs-number">0.5</span><br>    start_y = h * <span class="hljs-number">0.2</span><br>    <br>    <span class="hljs-comment"># 终点：屏幕下方 80% 处</span><br>    end_x = w * <span class="hljs-number">0.5</span><br>    end_y = h * <span class="hljs-number">0.8</span><br>    <br>    <span class="hljs-comment"># 构建动作</span><br>    actions = ActionChains(driver)<br>    <br>    <span class="hljs-comment"># pointer_action 是更底层的写法，click_and_hold 默认是点元素</span><br>    <span class="hljs-comment"># 如果要按“坐标”点，建议用 w3c_actions 的写法，或者如下技巧：</span><br>    <br>    <span class="hljs-comment"># --- 技巧：使用 move_to_location 移动到坐标 ---</span><br>    actions.w3c_actions.pointer_action.move_to_location(start_x, start_y)<br>    actions.w3c_actions.pointer_action.pointer_down() <span class="hljs-comment"># 按下</span><br>    actions.w3c_actions.pointer_action.pause(<span class="hljs-number">0.5</span>) <span class="hljs-comment"># 稍微停顿</span><br>    actions.w3c_actions.pointer_action.move_to_location(end_x, end_y) <span class="hljs-comment"># 拖到下面</span><br>    actions.w3c_actions.pointer_action.pause(<span class="hljs-number">0.5</span>) <span class="hljs-comment"># 停顿看效果</span><br>    actions.w3c_actions.pointer_action.pointer_up() <span class="hljs-comment"># 松开</span><br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;执行下拉...&quot;</span>)<br>    actions.perform()<br>    <br>    <span class="hljs-comment"># 验证：下拉后通常会出现“正在刷新”的 loading 图标</span><br>    time.sleep(<span class="hljs-number">3</span>)<br><br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;❌ 下拉失败: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<hr>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Testing/" class="category-chain-item">Testing</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/APP%E6%B5%8B%E8%AF%95%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80/" class="print-no-link">#APP测试理论基础</a>
      
        <a href="/tags/python/" class="print-no-link">#python</a>
      
        <a href="/tags/Appium/" class="print-no-link">#Appium</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>APP测试</div>
      <div>https://lilpear2002.github.io/2025/12/13/APP测试/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>测开求职者</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年12月13日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/12/14/Pytest%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" title="Pytest基础学习">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Pytest基础学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/12/13/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B0%8F%E6%A1%88%E4%BE%8B/" title="软件测试基础功能测试小案例">
                        <span class="hidden-mobile">软件测试基础功能测试小案例</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
