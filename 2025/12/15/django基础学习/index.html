

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="æµ‹å¼€æ±‚èŒè€…">
  <meta name="keywords" content="">
  
    <meta name="description" content="Django æ˜¯ä¸€ä¸ªç”¨äºæ„å»º Web åº”ç”¨ç¨‹åºçš„ Python Web æ¡†æ¶">
<meta property="og:type" content="article">
<meta property="og:title" content="djangoåŸºç¡€å­¦ä¹ ">
<meta property="og:url" content="https://lilpear2002.github.io/2025/12/15/django%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="æµ‹å¼€å­¦ä¹ ä¹‹è·¯">
<meta property="og:description" content="Django æ˜¯ä¸€ä¸ªç”¨äºæ„å»º Web åº”ç”¨ç¨‹åºçš„ Python Web æ¡†æ¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lilpear2002.github.io/img/django.jpg">
<meta property="article:published_time" content="2025-12-15T03:06:57.000Z">
<meta property="article:modified_time" content="2025-12-17T06:56:49.530Z">
<meta property="article:author" content="æµ‹å¼€æ±‚èŒè€…">
<meta property="article:tag" content="Django">
<meta property="article:tag" content="ORM">
<meta property="article:tag" content="python">
<meta property="article:tag" content="æ¨¡ç‰ˆ">
<meta property="article:tag" content="è·¯ç”±">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://lilpear2002.github.io/img/django.jpg">
  
  
  
  <title>djangoåŸºç¡€å­¦ä¹  - æµ‹å¼€å­¦ä¹ ä¹‹è·¯</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"lilpear2002.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Java/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>JavaåŸºç¡€</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Python/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>PythonåŸºç¡€</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Testing/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>æµ‹è¯•åŸºç¡€</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E7%AE%97%E6%B3%95/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>leetcode</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>æ•°æ®åº“</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/Java%E9%A1%B9%E7%9B%AE/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>Javaé¡¹ç›®</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E6%B5%8B%E5%BC%80%E9%A1%B9%E7%9B%AE/" target="_self">
                <i class="iconfont icon-bookmark-fill"></i>
                <span>æµ‹å¼€é¡¹ç›®</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E5%8E%86/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>ç§‘ç ”ç»å†</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/LLM/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>å¤§æ¨¡å‹</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="djangoåŸºç¡€å­¦ä¹ "></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-12-15 11:06" pubdate>
          2025å¹´12æœˆ15æ—¥ ä¸Šåˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          12k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          102 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">djangoåŸºç¡€å­¦ä¹ </h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Djangoå…¥é—¨"><a href="#Djangoå…¥é—¨" class="headerlink" title="Djangoå…¥é—¨"></a>Djangoå…¥é—¨</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>Django æ˜¯ä¸€ä¸ªç”± Python ç¼–å†™çš„ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ Web åº”ç”¨æ¡†æ¶ï¼Œå…¶æä¾›äº†å…¨æ ˆå¼€å‘æ‰€éœ€çš„å·¥å…·ï¼ŒåŒ…æ‹¬æ•°æ®åº“ ORMã€æ¨¡æ¿å¼•æ“ã€è·¯ç”±ç³»ç»Ÿã€ç”¨æˆ·è®¤è¯ç­‰ï¼Œå¤§å¹…å‡å°‘é‡å¤ä»£ç ã€‚Django éµå¾ª MVCï¼ˆModel-View-Controllerï¼‰æ¶æ„ï¼Œä½†åœ¨ Django ä¸­æ›´å¸¸è¢«ç§°ä¸º MTVï¼ˆModel-Template-Viewï¼‰</p>
<img src="/2025/12/15/django%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image1.png" srcset="/img/loading.gif" lazyload class="" title="MVT">

<h3 id="MVC-Model-View-Controller"><a href="#MVC-Model-View-Controller" class="headerlink" title="MVC (Model-View-Controller)"></a>MVC (Model-View-Controller)</h3><ul>
<li><strong>Model (æ¨¡å‹)</strong>ï¼šå¤„ç†ä¸æ•°æ®åº“çš„äº¤äº’ï¼Œå®šä¹‰æ•°æ®çš„ç»“æ„å’Œä¸šåŠ¡é€»è¾‘ã€‚</li>
<li><strong>View (è§†å›¾)</strong>ï¼šè´Ÿè´£æ•°æ®å±•ç¤ºï¼Œç”Ÿæˆç”¨æˆ·çœ‹åˆ°çš„ HTML é¡µé¢ã€‚</li>
<li><strong>Controller (æ§åˆ¶å™¨)</strong>ï¼šæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œè°ƒç”¨ Model å¤„ç†æ•°æ®ï¼Œå¹¶å°†ç»“æœä¼ é€’ç»™ View æ¸²æŸ“é¡µé¢ã€‚</li>
</ul>
<p><strong>æµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·å‘é€è¯·æ±‚åˆ° Controllerã€‚</li>
<li>Controller å¤„ç†é€»è¾‘ï¼Œè°ƒç”¨ Model è·å–æ•°æ®ã€‚</li>
<li>Controller å°†æ•°æ®ä¼ é€’ç»™ Viewã€‚</li>
<li>View æ¸²æŸ“å¹¶è¿”å› HTML é¡µé¢ç»™ç”¨æˆ·ã€‚</li>
</ol>
<h3 id="MVT-Model-Template-View-â€”â€”-Django-çš„å®ç°æ–¹å¼"><a href="#MVT-Model-Template-View-â€”â€”-Django-çš„å®ç°æ–¹å¼" class="headerlink" title="MVT (Model-Template-View) â€”â€” Django çš„å®ç°æ–¹å¼"></a>MVT (Model-Template-View) â€”â€” Django çš„å®ç°æ–¹å¼</h3><p>Django ä¸­é‡‡ç”¨äº† <strong>MVT</strong> è®¾è®¡æ¨¡å¼ï¼Œç±»ä¼¼äº MVCï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ï¼š</p>
<ul>
<li><strong>Model (æ¨¡å‹)</strong>ï¼šä¸æ•°æ®åº“äº¤äº’ï¼Œå¤„ç†æ•°æ®çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ã€‚</li>
<li><strong>Template (æ¨¡æ¿)</strong>ï¼šè´Ÿè´£é¡µé¢æ¸²æŸ“ï¼Œç”Ÿæˆæœ€ç»ˆçš„ HTML å†…å®¹ã€‚</li>
<li><strong>View (è§†å›¾)</strong>ï¼šDjango çš„ View æ›´åå‘äºæ§åˆ¶å™¨çš„è§’è‰²ï¼Œæ¥æ”¶è¯·æ±‚å¹¶å†³å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿å’Œæ•°æ®ã€‚</li>
</ul>
<p><strong>æµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·è®¿é—® URLï¼Œè¯·æ±‚è¢« Django çš„ <code>urls.py</code> æ˜ å°„åˆ°ç›¸åº”çš„ Viewã€‚</li>
<li>View å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨ Model è·å–æ•°æ®ã€‚</li>
<li>View å°†æ•°æ®ä¼ é€’ç»™ Templateã€‚</li>
<li>Template æ¸²æŸ“ HTMLï¼Œæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·ã€‚</li>
</ol>
<h2 id="å†…ç½®åŠŸèƒ½"><a href="#å†…ç½®åŠŸèƒ½" class="headerlink" title="å†…ç½®åŠŸèƒ½"></a>å†…ç½®åŠŸèƒ½</h2><table>
<thead>
<tr>
<th align="left">åŠŸèƒ½</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Admin åå°</strong></td>
<td align="left">è‡ªåŠ¨ç”Ÿæˆç®¡ç†ç•Œé¢ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ CRUD é€»è¾‘ã€‚</td>
</tr>
<tr>
<td align="left"><strong>ORM</strong></td>
<td align="left">ç”¨ Python ç±»æ“ä½œæ•°æ®åº“ï¼Œæ— éœ€å†™ SQLã€‚</td>
</tr>
<tr>
<td align="left"><strong>è¡¨å•å¤„ç†</strong></td>
<td align="left">å†…ç½®è¡¨å•éªŒè¯ï¼Œé˜²æ­¢ CSRF æ”»å‡»ã€‚</td>
</tr>
<tr>
<td align="left"><strong>ç”¨æˆ·è®¤è¯</strong></td>
<td align="left">æä¾›ç™»å½•ã€æ³¨å†Œã€æƒé™ç®¡ç†ï¼ˆ<code>django.contrib.auth</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left"><strong>è·¯ç”±ç³»ç»Ÿ</strong></td>
<td align="left">URL æ˜ å°„çµæ´»ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td align="left"><strong>ç¼“å­˜æœºåˆ¶</strong></td>
<td align="left">æ”¯æŒ Memcachedã€Redis ç­‰åç«¯ã€‚</td>
</tr>
</tbody></table>
<hr>
<h2 id="æ ¸å¿ƒç‰¹ç‚¹"><a href="#æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="æ ¸å¿ƒç‰¹ç‚¹"></a>æ ¸å¿ƒç‰¹ç‚¹</h2><ul>
<li><strong>å¿«é€Ÿå¼€å‘</strong>:Django æä¾›äº†å¤§é‡å†…ç½®åŠŸèƒ½ï¼Œå¦‚è®¤è¯ã€ç®¡ç†åå°ã€è¡¨å•å¤„ç†ç­‰ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œéåº•å±‚å®ç°ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–ç®¡ç†åå°</strong>:åªéœ€ç®€å•çš„æ¨¡å‹å®šä¹‰ï¼Œå³å¯ç”Ÿæˆå¼ºå¤§çš„åå°ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå¢åˆ æ”¹æŸ¥ã€‚</li>
<li><strong>ORM æ•°æ®åº“æ˜ å°„</strong>:Django å†…ç½® ORM (Object-Relational Mapping)ï¼Œå¯ä»¥è®©å¼€å‘è€…ä½¿ç”¨ Python ç±»ä¸æ•°æ®åº“äº¤äº’ï¼Œæ— éœ€ç¼–å†™ SQLã€‚</li>
<li><strong>å¼ºå¤§çš„ URL è·¯ç”±</strong>:ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çµæ´»å®šä¹‰ URLï¼Œè½»æ¾å®ç°é¡µé¢è·¯ç”±ã€‚</li>
<li><strong>æ¨¡æ¿å¼•æ“</strong>:å†…ç½®å¼ºå¤§çš„æ¨¡æ¿ç³»ç»Ÿï¼Œæ”¯æŒé€»è¾‘åˆ¤æ–­ã€å¾ªç¯å¤„ç†ï¼Œæ–¹ä¾¿æ¸²æŸ“ HTML é¡µé¢ã€‚</li>
<li><strong>å›½é™…åŒ–æ”¯æŒ</strong>:Django æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–ï¼Œéå¸¸é€‚åˆå…¨çƒåŒ–åº”ç”¨ã€‚</li>
<li><strong>é«˜å®‰å…¨æ€§</strong>:å†…ç½®å¤šç§å®‰å…¨ä¿æŠ¤æªæ–½ï¼Œå¦‚é˜²æ­¢ SQL æ³¨å…¥ã€XSS æ”»å‡»ã€CSRF æ”»å‡»ç­‰ã€‚</li>
<li><strong>ä¸°å¯Œçš„ç¤¾åŒºä¸æ‰©å±•</strong>:å¤§é‡å¼€æºçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ Django REST frameworkã€Django CMS ç­‰ï¼Œå¿«é€Ÿæ‰©å±•åŠŸèƒ½ã€‚</li>
<li><strong>FastAPI</strong>: é€šå¸¸ç”¨è£…é¥°å™¨ <code>@app.get(&quot;/items&quot;)</code> ç›´æ¥åœ¨å‡½æ•°å¤´ä¸Šå®šä¹‰è·¯ç”±ã€‚</li>
<li><strong>Django</strong>: è·¯ç”±ï¼ˆurls.pyï¼‰å’Œé€»è¾‘ï¼ˆviews.pyï¼‰æ˜¯åˆ†ç¦»çš„ã€‚è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­ç®¡ç†å‡ ç™¾ä¸ªæ¥å£æ—¶ä¼šæ›´æ¸…æ™°ï¼Œä½†å†™èµ·æ¥ç¨å¾®ç¹çä¸€ç‚¹ã€‚</li>
</ul>
<hr>
<h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><h3 id="ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒæ­å»º"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒæ­å»º" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒæ­å»º"></a>ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒæ­å»º</h3><p><strong>ç›®æ ‡</strong>ï¼šè·‘é€šç¬¬ä¸€ä¸ª Django é¡¹ç›®ï¼Œç†è§£ç›®å½•ç»“æ„ã€‚</p>
<h4 id="1-å®‰è£…-Django"><a href="#1-å®‰è£…-Django" class="headerlink" title="1. å®‰è£… Django"></a>1. å®‰è£… Django</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install django<br></code></pre></td></tr></table></figure>

<h4 id="2-åˆ›å»ºé¡¹ç›®-Project"><a href="#2-åˆ›å»ºé¡¹ç›®-Project" class="headerlink" title="2. åˆ›å»ºé¡¹ç›® (Project)"></a>2. åˆ›å»ºé¡¹ç›® (Project)</h4><p>Django çš„å±‚çº§æ˜¯ï¼šä¸€ä¸ªé¡¹ç›® (Project) åŒ…å«å¤šä¸ªåº”ç”¨ (App)ã€‚å…ˆåœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º TestPlatform çš„é¡¹ç›®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">django-admin startproject startdjango<br><span class="hljs-built_in">cd</span> startdjango<br></code></pre></td></tr></table></figure>

<h4 id="3-è®¤è¯†ç›®å½•ç»“æ„"><a href="#3-è®¤è¯†ç›®å½•ç»“æ„" class="headerlink" title="3. è®¤è¯†ç›®å½•ç»“æ„"></a>3. è®¤è¯†ç›®å½•ç»“æ„</h4><ul>
<li><code>manage.py</code>: é¡¹ç›®çš„ç®¡ç†è„šæœ¬ï¼Œä»¥åä¼šç»å¸¸ç”¨å®ƒæ¥è¿è¡ŒæœåŠ¡ã€åˆ›å»ºæ•°æ®åº“è¡¨ï¼ˆè¿ç§»ï¼‰ç­‰ã€‚</li>
<li><code>startdjango/</code> :<ul>
<li><code>settings.py</code>: <strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong>ã€‚æ•°æ®åº“é…ç½®ã€æ³¨å†Œ Appã€ä¸­é—´ä»¶éƒ½åœ¨è¿™ã€‚ï¼ˆé—®ï¼šå¦‚ä½•é…ç½®å¤šç¯å¢ƒï¼Ÿï¼‰</li>
<li><code>urls.py</code>: <strong>è·¯ç”±å…¥å£</strong>ã€‚ç›¸å½“äºâ€œæ€»å°â€ï¼Œå†³å®šå“ªä¸ª URL ç”±å“ªä¸ªå‡½æ•°å¤„ç†ã€‚</li>
<li><code>wsgi.py</code> &#x2F; <code>asgi.py</code>: éƒ¨ç½²ä¸Šçº¿æ—¶ç”¨çš„æ¥å£æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<h4 id="4-å¯åŠ¨æœåŠ¡"><a href="#4-å¯åŠ¨æœåŠ¡" class="headerlink" title="4. å¯åŠ¨æœåŠ¡"></a>4. å¯åŠ¨æœåŠ¡</h4><p>åœ¨ <code>startdjango</code> æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> runserver<br></code></pre></td></tr></table></figure>

<p>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:8000/</code>ã€‚çœ‹åˆ°ä¸€æ”¯å°ç«ç®­ğŸš€å°±æ˜¯è·‘é€šäº†ï¼</p>
<hr>
<h3 id="ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºç¬¬ä¸€ä¸ª-App-ä¸-è§†å›¾"><a href="#ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºç¬¬ä¸€ä¸ª-App-ä¸-è§†å›¾" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºç¬¬ä¸€ä¸ª App ä¸ è§†å›¾"></a>ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºç¬¬ä¸€ä¸ª App ä¸ è§†å›¾</h3><p><strong>ç›®æ ‡</strong>ï¼šç†è§£ Django çš„ MVT (Model-View-Template) æ¨¡å¼ä¸­çš„ V (View) å’Œ URL æ˜ å°„ã€‚Django æå€¡å°†åŠŸèƒ½æ¨¡å—åŒ–ã€‚æ¯”å¦‚åˆ›å»ºä¸€ä¸ª <code>book</code> çš„appã€‚</p>
<h4 id="1-åˆ›å»º-App"><a href="#1-åˆ›å»º-App" class="headerlink" title="1. åˆ›å»º App"></a>1. åˆ›å»º App</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python manage.py startapp book<br></code></pre></td></tr></table></figure>

<p>ä¼šå‘ç°å¤šäº†ä¸€ä¸ª book æ–‡ä»¶å¤¹ã€‚</p>
<p>é‡è¦æ­¥éª¤ï¼šå» startdjango&#x2F;settings.pyï¼Œæ‰¾åˆ° INSTALLED_APPS åˆ—è¡¨ï¼ŒæŠŠ â€˜bookâ€™, åŠ è¿›å»ã€‚å¦‚æœä¸åŠ ï¼ŒDjango æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ª App çš„å­˜åœ¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># TestPlatform/settings.py</span><br>INSTALLED_APPS = [<br>    ...<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;book&#x27;</span>, <span class="hljs-comment"># æ–°å¢è¿™ä¸€è¡Œ</span><br>]<br></code></pre></td></tr></table></figure>

<h4 id="2-å†™ä¸€ä¸ªç®€å•çš„è§†å›¾-View"><a href="#2-å†™ä¸€ä¸ªç®€å•çš„è§†å›¾-View" class="headerlink" title="2. å†™ä¸€ä¸ªç®€å•çš„è§†å›¾ (View)"></a>2. å†™ä¸€ä¸ªç®€å•çš„è§†å›¾ (View)</h4><p>è§†å›¾å‡½æ•°è´Ÿè´£å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚æ‰“å¼€ book&#x2F;views.pyï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br><br><span class="hljs-comment"># æŸ¥è¯¢å‚æ•° ç¤ºä¾‹:  /book?id=5</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">book_detail_query_string</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># request.GET è·å–æŸ¥è¯¢å‚æ•°çš„å­—å…¸ &#123;&#x27;id&#x27;: &#x27;5&#x27;&#125;</span><br>    book_id = request.GET.get(<span class="hljs-string">&quot;id&quot;</span>)<br>    book_name = request.GET.get(<span class="hljs-string">&quot;name&quot;</span>)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">f&quot;ä½ è¦æŸ¥æ‰¾çš„å›¾ä¹¦æ˜¯: <span class="hljs-subst">&#123;book_id&#125;</span>, å›¾ä¹¦åç§°æ˜¯: <span class="hljs-subst">&#123;book_name&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="3-é…ç½®-URL-è·¯ç”±"><a href="#3-é…ç½®-URL-è·¯ç”±" class="headerlink" title="3. é…ç½® URL è·¯ç”±"></a>3. é…ç½® URL è·¯ç”±</h4><p>æˆ‘ä»¬éœ€è¦å‘Šè¯‰ Djangoï¼Œè®¿é—®ä»€ä¹ˆç½‘å€æ—¶è§¦å‘ä¸Šé¢è¿™ä¸ªå‡½æ•°ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šåœ¨ <code>book</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>urls.py</code>ï¼ˆé»˜è®¤æ²¡æœ‰ï¼Œéœ€æ‰‹åŠ¨å»ºï¼‰ï¼Œå†™å…¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># case_manager/urls.py</span><br><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    <span class="hljs-comment"># è®¿é—® /book/ æ—¶ï¼Œè°ƒç”¨ views.index</span><br>    path(<span class="hljs-string">&quot;&quot;</span>, views.book_detail_query_string, name=<span class="hljs-string">&quot;book_detail_query_string&quot;</span>), <br>]<br></code></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒæ­¥</strong>ï¼šå°† App çš„è·¯ç”±æ³¨å†Œåˆ°é¡¹ç›®æ€»è·¯ç”± <code>startdjango/urls.py</code> ä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<br><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, include <span class="hljs-comment"># è®°å¾—å¯¼å…¥ include</span><br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, admin.site.urls),<br>    <span class="hljs-comment"># åªè¦æ˜¯ book/ å¼€å¤´çš„è·¯å¾„ï¼Œéƒ½åˆ†å‘ç»™ book å»å¤„ç†</span><br>    path(<span class="hljs-string">&#x27;book/&#x27;</span>, include(<span class="hljs-string">&#x27;case_manager.urls&#x27;</span>)), <br>]<br></code></pre></td></tr></table></figure>

<h4 id="4-éªŒè¯"><a href="#4-éªŒè¯" class="headerlink" title="4. éªŒè¯"></a>4. éªŒè¯</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> runserver<br></code></pre></td></tr></table></figure>

<p>è®¿é—®  <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/book?id=3&name=123">http://127.0.0.1:8000/book?id=3&amp;name=123</a> ä¼šæ˜¾ç¤ºâ€œä½ è¦æŸ¥æ‰¾çš„å›¾ä¹¦æ˜¯: 3, å›¾ä¹¦åç§°æ˜¯: 123â€</p>
<hr>
<h2 id="Pathå‡½æ•°"><a href="#Pathå‡½æ•°" class="headerlink" title="Pathå‡½æ•°"></a>Pathå‡½æ•°</h2><p>åœ¨ Django ä¸­ï¼Œ<code>path()</code> å‡½æ•°ç”¨äºå®šä¹‰ URL æ¨¡å¼ã€‚</p>
<h2 id="1-åŸºæœ¬è¯­æ³•"><a href="#1-åŸºæœ¬è¯­æ³•" class="headerlink" title="1. åŸºæœ¬è¯­æ³•"></a>1. <strong>åŸºæœ¬è¯­æ³•</strong></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views<br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;route/&#x27;</span>, views.view_function, name=<span class="hljs-string">&#x27;view-name&#x27;</span>),<br>]<br></code></pre></td></tr></table></figure>

<h2 id="2-å‚æ•°è¯¦è§£"><a href="#2-å‚æ•°è¯¦è§£" class="headerlink" title="2. å‚æ•°è¯¦è§£"></a>2. <strong>å‚æ•°è¯¦è§£</strong></h2><h3 id="ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè·¯ç”±å­—ç¬¦ä¸²"><a href="#ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè·¯ç”±å­—ç¬¦ä¸²" class="headerlink" title="ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè·¯ç”±å­—ç¬¦ä¸²"></a><strong>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè·¯ç”±å­—ç¬¦ä¸²</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŒ‡å®šappå‘½åç©ºé—´</span><br>app_name = <span class="hljs-string">&quot;book&quot;</span><br><br>urlpatterns = [<br>    <span class="hljs-comment"># /book?id=5</span><br>    path(<span class="hljs-string">&quot;&quot;</span>, views.book_detail_query_string, name=<span class="hljs-string">&quot;book_detail_query_string&quot;</span>),<br>    path(<span class="hljs-string">&quot;&lt;int:book_id&gt;/&quot;</span>, views.book_datail_path, name=<span class="hljs-string">&quot;book_datail_path&quot;</span>),<br>    path(<span class="hljs-string">&quot;str/&lt;str:book_id&gt;/&quot;</span>, views.book_str, name=<span class="hljs-string">&quot;book_str&quot;</span>),<br>    path(<span class="hljs-string">&quot;slug/&lt;slug:book_id&gt;/&quot;</span>, views.book_slug, name=<span class="hljs-string">&quot;book_slug&quot;</span>),<br>    path(<span class="hljs-string">&quot;path/&lt;path:book_id&gt;/&quot;</span>, views.book_path, name=<span class="hljs-string">&quot;book_path&quot;</span>),<br>]<br></code></pre></td></tr></table></figure>

<h3 id="ç¬¬äºŒä¸ªå‚æ•°ï¼šè§†å›¾"><a href="#ç¬¬äºŒä¸ªå‚æ•°ï¼šè§†å›¾" class="headerlink" title="ç¬¬äºŒä¸ªå‚æ•°ï¼šè§†å›¾"></a><strong>ç¬¬äºŒä¸ªå‚æ•°ï¼šè§†å›¾</strong></h3><p>å¯ä»¥ä¸ºä¸€ä¸ªè§†å›¾å‡½æ•°æˆ–è€…æ˜¯ç±»è§†å›¾.as_view()æˆ–è€…æ˜¯django.urls.include()å‡½æ•° çš„è¿”å›å€¼</p>
<h3 id="ç¬¬ä¸‰ä¸ªå‚æ•°ï¼škwargsï¼ˆå¯é€‰ï¼‰"><a href="#ç¬¬ä¸‰ä¸ªå‚æ•°ï¼škwargsï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ç¬¬ä¸‰ä¸ªå‚æ•°ï¼škwargsï¼ˆå¯é€‰ï¼‰"></a><strong>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼škwargsï¼ˆå¯é€‰ï¼‰</strong></h3><p>å‘è§†å›¾ä¼ é€’é¢å¤–çš„å‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">path(<span class="hljs-string">&#x27;about/&#x27;</span>, views.about, &#123;<span class="hljs-string">&#x27;template_name&#x27;</span>: <span class="hljs-string">&#x27;custom_about.html&#x27;</span>&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="ç¬¬å››ä¸ªå‚æ•°ï¼šnameï¼ˆå¯é€‰ï¼‰"><a href="#ç¬¬å››ä¸ªå‚æ•°ï¼šnameï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ç¬¬å››ä¸ªå‚æ•°ï¼šnameï¼ˆå¯é€‰ï¼‰"></a><strong>ç¬¬å››ä¸ªå‚æ•°ï¼šnameï¼ˆå¯é€‰ï¼‰</strong></h3><p>è¿™ä¸ªå‚æ•°æ˜¯ç»™è¿™ä¸ªurlå–ä¸ªåå­—çš„ï¼Œè¿™åœ¨é¡¹ç›®æ¯”è¾ƒå¤§ï¼Œurlæ¯”è¾ƒå¤šçš„æ—¶å€™ç”¨å¤„å¾ˆå¤§ã€‚å¯¹URL å‘½åï¼Œç”¨äºåå‘è§£æï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">path(<span class="hljs-string">&#x27;articles/&lt;int:id&gt;/&#x27;</span>, views.article_detail, name=<span class="hljs-string">&#x27;article-detail&#x27;</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&#123;% url &#x27;article-detail&#x27; id=1 %&#125;&quot;</span>&gt;</span>é“¾æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h2 id="3-è·¯å¾„è½¬æ¢å™¨ç±»å‹"><a href="#3-è·¯å¾„è½¬æ¢å™¨ç±»å‹" class="headerlink" title="3. è·¯å¾„è½¬æ¢å™¨ç±»å‹"></a>3. <strong>è·¯å¾„è½¬æ¢å™¨ç±»å‹</strong></h2><p>Django å†…ç½®äº†å¤šç§ç±»å‹è½¬æ¢å™¨ï¼š</p>
<table>
<thead>
<tr>
<th>è½¬æ¢å™¨</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
<th>åŒ¹é…ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>str</code></td>
<td>åŒ¹é…éç©ºå­—ç¬¦ä¸²ï¼ˆä¸åŒ…æ‹¬ <code>/</code>ï¼‰</td>
<td><code>&lt;str:name&gt;</code></td>
<td><code>john</code>, <code>article-1</code></td>
</tr>
<tr>
<td><code>int</code></td>
<td>åŒ¹é…æ­£æ•´æ•°</td>
<td><code>&lt;int:id&gt;</code></td>
<td><code>123</code>, <code>0</code></td>
</tr>
<tr>
<td><code>slug</code></td>
<td>åŒ¹é…å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿</td>
<td><code>&lt;slug:post_slug&gt;</code></td>
<td><code>my-post-2023</code></td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>åŒ¹é… UUID æ ¼å¼å­—ç¬¦ä¸²</td>
<td><code>&lt;uuid:uuid&gt;</code></td>
<td><code>123e4567-e89b-12d3...</code></td>
</tr>
<tr>
<td><code>path</code></td>
<td>åŒ¹é…åŒ…å« <code>/</code> çš„å­—ç¬¦ä¸²</td>
<td><code>&lt;path:filepath&gt;</code></td>
<td><code>docs/user/guide.pdf</code></td>
</tr>
</tbody></table>
<hr>
<h1 id="æ¨¡ç‰ˆ"><a href="#æ¨¡ç‰ˆ" class="headerlink" title="æ¨¡ç‰ˆ"></a>æ¨¡ç‰ˆ</h1><p>ç°åœ¨çš„ä¸»æµå¼€å‘æ–¹å¼å€¾å‘äºâ€œå‰åç«¯åˆ†ç¦»â€ï¼ˆDjango åªå†™ APIï¼Œå‰ç«¯ç”¨ Vue&#x2F;Reactï¼‰ï¼Œä½†**Django æ¨¡ç‰ˆï¼ˆTemplatesï¼‰**æ˜¯å…¶åŸºç¡€</p>
<p>ç›®å‰å¸‚é¢ä¸Šæœ‰éå¸¸å¤šçš„æ¨¡æ¿ç³»ç»Ÿï¼Œå…¶ä¸­æœ€çŸ¥åæœ€å¥½ç”¨çš„å°±æ˜¯DTLå’ŒJinja2ã€‚ DTL æ˜¯ Django Template Language ä¸‰ä¸ªå•è¯çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯Djangoè‡ªå¸¦çš„æ¨¡æ¿è¯­è¨€ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é…ç½®Djangoæ”¯æŒJinja2ç­‰å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œä½†æ˜¯ä½œä¸ºDjangoå†…ç½®çš„æ¨¡æ¿è¯­è¨€ï¼Œå’ŒDjangoå¯ä»¥è¾¾åˆ°æ— ç¼è¡”æ¥è€Œä¸ä¼šäº§ç”Ÿä¸€äº›ä¸å…¼å®¹çš„æƒ…å†µ</p>
<h2 id="DTLæ¦‚å¿µ"><a href="#DTLæ¦‚å¿µ" class="headerlink" title="DTLæ¦‚å¿µ"></a>DTLæ¦‚å¿µ</h2><p>DTLæ¨¡æ¿æ˜¯ä¸€ç§å¸¦æœ‰ç‰¹æ®Šè¯­æ³•çš„HTMLæ–‡ä»¶ï¼Œè¿™ä¸ªHTMLæ–‡ä»¶å¯ä»¥è¢«Djangoç¼–è¯‘ï¼Œå¯ä»¥ä¼ é€’å‚æ•°è¿›å»ï¼Œå® ç°æ•°æ®åŠ¨æ€åŒ–ã€‚åœ¨ç¼–è¯‘å®Œæˆåï¼Œç”Ÿæˆä¸€ä¸ªæ™®é€šçš„HTMLæ–‡ä»¶ï¼Œç„¶åå‘é€ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>ç›´æ¥å°†æ¨¡æ¿æ¸²æŸ“æˆå­—ç¬¦ä¸²å’ŒåŒ…è£…æˆ HttpResponse å¯¹è±¡ä¸€æ­¥åˆ°ä½å®Œæˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>é—®ï¼š</p>
<blockquote>
<p><strong>â€œDjango çš„æ¨¡ç‰ˆæ¸²æŸ“æ˜¯åœ¨å‰ç«¯æ‰§è¡Œè¿˜æ˜¯åç«¯æ‰§è¡Œçš„ï¼Ÿâ€</strong></p>
</blockquote>
<p>æ˜¯åœ¨<strong>åç«¯</strong>æ‰§è¡Œçš„ã€‚ Django åœ¨æœåŠ¡å™¨ç«¯æŠŠ HTML é‡Œçš„ <code>&#123;&#123; &#125;&#125;</code> æ›¿æ¢æˆçœŸå®æ•°æ®ï¼Œç”Ÿæˆçº¯é™æ€çš„ HTML å­—ç¬¦ä¸²ï¼Œç„¶åå‘ç»™æµè§ˆå™¨ã€‚æµè§ˆå™¨æ”¶åˆ°çš„åªæ˜¯æ™®é€šçš„ HTMLï¼Œçœ‹ä¸åˆ°ä»»ä½• <code>&#123;% for %&#125;</code> ä»£ç ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå«â€œæœåŠ¡ç«¯æ¸²æŸ“ (SSR)â€ã€‚</p>
<h2 id="æ¨¡ç‰ˆæŸ¥æ‰¾è·¯å¾„ä½ç½®"><a href="#æ¨¡ç‰ˆæŸ¥æ‰¾è·¯å¾„ä½ç½®" class="headerlink" title="æ¨¡ç‰ˆæŸ¥æ‰¾è·¯å¾„ä½ç½®"></a>æ¨¡ç‰ˆæŸ¥æ‰¾è·¯å¾„ä½ç½®</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">TEMPLATES = [<br>    &#123;<br>        <span class="hljs-string">&quot;BACKEND&quot;</span>: <span class="hljs-string">&quot;django.template.backends.django.DjangoTemplates&quot;</span>,<br>        <span class="hljs-string">&quot;DIRS&quot;</span>: [<br>            <span class="hljs-comment"># é¡¹ç›®çº§æ¨¡æ¿ç›®å½•</span><br>            os.path.join(BASE_DIR, <span class="hljs-string">&#x27;templates&#x27;</span>),<br>        ],<br>        <span class="hljs-string">&quot;APP_DIRS&quot;</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># å¿…é¡»ä¸º Trueï¼Œæ‰èƒ½æŸ¥æ‰¾åº”ç”¨å†…çš„templatesç›®å½•</span><br>        <span class="hljs-string">&quot;OPTIONS&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;context_processors&quot;</span>: [<br>                <span class="hljs-string">&quot;django.template.context_processors.request&quot;</span>,<br>                <span class="hljs-string">&quot;django.contrib.auth.context_processors.auth&quot;</span>,<br>                <span class="hljs-string">&quot;django.contrib.messages.context_processors.messages&quot;</span>,<br>            ],<br>        &#125;,<br>    &#125;,<br>]<br></code></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾é¡ºåºï¼šæ¯”å¦‚ä»£ç  render(â€˜list.htmlâ€™) ã€‚å…ˆä¼šåœ¨ DIRS è¿™ä¸ªåˆ—è¡¨ä¸­ä¾æ¬¡æŸ¥æ‰¾è·¯å¾„ä¸‹æœ‰æ²¡æœ‰è¿™ä¸ªæ¨¡ç‰ˆï¼Œå¦‚æœæœ‰å°±è¿”å›ã€‚å¦‚æœDIRS åˆ—è¡¨ä¸­æ‰€æœ‰çš„è·¯å¾„éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šå…ˆæ£€æŸ¥å½“å‰è¿™ä¸ªè§†å›¾æ‰€å¤„çš„appæ˜¯å¦å·²ç»å®‰è£…ï¼Œå¦‚æœå·²ç»å®‰è£…äº†ï¼Œé‚£ä¹ˆå°±å…ˆåœ¨å½“å‰è¿™ä¸ª app ä¸‹çš„ templates æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾æ¨¡æ¿ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šåœ¨å…¶ä»–å·²ç»å®‰è£…äº†çš„ app ä¸­æŸ¥æ‰¾ã€‚å¦‚æœæ‰€æœ‰è·¯å¾„ä¸‹éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºä¸€ä¸ª TemplateDoesNotExist çš„å¼‚å¸¸ã€‚</p>
<h2 id="DTLè¯­æ³•"><a href="#DTLè¯­æ³•" class="headerlink" title="DTLè¯­æ³•"></a>DTLè¯­æ³•</h2>
Django çš„æ¨¡ç‰ˆè¯­è¨€ï¼ˆDTLï¼‰æ ¸å¿ƒå°±ä¸¤ç‚¹ï¼š

- **`{{ å˜é‡ }}`**ï¼šæŒ–å‘ï¼Œå¡«å€¼ã€‚
- **`{% é€»è¾‘ %}`**ï¼šå†™ä»£ç é€»è¾‘ï¼Œæ¯”å¦‚å¾ªç¯ `for` æˆ–åˆ¤æ–­ `if`ã€‚


<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">info</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># 1.æ™®é€šå˜é‡</span><br>    username = <span class="hljs-string">&quot;å°é»&quot;</span><br>    <span class="hljs-comment"># 2.å­—å…¸</span><br>    book = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æ°´æµ’ä¼ &quot;</span>, <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;æ–½è€åºµ&quot;</span>&#125;<br>    <span class="hljs-comment"># 3.åˆ—è¡¨</span><br>    books = [&#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;æ°´æµ’ä¼ &quot;</span>, <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;æ–½è€åºµ&quot;</span>&#125;, &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span>, <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;ç½—è´¯ä¸­&quot;</span>&#125;]<br>    <span class="hljs-comment"># 4.å¯¹è±¡</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">person</span>:<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>            <span class="hljs-variable language_">self</span>.name = name<br>            <span class="hljs-variable language_">self</span>.age = age<br>    <span class="hljs-comment"># ä¼ é€’ç»™æ¨¡ç‰ˆ</span><br>    context = &#123;<br>        <span class="hljs-string">&#x27;username&#x27;</span>: username,<br>        <span class="hljs-string">&#x27;book&#x27;</span>: book,<br>        <span class="hljs-string">&#x27;books&#x27;</span>: books,<br>        <span class="hljs-string">&#x27;person&#x27;</span>: person(<span class="hljs-string">&quot;å°é»&quot;</span>, <span class="hljs-number">23</span>)<br>    &#125;<br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;info.html&#x27;</span>, context=context)<br></code></pre></td></tr></table></figure>


<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;username&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;book.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;book.author&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;books.0&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;books.1.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>


<img src="/2025/12/15/django%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image2.png" srcset="/img/loading.gif" lazyload class="" title="DTLæ¨¡ç‰ˆå˜é‡">

<h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><h4 id="1-if-elif-else"><a href="#1-if-elif-else" class="headerlink" title="1. if &#x2F; elif &#x2F; else"></a>1. <strong><code>if</code> &#x2F; <code>elif</code> &#x2F; <code>else</code></strong></h4><p>ifæ ‡ç­¾ç›¸å½“äº Python ä¸­çš„æ ‡ç­¾ç¬¦å·ï¼ˆ if è¯­å¥ï¼Œæœ‰ elif å’Œ else ç›¸å¯¹åº”ï¼Œä½†æ˜¯æ‰€æœ‰çš„æ ‡ç­¾éƒ½éœ€è¦ï¼‰è¿›è¡ŒåŒ…è£¹ã€‚ifæ ‡ç­¾ä¸­å¯ä»¥ä½¿ç”¨ &#x3D;&#x3D;ã€!&#x3D;ã€&lt;ã€&lt;&#x3D;ã€&gt;ã€&gt;&#x3D;ã€inã€not inã€isã€is  not ç­‰åˆ¤æ–­è¿ç®—ç¬¦ã€‚</p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">if_view</span>(<span class="hljs-params">request</span>):<br>    age = <span class="hljs-number">23</span><br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;if.html&#x27;</span>, context=&#123;<span class="hljs-string">&#x27;age&#x27;</span>: age&#125;)<br></code></pre></td></tr></table></figure>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> age &gt; 18 %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‚¨å·²æ»¡18å²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">elif</span></span> age == 18 %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‚¨åˆšæ»¡18å²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‚¨æœªæ»¡18å²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure>



<h4 id="2-for-å¾ªç¯"><a href="#2-for-å¾ªç¯" class="headerlink" title="2. for å¾ªç¯"></a>2. <strong>for å¾ªç¯</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- åŸºæœ¬å¾ªç¯ --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> item <span class="hljs-keyword">in</span> items %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; item.name &#125;&#125;</span><span class="language-xml">: </span><span class="hljs-template-variable">&#123;&#123; item.price &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¾ªç¯å˜é‡ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> item <span class="hljs-keyword">in</span> items %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.counter &#125;&#125;</span><span class="language-xml">        </span><span class="hljs-comment">&#123;# ä»1å¼€å§‹è®¡æ•° #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.counter0 &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# ä»0å¼€å§‹è®¡æ•° #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.revcounter &#125;&#125;</span><span class="language-xml">     </span><span class="hljs-comment">&#123;# å€’åºè®¡æ•° #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.revcounter0 &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# å€’åºä»0å¼€å§‹ #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.first &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# æ˜¯å¦ç¬¬ä¸€æ¬¡å¾ªç¯ #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.last &#125;&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# æ˜¯å¦æœ€åä¸€æ¬¡å¾ªç¯ #&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; forloop.parentloop &#125;&#125;</span><span class="language-xml">     </span><span class="hljs-comment">&#123;# çˆ¶çº§å¾ªç¯å¯¹è±¡ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ç©ºå¾ªç¯å¤„ç† --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> item <span class="hljs-keyword">in</span> items %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; item &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">empty</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>No items available.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å­—å…¸å¾ªç¯ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> key, value <span class="hljs-keyword">in</span> data.items %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; key &#125;&#125;</span><span class="language-xml">: </span><span class="hljs-template-variable">&#123;&#123; value &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure>



<h4 id="3-with-åˆ›å»ºå±€éƒ¨å˜é‡"><a href="#3-with-åˆ›å»ºå±€éƒ¨å˜é‡" class="headerlink" title="3. &#96;with åˆ›å»ºå±€éƒ¨å˜é‡"></a>3. <strong>&#96;with åˆ›å»ºå±€éƒ¨å˜é‡</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">with</span></span> total=products|<span class="hljs-name">length</span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total products: </span><span class="hljs-template-variable">&#123;&#123; total &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endwith</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">with</span></span> alpha=1 beta=2 %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Sum: </span><span class="hljs-template-variable">&#123;&#123; alpha|<span class="hljs-name">add</span>:beta &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endwith</span></span> %&#125;</span><br></code></pre></td></tr></table></figure>



<h4 id="4-url-åå‘è§£æ-URL"><a href="#4-url-åå‘è§£æ-URL" class="headerlink" title="4.url åå‘è§£æ URL"></a>4.<strong><code>url</code> åå‘è§£æ URL</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- ä¸å¸¦å‚æ•° --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">url</span></span> &#x27;home&#x27; %&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¸¦ä½ç½®å‚æ•° --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">url</span></span> &#x27;article-detail&#x27; 2023 &#x27;django-tutorial&#x27; %&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>Article<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¸¦å…³é”®å­—å‚æ•° --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">url</span></span> &#x27;profile&#x27; username=user.username %&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>Profile<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åœ¨å˜é‡ä¸­ä½¿ç”¨ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">url</span></span> &#x27;api-endpoint&#x27; <span class="hljs-keyword">as</span> api_url %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> endpoint = <span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; api_url &#125;&#125;</span><span class="language-xml">&quot;;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>


<h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2>
åœ¨æ¨¡ç‰ˆä¸­ï¼Œæœ‰æ—¶å€™éœ€è¦å¯¹ä¸€äº›æ•°æ®è¿›è¡Œå¤„ç†ä»¥åæ‰èƒ½ä½¿ç”¨ã€‚åœ¨æ¨¡ç‰ˆä¸­ï¼Œåˆ™æ˜¯é€šè¿‡è¿‡æ»¤å™¨æ¥å®ç°çš„ã€‚è¿‡æ»¤å™¨ä½¿ç”¨çš„æ˜¯|æ¥ä½¿ç”¨ã€‚æ¯”å¦‚ä½¿ç”¨ add è¿‡æ»¤å™¨

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-variable">&#123;&#123;  value|<span class="hljs-name">add</span>:<span class="hljs-string">&quot;2&quot;</span> &#125;&#125;</span><br></code></pre></td></tr></table></figure>

è¿‡æ»¤å™¨ç”¨äºåœ¨æ¨¡æ¿ä¸­ä¿®æ”¹å˜é‡çš„æ˜¾ç¤ºæ ¼å¼ï¼Œè¯­æ³•ä¸º `{{ variable|filter:argument }}`


<h3 id="1-æ–‡æœ¬æ ¼å¼åŒ–"><a href="#1-æ–‡æœ¬æ ¼å¼åŒ–" class="headerlink" title="1. æ–‡æœ¬æ ¼å¼åŒ–"></a>1. <strong>æ–‡æœ¬æ ¼å¼åŒ–</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- è½¬æ¢ä¸ºå°å†™ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;HELLO WORLD&quot;|<span class="hljs-name">lower</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# hello world #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- è½¬æ¢ä¸ºå¤§å†™ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello world&quot;|<span class="hljs-name">upper</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# HELLO WORLD #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- é¦–å­—æ¯å¤§å†™ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello world&quot;|<span class="hljs-name">capfirst</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# Hello world #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello world&quot;|<span class="hljs-name">title</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# Hello World #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="2-é•¿åº¦å’Œæˆªæ–­"><a href="#2-é•¿åº¦å’Œæˆªæ–­" class="headerlink" title="2. é•¿åº¦å’Œæˆªæ–­"></a>2. <strong>é•¿åº¦å’Œæˆªæ–­</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- è·å–é•¿åº¦ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello&quot;|<span class="hljs-name">length</span> &#125;&#125;</span><span class="language-xml">               </span><span class="hljs-comment">&#123;# 5 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">length</span> &#125;&#125;</span><span class="language-xml">                  </span><span class="hljs-comment">&#123;# åˆ—è¡¨é•¿åº¦ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å­—ç¬¦æˆªæ–­ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;This is a long text&quot;|<span class="hljs-name">truncatechars</span>:10 &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# This is... #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;This is a long text&quot;|<span class="hljs-name">truncatechars</span>:15 &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# This is a lon... #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å•è¯æˆªæ–­ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;This is a long sentence to demonstrate truncation&quot;|<span class="hljs-name">truncatewords</span>:5 &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-comment">&#123;# This is a long sentence... #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ä¿ç•™HTMLæ ‡ç­¾çš„æˆªæ–­ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; html_content|<span class="hljs-name">truncatewords</span>_html:20 &#125;&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# å®‰å…¨æˆªæ–­HTMLå†…å®¹ #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="3-ç©ºæ ¼å’Œæ¢è¡Œå¤„ç†"><a href="#3-ç©ºæ ¼å’Œæ¢è¡Œå¤„ç†" class="headerlink" title="3. ç©ºæ ¼å’Œæ¢è¡Œå¤„ç†"></a>3. <strong>ç©ºæ ¼å’Œæ¢è¡Œå¤„ç†</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- ç§»é™¤ç©ºç™½å­—ç¬¦ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;  hello  world  &quot;|<span class="hljs-name">cut</span>:<span class="hljs-string">&quot; &quot;</span> &#125;&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# helloworld #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello\tworld\n&quot;|<span class="hljs-name">cut</span>:<span class="hljs-string">&quot;\t&quot;</span> &#125;&#125;</span><span class="language-xml">            </span><span class="hljs-comment">&#123;# helloworld\n #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ç§»é™¤æŒ‡å®šå­—ç¬¦ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;Hello-World&quot;|<span class="hljs-name">cut</span>:<span class="hljs-string">&quot;-&quot;</span> &#125;&#125;</span><span class="language-xml">                </span><span class="hljs-comment">&#123;# HelloWorld #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ¢è¡Œç¬¦è½¬æ¢ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;Line1\nLine2\r\nLine3&quot;|<span class="hljs-name">linebreaks</span> &#125;&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# &lt;p&gt;Line1&lt;br&gt;Line2&lt;br&gt;Line3&lt;/p&gt; #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; text|<span class="hljs-name">linebreaksbr</span> &#125;&#125;</span><span class="language-xml">                    </span><span class="hljs-comment">&#123;# åªè½¬æ¢ä¸º&lt;br&gt;æ ‡ç­¾ #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="4-æ•°å­—æ ¼å¼åŒ–"><a href="#4-æ•°å­—æ ¼å¼åŒ–" class="headerlink" title="4. æ•°å­—æ ¼å¼åŒ–"></a>4. <strong>æ•°å­—æ ¼å¼åŒ–</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- å››èˆäº”å…¥ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3.14159|<span class="hljs-name">floatformat</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# 3 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3.14159|<span class="hljs-name">floatformat</span>:2 &#125;&#125;</span><span class="language-xml">        </span><span class="hljs-comment">&#123;# 3.14 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3.1|<span class="hljs-name">floatformat</span>:<span class="hljs-string">&quot;-2&quot;</span> &#125;&#125;</span><span class="language-xml">         </span><span class="hljs-comment">&#123;# 3.1 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3.14159|<span class="hljs-name">floatformat</span>:<span class="hljs-string">&quot;0&quot;</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# 3 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åƒä½åˆ†éš”ç¬¦ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1000000|intcomma &#125;&#125;</span><span class="language-xml">             </span><span class="hljs-comment">&#123;# 1,000,000 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1234.56|intcomma &#125;&#125;</span><span class="language-xml">             </span><span class="hljs-comment">&#123;# 1,234.56 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ–‡ä»¶å¤§å°æ ¼å¼åŒ–ï¼ˆéœ€è¦humanizeï¼‰ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">load</span></span> humanize %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1024|<span class="hljs-name">filesizeformat</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# 1.0 KB #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1048576|<span class="hljs-name">filesizeformat</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# 1.0 MB #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 123456789|<span class="hljs-name">filesizeformat</span> &#125;&#125;</span><span class="language-xml">     </span><span class="hljs-comment">&#123;# 117.7 MB #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="5-æ•°å­¦è¿ç®—"><a href="#5-æ•°å­¦è¿ç®—" class="headerlink" title="5. æ•°å­¦è¿ç®—"></a>5. <strong>æ•°å­¦è¿ç®—</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- åŠ æ³• --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; value|<span class="hljs-name">add</span>:<span class="hljs-string">&quot;5&quot;</span> &#125;&#125;</span><span class="language-xml">                </span><span class="hljs-comment">&#123;# value + 5 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;10&quot;|<span class="hljs-name">add</span>:<span class="hljs-string">&quot;5&quot;</span> &#125;&#125;</span><span class="language-xml">                 </span><span class="hljs-comment">&#123;# 15 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list1|<span class="hljs-name">add</span>:list2 &#125;&#125;</span><span class="language-xml">              </span><span class="hljs-comment">&#123;# åˆå¹¶ä¸¤ä¸ªåˆ—è¡¨ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å‡æ³•ï¼ˆéœ€è¦è‡ªå®šä¹‰æˆ–ä½¿ç”¨è®¡ç®—ï¼‰ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; value|<span class="hljs-name">add</span>:<span class="hljs-string">&quot;-5&quot;</span> &#125;&#125;</span><span class="language-xml">               </span><span class="hljs-comment">&#123;# é—´æ¥å®ç°å‡æ³• #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ä¹˜æ³• --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">widthratio</span></span> value 1 100 %&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# value * 100 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">widthratio</span></span> 5 1 100 %&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# 500 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- é™¤æ³• --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">widthratio</span></span> 100 5 1 %&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# 20 (100 Ã· 5 Ã— 1) #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">widthratio</span></span> value max_value 100 <span class="hljs-keyword">as</span> percentage %&#125;</span><span class="language-xml"></span><br><span class="language-xml">                                   </span><span class="hljs-comment">&#123;# è®¡ç®—ç™¾åˆ†æ¯” #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ç»å¯¹å€¼ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; -5|abs &#125;&#125;</span><span class="language-xml">                       </span><span class="hljs-comment">&#123;# éœ€è¦è‡ªå®šä¹‰è¿‡æ»¤å™¨ #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="6-æ—¥æœŸæ ¼å¼åŒ–"><a href="#6-æ—¥æœŸæ ¼å¼åŒ–" class="headerlink" title="6. æ—¥æœŸæ ¼å¼åŒ–"></a>6. <strong>æ—¥æœŸæ ¼å¼åŒ–</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- åŸºæœ¬æ ¼å¼åŒ– --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">date</span>:<span class="hljs-string">&quot;Y-m-d&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# 2023-12-15 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">date</span>:<span class="hljs-string">&quot;d/m/Y&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# 15/12/2023 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¸¸ç”¨æ ¼å¼ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">date</span>:<span class="hljs-string">&quot;Yå¹´mæœˆdæ—¥&quot;</span> &#125;&#125;</span><span class="language-xml">   </span><span class="hljs-comment">&#123;# 2023å¹´12æœˆ15æ—¥ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">date</span>:<span class="hljs-string">&quot;F j, Y&quot;</span> &#125;&#125;</span><span class="language-xml">   </span><span class="hljs-comment">&#123;# December 15, 2023 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">date</span>:<span class="hljs-string">&quot;D d M Y&quot;</span> &#125;&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# Fri 15 Dec 2023 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ—¶é—´æ ¼å¼åŒ– --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">time</span>:<span class="hljs-string">&quot;H:i&quot;</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# 14:30 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">time</span>:<span class="hljs-string">&quot;H:i:s&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# 14:30:45 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">time</span>:<span class="hljs-string">&quot;g:i A&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# 2:30 PM #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="7-æ—¶é—´ç›¸å…³å¤„ç†"><a href="#7-æ—¶é—´ç›¸å…³å¤„ç†" class="headerlink" title="7. æ—¶é—´ç›¸å…³å¤„ç†"></a>7. <strong>æ—¶é—´ç›¸å…³å¤„ç†</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- ç›¸å¯¹æ—¶é—´ï¼ˆéœ€è¦humanizeï¼‰ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">load</span></span> humanize %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; post.pub_date|naturaltime &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# 2 hours ago #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|naturalday &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# today, yesterday #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ—¶é—´å·® --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">timesince</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# 2 days, 3 hours #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; datetime_obj|<span class="hljs-name">timesince</span>:other_datetime &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åˆ°æŸæ—¶é—´çš„æ—¶é—´å·® --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; deadline|<span class="hljs-name">timeuntil</span> &#125;&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# 3 days, 2 hours #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="8-åˆ—è¡¨æ“ä½œ"><a href="#8-åˆ—è¡¨æ“ä½œ" class="headerlink" title="8. åˆ—è¡¨æ“ä½œ"></a>8. <strong>åˆ—è¡¨æ“ä½œ</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- è·å–ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå…ƒç´  --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">first</span> &#125;&#125;</span><span class="language-xml">                   </span><span class="hljs-comment">&#123;# ç¬¬ä¸€ä¸ªå…ƒç´  #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">last</span> &#125;&#125;</span><span class="language-xml">                    </span><span class="hljs-comment">&#123;# æœ€åä¸€ä¸ªå…ƒç´  #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- éšæœºæ’åº --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">random</span> &#125;&#125;</span><span class="language-xml">                  </span><span class="hljs-comment">&#123;# éšæœºä¸€ä¸ªå…ƒç´  #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|shuffle &#125;&#125;</span><span class="language-xml">                 </span><span class="hljs-comment">&#123;# è¿”å›Noneï¼Œå®é™…ä½¿ç”¨éœ€è‡ªå®šä¹‰ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- è¿æ¥åˆ—è¡¨ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">join</span>:<span class="hljs-string">&quot;, &quot;</span> &#125;&#125;</span><span class="language-xml">               </span><span class="hljs-comment">&#123;# item1, item2, item3 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">join</span>:<span class="hljs-string">&quot; â€¢ &quot;</span> &#125;&#125;</span><span class="language-xml">              </span><span class="hljs-comment">&#123;# item1 â€¢ item2 â€¢ item3 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åˆ‡ç‰‡ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">slice</span>:<span class="hljs-string">&quot;:5&quot;</span> &#125;&#125;</span><span class="language-xml">              </span><span class="hljs-comment">&#123;# å‰5ä¸ªå…ƒç´  #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; list|<span class="hljs-name">slice</span>:<span class="hljs-string">&quot;1:3&quot;</span> &#125;&#125;</span><span class="language-xml">             </span><span class="hljs-comment">&#123;# ç¬¬2åˆ°ç¬¬3ä¸ªå…ƒç´  #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="9-æ’åºå’Œå”¯ä¸€"><a href="#9-æ’åºå’Œå”¯ä¸€" class="headerlink" title="9. æ’åºå’Œå”¯ä¸€"></a>9. <strong>æ’åºå’Œå”¯ä¸€</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- å­—å…¸åˆ—è¡¨æŒ‰å­—æ®µæ’åº --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; user_list|<span class="hljs-name">dictsort</span>:<span class="hljs-string">&quot;name&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# æŒ‰nameæ’åº #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; user_list|<span class="hljs-name">dictsort</span>:<span class="hljs-string">&quot;age&quot;</span> &#125;&#125;</span><span class="language-xml">     </span><span class="hljs-comment">&#123;# æŒ‰ageæ’åº #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æŒ‰å­—æ®µé™åºæ’åº --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; user_list|<span class="hljs-name">dictsortreversed</span>:<span class="hljs-string">&quot;age&quot;</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å”¯ä¸€å€¼ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; duplicate_list|unordered_list &#125;&#125;</span><span class="language-xml"> </span><span class="hljs-comment">&#123;# è½¬ä¸ºæ— åºåˆ—è¡¨HTML #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; duplicate_list|unique &#125;&#125;</span><span class="language-xml">         </span><span class="hljs-comment">&#123;# éœ€è¦è‡ªå®šä¹‰è¿‡æ»¤å™¨ #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="10-å¸ƒå°”å€¼å¤„ç†"><a href="#10-å¸ƒå°”å€¼å¤„ç†" class="headerlink" title="10. å¸ƒå°”å€¼å¤„ç†"></a>10. <strong>å¸ƒå°”å€¼å¤„ç†</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- é»˜è®¤å€¼ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; value|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;N/A&quot;</span> &#125;&#125;</span><span class="language-xml">          </span><span class="hljs-comment">&#123;# å¦‚æœvalueä¸ºç©ºæˆ–ä¸å­˜åœ¨ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;&quot;|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Empty string&quot;</span> &#125;&#125;</span><span class="language-xml">    </span><span class="hljs-comment">&#123;# Empty string #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; None|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Nothing&quot;</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# Nothing #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- é»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸² --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; value|<span class="hljs-name">default</span>_if_none:&quot;--&quot; &#125;&#125;</span><span class="language-xml">   </span><span class="hljs-comment">&#123;# ä»…å½“Noneæ—¶æ›¿æ¢ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¸ƒå°”å€¼æ˜¾ç¤º --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; True|<span class="hljs-name">yesno</span>:<span class="hljs-string">&quot;æ˜¯,å¦,å¯èƒ½&quot;</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# æ˜¯ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; False|<span class="hljs-name">yesno</span>:<span class="hljs-string">&quot;æ˜¯,å¦,å¯èƒ½&quot;</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# å¦ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; None|<span class="hljs-name">yesno</span>:<span class="hljs-string">&quot;æ˜¯,å¦,å¯èƒ½&quot;</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# å¯èƒ½ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; value|<span class="hljs-name">yesno</span>:<span class="hljs-string">&quot;yup,nope&quot;</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# è‡ªå®šä¹‰é€‰é¡¹ #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="11-ç©ºå€¼æ£€æŸ¥"><a href="#11-ç©ºå€¼æ£€æŸ¥" class="headerlink" title="11. ç©ºå€¼æ£€æŸ¥"></a>11. <strong>ç©ºå€¼æ£€æŸ¥</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- æ£€æŸ¥æ˜¯å¦ä¸ºç©º --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;&quot;|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Empty&quot;</span> &#125;&#125;</span><span class="language-xml">           </span><span class="hljs-comment">&#123;# Empty #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; []|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Empty list&quot;</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# Empty list #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &#123;&#125;|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Empty dict&quot;</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# Empty dict #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; None|<span class="hljs-name">default</span>:<span class="hljs-string">&quot;Nothing&quot;</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# Nothing #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="12-HTMLå¤„ç†"><a href="#12-HTMLå¤„ç†" class="headerlink" title="12. HTMLå¤„ç†"></a>12. <strong>HTMLå¤„ç†</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- è½¬ä¹‰HTML --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;&lt;script&gt;alert(&#x27;xss&#x27;)&lt;/script&gt;&quot;|<span class="hljs-name">escape</span> &#125;&#125;</span><span class="language-xml"> </span><br><span class="language-xml"></span><span class="hljs-comment">&#123;# &amp;lt;script&amp;gt;alert(&amp;#x27;xss&amp;#x27;)&amp;lt;/script&amp;gt; #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ç®€å†™å½¢å¼ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; user_input|force_escape &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# å¼ºåˆ¶è½¬ä¹‰ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ ‡è®°ä¸ºå®‰å…¨HTML --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; html_string|<span class="hljs-name">safe</span> &#125;&#125;</span><span class="language-xml">             </span><span class="hljs-comment">&#123;# è°¨æ…ä½¿ç”¨ï¼ #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ç§»é™¤HTMLæ ‡ç­¾ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;&lt;p&gt;Hello&lt;/p&gt;&quot;|<span class="hljs-name">striptags</span> &#125;&#125;</span><span class="language-xml">     </span><span class="hljs-comment">&#123;# Hello #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; html_content|<span class="hljs-name">striptags</span>|<span class="hljs-name">truncatewords</span>:30 &#125;&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="13-URLå¤„ç†"><a href="#13-URLå¤„ç†" class="headerlink" title="13. URLå¤„ç†"></a>13. <strong>URLå¤„ç†</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- URLç¼–ç  --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &quot;hello world&quot;|<span class="hljs-name">urlencode</span> &#125;&#125;</span><span class="language-xml">      </span><span class="hljs-comment">&#123;# hello%20world #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; query_string|<span class="hljs-name">urlencode</span> &#125;&#125;</span><span class="language-xml">       </span><span class="hljs-comment">&#123;# name=John&amp;age=30 #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- è½¬ä¹‰URL --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; path|<span class="hljs-name">iriencode</span> &#125;&#125;</span><span class="language-xml">               </span><span class="hljs-comment">&#123;# å›½é™…åŒ–URLç¼–ç  #&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="14-JSONæ ¼å¼"><a href="#14-JSONæ ¼å¼" class="headerlink" title="14. JSONæ ¼å¼"></a>14. <strong>JSONæ ¼å¼</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- è½¬æ¢ä¸ºJSON --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; python_dict|json_script:&quot;data&quot; &#125;&#125;</span><span class="language-xml">  </span><span class="hljs-comment">&#123;# å®‰å…¨è¾“å‡ºJSON #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åœ¨JavaScriptä¸­ä½¿ç”¨ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; data|json_script:&quot;data-attr&quot; &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;data-attr&#x27;</span>).<span class="hljs-property">textContent</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>


<h3 id="15-å¤æ•°å’Œåºæ•°"><a href="#15-å¤æ•°å’Œåºæ•°" class="headerlink" title="15. å¤æ•°å’Œåºæ•°"></a>15. <strong>å¤æ•°å’Œåºæ•°</strong></h3>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">load</span></span> humanize %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åºæ•° --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1|apnumber &#125;&#125;</span><span class="language-xml">                   </span><span class="hljs-comment">&#123;# one #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3|apnumber &#125;&#125;</span><span class="language-xml">                   </span><span class="hljs-comment">&#123;# three #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- æ•°å­—è½¬ä¸ºåºæ•°è¯ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 1|ordinal &#125;&#125;</span><span class="language-xml">                    </span><span class="hljs-comment">&#123;# 1st #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 2|ordinal &#125;&#125;</span><span class="language-xml">                    </span><span class="hljs-comment">&#123;# 2nd #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 3|ordinal &#125;&#125;</span><span class="language-xml">                    </span><span class="hljs-comment">&#123;# 3rd #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 11|ordinal &#125;&#125;</span><span class="language-xml">                   </span><span class="hljs-comment">&#123;# 11th #&#125;</span><br></code></pre></td></tr></table></figure>


<hr>
<h2 id="æ¨¡ç‰ˆç»“æ„"><a href="#æ¨¡ç‰ˆç»“æ„" class="headerlink" title="æ¨¡ç‰ˆç»“æ„"></a>æ¨¡ç‰ˆç»“æ„</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>extend</code></th>
<th><code>include</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç›®çš„</strong></td>
<td>æ¨¡æ¿ç»§æ‰¿ï¼Œå®šä¹‰éª¨æ¶</td>
<td>æ¨¡å—åŒ–é‡ç”¨ï¼ŒåµŒå…¥ç‰‡æ®µ</td>
</tr>
<tr>
<td><strong>å…³ç³»</strong></td>
<td>çˆ¶å­å…³ç³»</td>
<td>åŒ…å«å…³ç³»</td>
</tr>
<tr>
<td><strong>ä½ç½®</strong></td>
<td>å¿…é¡»æ˜¯æ¨¡æ¿ç¬¬ä¸€ä¸ªæ ‡ç­¾</td>
<td>å¯åœ¨ä»»æ„ä½ç½®</td>
</tr>
<tr>
<td><strong>ä½¿ç”¨é¢‘ç‡</strong></td>
<td>æ¯ä¸ªé¡µé¢é€šå¸¸åªç»§æ‰¿ä¸€æ¬¡</td>
<td>ä¸€ä¸ªé¡µé¢å¯åŒ…å«å¤šæ¬¡</td>
</tr>
<tr>
<td><strong>ä¿®æ”¹å†…å®¹</strong></td>
<td>é€šè¿‡ block æ›¿æ¢</td>
<td>ç›´æ¥åµŒå…¥æ•´ä¸ªæ¨¡æ¿</td>
</tr>
</tbody></table>
<h3 id="1ã€extend-æ¨¡æ¿ç»§æ‰¿"><a href="#1ã€extend-æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="1ã€extend æ¨¡æ¿ç»§æ‰¿"></a>1ã€<strong>extend æ¨¡æ¿ç»§æ‰¿</strong></h3><h4 id="1-åŸºç¡€ç»“æ„"><a href="#1-åŸºç¡€ç»“æ„" class="headerlink" title="1. åŸºç¡€ç»“æ„"></a>1. <strong>åŸºç¡€ç»“æ„</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- base.html (çˆ¶æ¨¡æ¿) --&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> title %&#125;</span><span class="language-xml">é»˜è®¤æ ‡é¢˜</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> extra_head %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> header %&#125;</span><span class="language-xml">ç½‘ç«™å¤´éƒ¨</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> content %&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-comment">&lt;!-- é»˜è®¤å†…å®¹ --&gt;</span></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> footer %&#125;</span><span class="language-xml">ç‰ˆæƒä¿¡æ¯</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> scripts %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></code></pre></td></tr></table></figure>



<h4 id="2-å­æ¨¡æ¿ä½¿ç”¨"><a href="#2-å­æ¨¡æ¿ä½¿ç”¨" class="headerlink" title="2. å­æ¨¡æ¿ä½¿ç”¨"></a>2. <strong>å­æ¨¡æ¿ä½¿ç”¨</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- home.html (å­æ¨¡æ¿) --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">extends</span></span> &quot;base.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- 1. è¦†ç›–titleå— --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> title %&#125;</span><span class="language-xml">é¦–é¡µ - æˆ‘çš„ç½‘ç«™</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- 2. æ·»åŠ é¢å¤–çš„headå†…å®¹ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> extra_head %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;é¦–é¡µæè¿°&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/css/home.css&quot;</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- 3. è¦†ç›–header --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> header %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;nav.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- 4. è¦†ç›–content --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> content %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hero&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        </span><span class="hljs-template-variable">&#123;&#123; block.super &#125;&#125;</span><span class="language-xml">  <span class="hljs-comment">&lt;!-- ä¿ç•™çˆ¶æ¨¡æ¿çš„é»˜è®¤å†…å®¹ --&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é¢å¤–çš„é¦–é¡µå†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><br></code></pre></td></tr></table></figure>



<h4 id="3-å¤šçº§ç»§æ‰¿"><a href="#3-å¤šçº§ç»§æ‰¿" class="headerlink" title="3. å¤šçº§ç»§æ‰¿"></a>3. <strong>å¤šçº§ç»§æ‰¿</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- base.html --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- blog_base.html --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">extends</span></span> &quot;base.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> extra_head %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; block.super &#125;&#125;</span><span class="language-xml">  <span class="hljs-comment">&lt;!-- ç»§æ‰¿baseçš„extra_head --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/css/blog.css&quot;</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> header %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; block.super &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;blog_nav.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- post_detail.html --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">extends</span></span> &quot;blog_base.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> title %&#125;</span><span class="hljs-template-variable">&#123;&#123; post.title &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">block</span></span> content %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; post.title &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        </span><span class="hljs-template-variable">&#123;&#123; post.content|<span class="hljs-name">safe</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endblock</span></span> %&#125;</span><br></code></pre></td></tr></table></figure>


<h3 id="2ã€include-æ¨¡æ¿åŒ…å«"><a href="#2ã€include-æ¨¡æ¿åŒ…å«" class="headerlink" title="2ã€include æ¨¡æ¿åŒ…å«"></a>2ã€<strong>include æ¨¡æ¿åŒ…å«</strong></h3><h4 id="1-åŸºæœ¬åŒ…å«"><a href="#1-åŸºæœ¬åŒ…å«" class="headerlink" title="1. åŸºæœ¬åŒ…å«"></a>1. <strong>åŸºæœ¬åŒ…å«</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- åŒ…å«é™æ€æ¨¡æ¿ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;header.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åŒ…å«å¸¦ä¸Šä¸‹æ–‡ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;user_card.html&quot; with user=current_user %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- åŒ…å«å¤šä¸ªå˜é‡ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;product.html&quot; with product=item price=item.price only %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- onlyå…³é”®å­—ï¼šé™åˆ¶å˜é‡ä¼ é€’ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;component.html&quot; with data=data only %&#125;</span><br></code></pre></td></tr></table></figure>



<h4 id="2-åŠ¨æ€åŒ…å«"><a href="#2-åŠ¨æ€åŒ…å«" class="headerlink" title="2. åŠ¨æ€åŒ…å«"></a>2. <strong>åŠ¨æ€åŒ…å«</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- æ ¹æ®å˜é‡åŒ…å«ä¸åŒæ¨¡æ¿ --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> user.is_premium %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;premium_features.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">else</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;basic_features.html&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨å˜é‡ä½œä¸ºæ¨¡æ¿å --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> template_name %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- å¾ªç¯ä¸­åŒ…å« --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> product <span class="hljs-keyword">in</span> products %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;product_item.html&quot; with product=product %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure>



<h4 id="3-åŒ…å«ä¼ å‚ç¤ºä¾‹"><a href="#3-åŒ…å«ä¼ å‚ç¤ºä¾‹" class="headerlink" title="3. åŒ…å«ä¼ å‚ç¤ºä¾‹"></a>3. <strong>åŒ…å«ä¼ å‚ç¤ºä¾‹</strong></h4>

<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml"><span class="hljs-comment">&lt;!-- card.html --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;card </span></span></span><span class="hljs-template-variable">&#123;&#123; extra_class &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; title &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml">        </span><span class="hljs-template-variable">&#123;&#123; content &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> show_button %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123; button_class &#125;&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; button_text &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨card --&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">include</span></span> &quot;card.html&quot; with </span><br><span class="hljs-template-tag">    title=&quot;ç”¨æˆ·é¢æ¿&quot; </span><br><span class="hljs-template-tag">    content=user.bio </span><br><span class="hljs-template-tag">    show_button=True </span><br><span class="hljs-template-tag">    button_text=&quot;ç¼–è¾‘èµ„æ–™&quot; </span><br><span class="hljs-template-tag">    button_class=&quot;btn-primary&quot; </span><br><span class="hljs-template-tag">    extra_class=&quot;user-card&quot; </span><br><span class="hljs-template-tag">%&#125;</span><br></code></pre></td></tr></table></figure>


<hr>
<h1 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h1><h2 id="ORMåŸºç¡€æ¦‚å¿µä¸æ¨¡å‹åˆ›å»º"><a href="#ORMåŸºç¡€æ¦‚å¿µä¸æ¨¡å‹åˆ›å»º" class="headerlink" title="ORMåŸºç¡€æ¦‚å¿µä¸æ¨¡å‹åˆ›å»º"></a>ORMåŸºç¡€æ¦‚å¿µä¸æ¨¡å‹åˆ›å»º</h2><p><strong>ORM (Object Relational Mapping)</strong> æŠŠ Python çš„<strong>ç±» (Class)</strong> æ˜ å°„æˆæ•°æ®åº“é‡Œçš„<strong>è¡¨ (Table)</strong>ã€‚</p>
<p>åªéœ€è¦å®šä¹‰ä¸€ä¸ª Python ç±»ï¼ŒDjango å°±ä¼šè‡ªåŠ¨å¸®å»ºè¡¨ã€å¸®å†™ <code>SELECT/INSERT</code> è¯­å¥ã€‚</p>
<img src="/2025/12/15/django%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image3.png" srcset="/img/loading.gif" lazyload class="" title="ORM">

<p>å…ˆåœ¨settings.pyä¸­é…ç½®å¥½æ•°æ®åº“ä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">DATABASES = &#123;<br>    <span class="hljs-string">&quot;default&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;ENGINE&quot;</span>: <span class="hljs-string">&quot;django.db.backends.mysql&quot;</span>,  <span class="hljs-comment"># ä½¿ç”¨ MySQL æ•°æ®åº“</span><br>        <span class="hljs-string">&quot;NAME&quot;</span>: <span class="hljs-string">&#x27;database_demo&#x27;</span>,  <span class="hljs-comment"># æ•°æ®åº“åç§°</span><br>        <span class="hljs-string">&quot;USER&quot;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,           <span class="hljs-comment"># æ•°æ®åº“ç”¨æˆ·å</span><br>        <span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&#x27;123456&#x27;</span>,       <span class="hljs-comment"># æ•°æ®åº“å¯†ç </span><br>        <span class="hljs-string">&quot;HOST&quot;</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,      <span class="hljs-comment"># æ•°æ®åº“ä¸»æœºåœ°å€</span><br>        <span class="hljs-string">&quot;PORT&quot;</span>: <span class="hljs-string">&#x27;3306&#x27;</span>,           <span class="hljs-comment"># æ•°æ®åº“ç«¯å£</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ORM æ¨¡å‹ä¸€èˆ¬éƒ½æ˜¯æ”¾åœ¨app çš„ models.py æ–‡ä»¶ä¸­ã€‚æ¯ä¸ª app éƒ½å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ¨¡å‹ã€‚å¹¶ä¸”è¦åœ¨ settings.py çš„ INSTALLED_APP ä¸­è¿›è¡Œå®‰è£…ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¹¦ç±æ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>(models.Model):<br>    name = models.CharField(max_length=<span class="hljs-number">100</span>)<br>    author = models.CharField(max_length=<span class="hljs-number">20</span>)<br>    pub_time = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>)<br>    price = models.FloatField(default=<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>

<p>æ‰§è¡Œä¸¤æ­¥å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python manage.py makemigrations<br>python manage.py migrate<br></code></pre></td></tr></table></figure>

<h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_book</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># book = Book(name=&quot;Djangoå…¥é—¨&quot;, author=&quot;å¼ ä¸‰&quot;, price=59.9)</span><br>    book = Book(name=<span class="hljs-string">&quot;æ°´æµ’ä¼ &quot;</span>, author=<span class="hljs-string">&quot;æ–½è€åºµ&quot;</span>, price=<span class="hljs-number">39.9</span>)<br>    book.save()<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">f&quot;å›¾ä¹¦ <span class="hljs-subst">&#123;book.name&#125;</span> æ·»åŠ æˆåŠŸï¼ŒIDä¸º <span class="hljs-subst">&#123;book.<span class="hljs-built_in">id</span>&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_book</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># books = Book.objects.all()  # è·å–æ‰€æœ‰å¯¹è±¡</span><br>    books = Book.objects.<span class="hljs-built_in">filter</span>(name=<span class="hljs-string">&quot;Djangoå…¥é—¨&quot;</span>)  <span class="hljs-comment"># æ¡ä»¶æŸ¥è¯¢</span><br>    <span class="hljs-keyword">for</span> book <span class="hljs-keyword">in</span> books:<br>        <span class="hljs-built_in">print</span>(book.name, book.author, book.price)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;æŸ¥è¯¢å›¾ä¹¦æˆåŠŸ&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_book</span>(<span class="hljs-params">request</span>):<br>    book_id = request.GET.get(<span class="hljs-string">&quot;id&quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        book = Book.objects.get(<span class="hljs-built_in">id</span>=book_id)  <span class="hljs-comment"># è·å–å•ä¸ªå¯¹è±¡</span><br>        <span class="hljs-built_in">print</span>(book.name, book.author, book.price)<br>        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">f&quot;å›¾ä¹¦åç§°: <span class="hljs-subst">&#123;book.name&#125;</span>, ä½œè€…: <span class="hljs-subst">&#123;book.author&#125;</span>, ä»·æ ¼: <span class="hljs-subst">&#123;book.price&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">except</span> Book.DoesNotExist:<br>        <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;å›¾ä¹¦ä¸å­˜åœ¨&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">order_book</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># books = Book.objects.order_by(&quot;-price&quot;)  # é™åº</span><br>    books = Book.objects.order_by(<span class="hljs-string">&quot;price&quot;</span>)  <span class="hljs-comment"># å‡åº</span><br>    <span class="hljs-keyword">for</span> book <span class="hljs-keyword">in</span> books:<br>        <span class="hljs-built_in">print</span>(book.name, book.author, book.price)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;æ’åºå›¾ä¹¦æˆåŠŸ&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_book</span>(<span class="hljs-params">request</span>):<br>    book = Book.objects.first()<br>    book.price = <span class="hljs-number">49.9</span><br>    book.save()<br>    <span class="hljs-built_in">print</span>(book.name, book.author, book.price)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">f&quot;å›¾ä¹¦ <span class="hljs-subst">&#123;book.name&#125;</span> æ›´æ–°æˆåŠŸï¼Œæ–°çš„ä»·æ ¼ä¸º <span class="hljs-subst">&#123;book.price&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_book</span>(<span class="hljs-params">request</span>):<br>    book = Book.objects.first()<br>    book.delete()<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;åˆ é™¤å›¾ä¹¦æˆåŠŸ&quot;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="å¸¸è§FieldåŠå…¶å‚æ•°"><a href="#å¸¸è§FieldåŠå…¶å‚æ•°" class="headerlink" title="å¸¸è§FieldåŠå…¶å‚æ•°"></a>å¸¸è§FieldåŠå…¶å‚æ•°</h2><h3 id="ä¸€ã€-æ ¸å¿ƒå­—æ®µç±»å‹-Field-Types"><a href="#ä¸€ã€-æ ¸å¿ƒå­—æ®µç±»å‹-Field-Types" class="headerlink" title="ä¸€ã€ æ ¸å¿ƒå­—æ®µç±»å‹ (Field Types)"></a>ä¸€ã€ æ ¸å¿ƒå­—æ®µç±»å‹ (Field Types)</h3><h4 id="1-æ–‡æœ¬ç±»"><a href="#1-æ–‡æœ¬ç±»" class="headerlink" title="1. æ–‡æœ¬ç±»"></a>1. æ–‡æœ¬ç±»</h4><ul>
<li><strong><code>CharField</code></strong>: çŸ­æ–‡æœ¬ã€‚<ul>
<li><strong>å¿…å¡«å‚æ•°</strong>: <code>max_length</code> (æœ€å¤§é•¿åº¦)ã€‚</li>
<li><em>åœºæ™¯</em>: ç”¨ä¾‹åç§°ã€æ¥å£ URLã€åˆ›å»ºäººå§“åã€‚</li>
</ul>
</li>
<li><strong><code>TextField</code></strong>: é•¿æ–‡æœ¬ï¼ˆæ— é•¿åº¦é™åˆ¶ï¼‰ã€‚<ul>
<li><em>åœºæ™¯</em>: <strong>å¼‚å¸¸å †æ ˆä¿¡æ¯ (Stack Trace)</strong>ã€æ–­è¨€å¤±è´¥çš„è¯¦ç»†æ—¥å¿—ã€å¤‡æ³¨ã€‚</li>
</ul>
</li>
</ul>
<h4 id="2-æ•°å­—ç±»"><a href="#2-æ•°å­—ç±»" class="headerlink" title="2. æ•°å­—ç±»"></a>2. æ•°å­—ç±»</h4><ul>
<li><strong><code>IntegerField</code></strong>: æ•´æ•°ã€‚<ul>
<li><em>åœºæ™¯</em>: ä¼˜å…ˆçº§ (1, 2, 3)ã€é‡è¯•æ¬¡æ•°ã€‚</li>
</ul>
</li>
<li><strong><code>DecimalField</code></strong>: é«˜ç²¾åº¦å°æ•° (æ¯” Float æ›´å‡†)ã€‚<ul>
<li><strong>å¿…å¡«å‚æ•°</strong>: <code>max_digits</code> (æ€»ä½æ•°), <code>decimal_places</code> (å°æ•°ä½)ã€‚</li>
<li><em>åœºæ™¯</em>: <strong>ä»£ç è¦†ç›–ç‡ (85.5%)</strong>ã€äº¤æ˜“é‡‘é¢æµ‹è¯•ã€‚</li>
</ul>
</li>
</ul>
<h4 id="3-æ—¶é—´ç±»-é¢è¯•å¸¸è€ƒ"><a href="#3-æ—¶é—´ç±»-é¢è¯•å¸¸è€ƒ" class="headerlink" title="3. æ—¶é—´ç±» (é¢è¯•å¸¸è€ƒ)"></a>3. æ—¶é—´ç±» (é¢è¯•å¸¸è€ƒ)</h4><ul>
<li><strong><code>DateTimeField</code></strong>: æ—¥æœŸ+æ—¶é—´ (YYYY-MM-DD HH:MM:SS)ã€‚</li>
<li><strong><code>DateField</code></strong>: ä»…æ—¥æœŸã€‚<ul>
<li><em>å…³é”®å‚æ•°åŒºåˆ†</em>:<ul>
<li><code>auto_now_add=True</code>: <strong>åˆ›å»ºæ—¶</strong>è‡ªåŠ¨å¡«å½“å‰æ—¶é—´ï¼ˆç”¨äºâ€œåˆ›å»ºæ—¶é—´â€ï¼‰ã€‚</li>
<li><code>auto_now=True</code>: <strong>æ¯æ¬¡ä¿å­˜(save)æ—¶</strong>è‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´ï¼ˆç”¨äºâ€œæœ€åæ›´æ–°æ—¶é—´â€ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="4-é€»è¾‘ä¸ç»“æ„ç±»"><a href="#4-é€»è¾‘ä¸ç»“æ„ç±»" class="headerlink" title="4. é€»è¾‘ä¸ç»“æ„ç±»"></a>4. é€»è¾‘ä¸ç»“æ„ç±»</h4><ul>
<li><strong><code>BooleanField</code></strong>: å¸ƒå°”å€¼ (True&#x2F;False)ã€‚<ul>
<li><em>åœºæ™¯</em>: æ˜¯å¦é€šè¿‡ (is_passed)ã€æ˜¯å¦åˆ é™¤ (is_deleted)ã€‚</li>
</ul>
</li>
<li><strong><code>JSONField</code></strong>: ç›´æ¥å­˜ JSON å­—å…¸æˆ–åˆ—è¡¨ã€‚<ul>
<li><em>åœºæ™¯</em>: <strong>æ¥å£è¯·æ±‚å¤´ (Headers)</strong>ã€<strong>æ¥å£è¿”å›ä½“ (Response Body)</strong>ã€é…ç½®å‚æ•°ã€‚</li>
<li><em>æ³¨æ„</em>: åœ¨ MySQL 5.7+ å’Œ PostgreSQL ä¸­æ˜¯åŸç”Ÿçš„ï¼Œæ€§èƒ½å¾ˆå¥½ï¼›åœ¨ SQLite ä¸­å­˜ä¸ºæ–‡æœ¬ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="äºŒã€-é€šç”¨å‚æ•°-Options-â€”â€”-å‡ ä¹æ‰€æœ‰-Field-éƒ½èƒ½ç”¨"><a href="#äºŒã€-é€šç”¨å‚æ•°-Options-â€”â€”-å‡ ä¹æ‰€æœ‰-Field-éƒ½èƒ½ç”¨" class="headerlink" title="äºŒã€ é€šç”¨å‚æ•° (Options) â€”â€” å‡ ä¹æ‰€æœ‰ Field éƒ½èƒ½ç”¨"></a>äºŒã€ é€šç”¨å‚æ•° (Options) â€”â€” å‡ ä¹æ‰€æœ‰ Field éƒ½èƒ½ç”¨</h3><p>è¿™æ˜¯æœ€å®¹æ˜“æ··æ·†çš„åœ°æ–¹ï¼Œå°¤å…¶æ˜¯ <code>null</code> å’Œ <code>blank</code>ã€‚</p>
<table>
<thead>
<tr>
<th><strong>å‚æ•°</strong></th>
<th><strong>è§£é‡Š</strong></th>
<th><strong>å¸¸ç”¨å€¼</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>verbose_name</code></strong></td>
<td>ç»™å­—æ®µèµ·ä¸ªâ€œäººè¯â€åå­—ï¼Œæ˜¾ç¤ºåœ¨ Admin åå°ã€‚</td>
<td><code>verbose_name=&quot;ç”¨ä¾‹ä¼˜å…ˆçº§&quot;</code></td>
</tr>
<tr>
<td><strong><code>default</code></strong></td>
<td>é»˜è®¤å€¼ã€‚</td>
<td><code>default=0</code> æˆ– <code>default=&quot;GET&quot;</code></td>
</tr>
<tr>
<td><strong><code>choices</code></strong></td>
<td><strong>æšä¸¾</strong>ã€‚æŠŠè¾“å…¥æ¡†å˜æˆä¸‹æ‹‰æ¡†ï¼Œé™åˆ¶è¾“å…¥èŒƒå›´ã€‚</td>
<td>(è§ä¸‹æ–¹ä»£ç ç¤ºä¾‹)</td>
</tr>
<tr>
<td><strong><code>unique</code></strong></td>
<td>å”¯ä¸€æ€§çº¦æŸã€‚</td>
<td><code>unique=True</code> (å¦‚ç”¨ä¾‹ç¼–å·ä¸èƒ½é‡å¤)</td>
</tr>
<tr>
<td><strong><code>null=True</code></strong></td>
<td><strong>æ•°æ®åº“å±‚é¢</strong>ï¼šå…è®¸å­˜ NULLã€‚</td>
<td>é»˜è®¤æ˜¯ False (ä¸å…è®¸ç©º)ã€‚</td>
</tr>
<tr>
<td><strong><code>blank=True</code></strong></td>
<td><strong>è¡¨å•éªŒè¯å±‚é¢</strong>ï¼šå…è®¸å‰ç«¯ä¼ ç©ºå€¼ã€‚</td>
<td>é»˜è®¤æ˜¯ False (å¿…å¡«)ã€‚</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>ç»éªŒä¹‹è°ˆ</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯å­—ç¬¦ä¸² (<code>CharField</code>&#x2F;<code>TextField</code>)ï¼Œé€šå¸¸è®¾ <code>blank=True, default=&#39;&#39;</code>ï¼Œè€Œ<strong>ä¸è¦</strong>è®¾ <code>null=True</code>ï¼ˆDjango æƒ¯ä¾‹ä¸æ¨èå­—ç¬¦ä¸²å­˜ NULLï¼‰ã€‚</li>
<li>å¦‚æœæ˜¯æ•°å­—ã€å¤–é”®ï¼Œæƒ³ç•™ç©ºï¼Œå¿…é¡»åŒæ—¶è®¾ <code>null=True, blank=True</code>ã€‚</li>
</ul>
</blockquote>
<hr>
<h2 id="Metaå¸¸ç”¨é…ç½®"><a href="#Metaå¸¸ç”¨é…ç½®" class="headerlink" title="Metaå¸¸ç”¨é…ç½®"></a>Metaå¸¸ç”¨é…ç½®</h2><p>Field å®šä¹‰äº†è¡¨é‡Œæœ‰<strong>ä»€ä¹ˆæ•°æ®</strong>ï¼ˆåˆ—ï¼‰ï¼Œè€Œ Meta å®šä¹‰äº†è¿™å¼ è¡¨<strong>å¦‚ä½•è¡¨ç°</strong>ï¼ˆè¡Œä¸ºï¼‰</p>
<h3 id="verbose-name"><a href="#verbose-name" class="headerlink" title="verbose_name"></a>verbose_name</h3><p>å¦‚æœä¸å†™ï¼ŒAdmin åå°ä¼šæ˜¾ç¤º <code>TestCase</code>ï¼Œå†™äº†å°±æ˜¾ç¤º <code>æµ‹è¯•ç”¨ä¾‹</code>ã€‚</p>
<ul>
<li><strong><code>verbose_name</code></strong>: å•æ•°åç§°ã€‚</li>
<li><strong><code>verbose_name_plural</code></strong>: å¤æ•°åç§°ã€‚å¦‚æœä¸å†™ï¼ŒDjango ä¼šè‡ªåŠ¨åœ¨å•æ•°åé¢åŠ ä¸ª â€œsâ€ï¼ˆå˜æˆ <code>æµ‹è¯•ç”¨ä¾‹s</code>ï¼Œå¾ˆéš¾çœ‹ï¼‰ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCase</span>(models.Model):<br>    <span class="hljs-comment"># ... å­—æ®µ ...</span><br>    <br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        verbose_name = <span class="hljs-string">&quot;æµ‹è¯•ç”¨ä¾‹&quot;</span><br>        verbose_name_plural = <span class="hljs-string">&quot;æµ‹è¯•ç”¨ä¾‹&quot;</span>  <span class="hljs-comment"># é€šå¸¸è®¾ä¸ºå’Œå•æ•°ä¸€æ ·</span><br></code></pre></td></tr></table></figure>

<h3 id="ordering"><a href="#ordering" class="headerlink" title="ordering"></a>ordering</h3><p>æŸ¥æ•°æ®æ—¶ï¼Œè¿”å›çš„æ•°æ®é¡ºåº</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        <span class="hljs-comment"># è´Ÿå·è¡¨ç¤ºå€’åº (DESC)ï¼Œå³åˆ›å»ºæ—¶é—´è¶Šæ™šæ’è¶Šå‰</span><br>        ordering = [<span class="hljs-string">&#x27;-created_time&#x27;</span>] <br>        <br>        <span class="hljs-comment"># å¦‚æœåªæƒ³æŒ‰idæ­£åºæ’</span><br>        <span class="hljs-comment"># ordering = [&#x27;id&#x27;]</span><br></code></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼šæ’åºä¼šå¢åŠ æ•°æ®åº“å¼€é”€ï¼Œå¦‚æœæ•°æ®é‡æå¤§ï¼ˆç™¾ä¸‡çº§ï¼‰ï¼Œå»ºè®®åœ¨ä»£ç é‡ŒæŒ‰éœ€æ’åºï¼Œè€Œä¸æ˜¯è®¾ä¸ºå…¨å±€é»˜è®¤ã€‚</p>
<h3 id="unique-together"><a href="#unique-together" class="headerlink" title="unique_together"></a>unique_together</h3><p>è”åˆå”¯ä¸€ç´¢å¼•.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        <span class="hljs-comment"># è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨çš„åˆ—è¡¨ï¼ˆå› ä¸ºå¯ä»¥æœ‰å¤šç»„è”åˆçº¦æŸï¼‰</span><br>        unique_together = [<br>            <span class="hljs-comment"># è”åˆçº¦æŸï¼šé¡¹ç›®ID + ç”¨ä¾‹åç§° å¿…é¡»å”¯ä¸€</span><br>            (<span class="hljs-string">&#x27;project&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>),<br>        ]<br></code></pre></td></tr></table></figure>

<h3 id="abstract-True"><a href="#abstract-True" class="headerlink" title="abstract &#x3D; True"></a>abstract &#x3D; True</h3><p>å‘ç° <code>Project</code>ã€<code>TestCase</code>ã€<code>TestReport</code> è¿™å‡ å¼ è¡¨ï¼Œéƒ½éœ€è¦ <code>created_time</code> å’Œ <code>updated_time</code> è¿™ä¸¤ä¸ªå­—æ®µã€‚ä¸æƒ³åœ¨æ¯ä¸ªç±»é‡Œéƒ½å¤åˆ¶ç²˜è´´ä¸€éä»£ç ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåˆ›å»ºä¸€ä¸ªå…¬å…±çˆ¶ç±»ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1. å®šä¹‰ä¸€ä¸ªåŸºç±»ï¼Œä¸å¯¹åº”æ•°æ®åº“è¡¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseModel</span>(models.Model):<br>    created_time = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&quot;åˆ›å»ºæ—¶é—´&quot;</span>)<br>    updated_time = models.DateTimeField(auto_now=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&quot;æ›´æ–°æ—¶é—´&quot;</span>)<br>    description = models.TextField(blank=<span class="hljs-literal">True</span>, verbose_name=<span class="hljs-string">&quot;æè¿°&quot;</span>)<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        abstract = <span class="hljs-literal">True</span>  <span class="hljs-comment"># å…³é”®ï¼å‘Šè¯‰Djangoä¸è¦ç»™è¿™ä¸ªç±»å»ºè¡¨ï¼Œå®ƒåªæ˜¯ç”¨æ¥è¢«ç»§æ‰¿çš„</span><br><br><span class="hljs-comment"># 2. å…¶ä»–æ¨¡å‹ç›´æ¥ç»§æ‰¿å®ƒ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Project</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br>    name = models.CharField(...)<br>    <span class="hljs-comment"># è‡ªåŠ¨æ‹¥æœ‰ created_time, updated_time, description</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCase</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):<br>    name = models.CharField(...)<br>    <span class="hljs-comment"># è‡ªåŠ¨æ‹¥æœ‰ created_time, updated_time, description</span><br></code></pre></td></tr></table></figure>

<h3 id="db-table"><a href="#db-table" class="headerlink" title="db_table"></a>db_table</h3><p>Django é»˜è®¤ç”Ÿæˆçš„è¡¨åæ˜¯ <code>appå_modelå</code>.è€Œdb_tableå³å®šä¹‰è¡¨çš„åå­—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        db_table = <span class="hljs-string">&quot;t_test_case&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="å¤–é”®å’Œè¡¨å…³ç³»"><a href="#å¤–é”®å’Œè¡¨å…³ç³»" class="headerlink" title="å¤–é”®å’Œè¡¨å…³ç³»"></a>å¤–é”®å’Œè¡¨å…³ç³»</h2><h3 id="1-ForeignKey-ä¸€å¯¹å¤š"><a href="#1-ForeignKey-ä¸€å¯¹å¤š" class="headerlink" title="1. ForeignKey (ä¸€å¯¹å¤š)"></a>1. <code>ForeignKey</code> (ä¸€å¯¹å¤š)</h3><p>æœ€å¸¸ç”¨çš„ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªç”¨ä¾‹å±äºä¸€ä¸ªé¡¹ç›®ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">project = models.ForeignKey(to=<span class="hljs-string">&quot;Project&quot;</span>, on_delete=models.CASCADE)<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>å¿…å¡«å‚æ•° <code>on_delete</code> (çº§è”åˆ é™¤ç­–ç•¥)</strong> <ul>
<li><code>models.CASCADE</code>: <strong>çº§è”åˆ é™¤</strong>ã€‚é¡¹ç›®åˆ äº†ï¼Œå®ƒåº•ä¸‹çš„ç”¨ä¾‹<strong>å…¨åˆ </strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</li>
<li><code>models.SET_NULL</code>: é¡¹ç›®åˆ äº†ï¼Œç”¨ä¾‹ä¿ç•™ï¼Œä½† project å­—æ®µå˜ä¸º Nullï¼ˆéœ€è¦é…åˆ <code>null=True</code>ï¼‰</li>
<li><code>models.PROTECT</code>: ä¿æŠ¤æ¨¡å¼ã€‚å¦‚æœé¡¹ç›®ä¸‹æœ‰ç”¨ä¾‹ï¼Œ<strong>ç¦æ­¢åˆ é™¤</strong>è¯¥é¡¹ç›®ï¼ˆæŠ¥é”™ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(models.Model):<br>    username = models.CharField(max_length=<span class="hljs-number">20</span>)<br>    password = models.CharField(max_length=<span class="hljs-number">100</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):<br>    title = models.CharField(max_length=<span class="hljs-number">100</span>)<br>    content = models.TextField()<br><br>    <span class="hljs-comment"># å¤–é”®å…³è” åœ¨æ•°æ®åº“ä¸­å­—æ®µæ˜¯user_id ä¸Userçš„idå…³è”</span><br>    author = models.ForeignKey(<span class="hljs-string">&quot;User&quot;</span>, on_delete=models.CASCADE)<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">article_test</span>(<span class="hljs-params">request</span>):<br>    user = User(username=<span class="hljs-string">&quot;xiaoli&quot;</span>, password=<span class="hljs-string">&quot;123456&quot;</span>)<br>    user.save()<br>    article = Article(title=<span class="hljs-string">&quot;æµ‹è¯•æ ‡é¢˜&quot;</span>, content=<span class="hljs-string">&quot;æµ‹è¯•å†…å®¹&quot;</span>, author=user)<br>    article.save()<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;This is article test page.&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">article_author_name</span>(<span class="hljs-params">request</span>):<br>    article = Article.objects.first()<br>    <span class="hljs-comment"># æ­£å‘æŸ¥è¯¢ï¼šç›´æ¥ç”¨ç‚¹å· . å³å¯</span><br>    <span class="hljs-comment"># å…³é”®ï¼šarticle.author æ˜¯ä¸€ä¸ªå¤–é”®å…³è”çš„æ¨¡å‹å¯¹è±¡ æ˜¯ä¸€ä¸ªUserå¯¹è±¡</span><br>    <span class="hljs-built_in">print</span>(article.author.username)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">f&quot;ä½œè€…åç§°: <span class="hljs-subst">&#123;article.author.username&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_articles</span>(<span class="hljs-params">request</span>):<br>    user = User.objects.first()<br>    <span class="hljs-comment"># user.article_set</span><br>    <span class="hljs-comment"># è·å–è¯¥ç”¨æˆ·çš„æ‰€æœ‰articleä¿¡æ¯</span><br>    articles = user.article_set.<span class="hljs-built_in">all</span>()<br>    <span class="hljs-keyword">for</span> article <span class="hljs-keyword">in</span> articles:<br>        <span class="hljs-built_in">print</span>(article.title, article.content)<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;ç”¨æˆ·æ–‡ç« åˆ—è¡¨&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="2-ManyToManyField-å¤šå¯¹å¤š"><a href="#2-ManyToManyField-å¤šå¯¹å¤š" class="headerlink" title="2. ManyToManyField (å¤šå¯¹å¤š)"></a>2. <code>ManyToManyField</code> (å¤šå¯¹å¤š)</h3><p>æ¯”å¦‚ï¼šä¸€ä¸ªç”¨ä¾‹å¯ä»¥è´´å¤šä¸ª <strong>Tag</strong>ï¼ˆæ ‡ç­¾ï¼‰ï¼Œä¸€ä¸ª Tag ä¹Ÿå¯ä»¥æ ‡åœ¨è¿™ä¸ªç”¨ä¾‹ä¸Šã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):<br>    title = models.CharField(max_length=<span class="hljs-number">100</span>)<br>    content = models.TextField()<br>    tags = models.ManyToManyField(<span class="hljs-string">&quot;Tag&quot;</span>,related_name=<span class="hljs-string">&quot;articles&quot;</span>)<br>    <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tag</span>(models.Model):<br>	name = models.CharField(max_length=<span class="hljs-number">50</span>)	<br></code></pre></td></tr></table></figure>

<ul>
<li>Django ä¼šè‡ªåŠ¨å»ºä¸€å¼ ä¸­é—´è¡¨ã€‚</li>
</ul>
<h3 id="3-OneToOneField-ä¸€å¯¹ä¸€"><a href="#3-OneToOneField-ä¸€å¯¹ä¸€" class="headerlink" title="3. OneToOneField (ä¸€å¯¹ä¸€)"></a>3. <code>OneToOneField</code> (ä¸€å¯¹ä¸€)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(models.Model):<br>    username = models.CharField(max_length=<span class="hljs-number">20</span>)<br>    password = models.CharField(max_length=<span class="hljs-number">100</span>)<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserExtension</span>(models.Model):  <br>    birthday = models.DateTimeField(null=<span class="hljs-literal">True</span>)  <br>    school = models.CharField(blank=<span class="hljs-literal">True</span>,max_length=<span class="hljs-number">50</span>)  <br>    user = models.OneToOneField(<span class="hljs-string">&quot;User&quot;</span>, on_delete=models.CASCADE)<br></code></pre></td></tr></table></figure>

<p>ç”¨å¾—å°‘ã€‚æ¯”å¦‚ï¼šUser è¡¨ä¸å¤Ÿç”¨äº†ï¼Œæä¸ª UserProfile è¡¨å­˜æ‰©å±•ä¿¡æ¯ã€‚</p>
<hr>
<h2 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h2><h3 id="åŸºç¡€æŸ¥è¯¢ä¸â€œåŒä¸‹åˆ’çº¿é­”æ³•â€-Field-Lookups"><a href="#åŸºç¡€æŸ¥è¯¢ä¸â€œåŒä¸‹åˆ’çº¿é­”æ³•â€-Field-Lookups" class="headerlink" title="åŸºç¡€æŸ¥è¯¢ä¸â€œåŒä¸‹åˆ’çº¿é­”æ³•â€ (Field Lookups)"></a>åŸºç¡€æŸ¥è¯¢ä¸â€œåŒä¸‹åˆ’çº¿é­”æ³•â€ (Field Lookups)</h3><p>Django çš„ç²¾é«“åœ¨äºå­—æ®µååé¢æ¥ <code>__æ“ä½œç¬¦</code>ã€‚è¿™åœ¨åº•å±‚ä¼šç¿»è¯‘æˆ SQL çš„ <code>WHERE</code> å­å¥ã€‚</p>
<h4 id="1-æ¨¡ç³ŠåŒ¹é…-LIKE"><a href="#1-æ¨¡ç³ŠåŒ¹é…-LIKE" class="headerlink" title="1. æ¨¡ç³ŠåŒ¹é… (LIKE)"></a>1. æ¨¡ç³ŠåŒ¹é… (<code>LIKE</code>)</h4><p>æ‰¾å‡ºåå­—é‡ŒåŒ…å« â€œç™»å½•â€ çš„ç”¨ä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># SQL: ... WHERE name LIKE &#x27;%ç™»å½•%&#x27;;</span><br>cases = TestCase.objects.<span class="hljs-built_in">filter</span>(name__contains=<span class="hljs-string">&quot;ç™»å½•&quot;</span>)<br><br><span class="hljs-comment"># å¿½ç•¥å¤§å°å†™ (Case Insensitive)</span><br>cases = TestCase.objects.<span class="hljs-built_in">filter</span>(name__icontains=<span class="hljs-string">&quot;login&quot;</span>) <br></code></pre></td></tr></table></figure>

<h4 id="2-æ¯”è¾ƒè¿ç®—"><a href="#2-æ¯”è¾ƒè¿ç®—" class="headerlink" title="2. æ¯”è¾ƒè¿ç®— (&gt;, &lt;, IN)"></a>2. æ¯”è¾ƒè¿ç®— (<code>&gt;</code>, <code>&lt;</code>, <code>IN</code>)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># id å¤§äº 10 çš„</span><br>TestCase.objects.<span class="hljs-built_in">filter</span>(id__gt=<span class="hljs-number">10</span>) <span class="hljs-comment"># gt = greater than</span><br><br><span class="hljs-comment"># ä¼˜å…ˆçº§ å°äºç­‰äº 2 çš„ (P1å’ŒP2)</span><br>TestCase.objects.<span class="hljs-built_in">filter</span>(priority__lte=<span class="hljs-number">2</span>) <span class="hljs-comment"># lte = less than or equal</span><br><br><span class="hljs-comment"># æ‰¹é‡æŸ¥è¯¢ï¼šid åœ¨ [1, 3, 5] ä¸­çš„</span><br>TestCase.objects.<span class="hljs-built_in">filter</span>(id__in=[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>])<br></code></pre></td></tr></table></figure>

<h4 id="3-æ—¥æœŸæŸ¥è¯¢-Date"><a href="#3-æ—¥æœŸæŸ¥è¯¢-Date" class="headerlink" title="3. æ—¥æœŸæŸ¥è¯¢ (Date)"></a>3. æ—¥æœŸæŸ¥è¯¢ (Date)</h4><p>è¿™æ˜¯æµ‹å¼€åšâ€œæµ‹è¯•å‘¨æŠ¥â€ç»Ÿè®¡æ—¶æœ€å¸¸ç”¨çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ‰¾å‡º 2024å¹´ ä¹‹ååˆ›å»ºçš„æ•°æ®</span><br>TestCase.objects.<span class="hljs-built_in">filter</span>(created_time__year__gte=<span class="hljs-number">2024</span>)<br><br><span class="hljs-comment"># æ‰¾å‡º 12æœˆ çš„æ•°æ®</span><br>TestCase.objects.<span class="hljs-built_in">filter</span>(created_time__month=<span class="hljs-number">12</span>)<br></code></pre></td></tr></table></figure>

<p>â€¦â€¦</p>
<hr>
<h3 id="Q-å¯¹è±¡ä¸-F-å¯¹è±¡"><a href="#Q-å¯¹è±¡ä¸-F-å¯¹è±¡" class="headerlink" title="Q å¯¹è±¡ä¸ F å¯¹è±¡"></a>Q å¯¹è±¡ä¸ F å¯¹è±¡</h3><h4 id="1-Q-å¯¹è±¡-å¤æ‚é€»è¾‘-OR"><a href="#1-Q-å¯¹è±¡-å¤æ‚é€»è¾‘-OR" class="headerlink" title="1. Q å¯¹è±¡ (å¤æ‚é€»è¾‘ OR)"></a>1. Q å¯¹è±¡ (å¤æ‚é€»è¾‘ OR)</h4><p>filter() é‡Œçš„å¤šä¸ªå‚æ•°é»˜è®¤æ˜¯ AND å…³ç³»ã€‚å¦‚æœæˆ‘è¦ ORï¼ˆæˆ–ï¼‰æ€ä¹ˆåŠï¼Ÿ</p>
<p>æ¯”å¦‚ï¼šæ‰¾å‡º â€œP1çº§åˆ«â€ æˆ–è€… â€œå¤±è´¥â€ çš„ç”¨ä¾‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><br><span class="hljs-comment"># | ä»£è¡¨ OR, &amp; ä»£è¡¨ AND, ~ ä»£è¡¨ NOT</span><br>cases = TestCase.objects.<span class="hljs-built_in">filter</span>(Q(priority=<span class="hljs-number">1</span>) | Q(is_passed=<span class="hljs-literal">False</span>))<br></code></pre></td></tr></table></figure>

<h4 id="2-F-å¯¹è±¡-å­—æ®µé—´æ¯”è¾ƒ"><a href="#2-F-å¯¹è±¡-å­—æ®µé—´æ¯”è¾ƒ" class="headerlink" title="2. F å¯¹è±¡ (å­—æ®µé—´æ¯”è¾ƒ)"></a>2. F å¯¹è±¡ (å­—æ®µé—´æ¯”è¾ƒ)</h4><p>filter() é€šå¸¸æ˜¯æ‹¿å­—æ®µå’Œå¸¸é‡æ¯”ã€‚å¦‚æœæˆ‘è¦æ‹¿å­—æ®µå’Œå­—æ®µæ¯”å‘¢ï¼Ÿ</p>
<p>åœºæ™¯ï¼šæ‰¾å‡ºæ‰€æœ‰è¢«ä¿®æ”¹è¿‡çš„ç”¨ä¾‹ï¼ˆå³ updated_time å¤§äº created_timeï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> F<br><br><span class="hljs-comment"># F(&#x27;å­—æ®µå&#x27;) è·å–å­—æ®µçš„å€¼</span><br>cases = TestCase.objects.<span class="hljs-built_in">filter</span>(updated_time__gt=F(<span class="hljs-string">&#x27;created_time&#x27;</span>))<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="æŸ¥çœ‹åŸç”Ÿ-SQL"><a href="#æŸ¥çœ‹åŸç”Ÿ-SQL" class="headerlink" title="æŸ¥çœ‹åŸç”Ÿ SQL"></a>æŸ¥çœ‹åŸç”Ÿ SQL</h3><p>.queryçŸ¥é“ Django åˆ°åº•æ‰§è¡Œäº†ä»€ä¹ˆ SQL</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">qs = TestCase.objects.<span class="hljs-built_in">filter</span>(name__contains=<span class="hljs-string">&quot;ç™»å½•&quot;</span>, priority=<span class="hljs-number">1</span>)<br><br><span class="hljs-comment"># ç›´æ¥æ‰“å° query å±æ€§</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(qs.query))<br></code></pre></td></tr></table></figure>

<p>ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼šSELECT â€¦ FROM case_manager_testcase WHERE name LIKE %ç™»å½•% AND priority &#x3D; 1</p>
<hr>
<h2 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h2><p>åœ¨ Django ä¸­ï¼Œèšåˆä¸»è¦æ¶‰åŠä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š</p>
<ol>
<li><strong><code>aggregate()</code></strong>: <strong>æ•´è¡¨èšåˆ</strong>ã€‚æŠŠä¸€å †æ•°æ®â€œæ‹æ‰â€æˆä¸€ä¸ªå­—å…¸ï¼ˆä¾‹å¦‚ï¼šç®—å…¨å…¬å¸çš„ Bug æ€»æ•°ï¼‰ã€‚</li>
<li><strong><code>annotate()</code></strong>: <strong>åˆ†ç»„èšåˆ (Group By)</strong>ã€‚ç»™æ¯ä¸€è¡Œæ•°æ®æŒ‚è½½ä¸€ä¸ªç»Ÿè®¡å€¼ï¼ˆä¾‹å¦‚ï¼šç®—<strong>æ¯ä¸ª</strong>é¡¹ç›®ä¸‹æœ‰å¤šå°‘æ¡ç”¨ä¾‹ï¼‰ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Count, Sum, Avg, Max, Min<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="ä¸€ã€-aggregate-â€”â€”-ç®—æ€»è´¦"><a href="#ä¸€ã€-aggregate-â€”â€”-ç®—æ€»è´¦" class="headerlink" title="ä¸€ã€ aggregate() â€”â€” ç®—æ€»è´¦"></a>ä¸€ã€ <code>aggregate()</code> â€”â€” ç®—æ€»è´¦</h3><p>å®ƒçš„ä½œç”¨æ˜¯å¯¹å½“å‰çš„ QuerySet è¿›è¡Œè®¡ç®—ï¼Œè¿”å›ä¸€ä¸ª<strong>å­—å…¸ (Dictionary)</strong>ã€‚å®ƒä¸å†è¿”å›æ¨¡å‹å¯¹è±¡åˆ—è¡¨äº†ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šæµ‹è¯•å¹³å°é¦–é¡µçš„â€œæ•°æ®æ¦‚è§ˆâ€ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Count, Avg<br><br><span class="hljs-comment"># 1. ç»Ÿè®¡æ€»å…±æœ‰å¤šå°‘æ¡ç”¨ä¾‹</span><br><span class="hljs-comment"># SQL: SELECT COUNT(id) FROM test_case;</span><br>res = TestCase.objects.aggregate(total_cases=Count(<span class="hljs-string">&#x27;id&#x27;</span>))<br><span class="hljs-built_in">print</span>(res) <br><span class="hljs-comment"># è¾“å‡º: &#123;&#x27;total_cases&#x27;: 105&#125;</span><br><br><span class="hljs-comment"># 2. ç»Ÿè®¡æ‰€æœ‰ç”¨ä¾‹ä¼˜å…ˆçº§çš„å¹³å‡å€¼ (è™½ç„¶è¿™æ²¡å•¥ä¸šåŠ¡æ„ä¹‰ï¼Œä»…ä½œæ¼”ç¤º)</span><br><span class="hljs-comment"># SQL: SELECT AVG(priority) FROM test_case;</span><br>res = TestCase.objects.aggregate(avg_priority=Avg(<span class="hljs-string">&#x27;priority&#x27;</span>))<br><span class="hljs-built_in">print</span>(res)<br><span class="hljs-comment"># è¾“å‡º: &#123;&#x27;avg_priority&#x27;: 1.8&#125;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœä¸ç»™å‚æ•°èµ·åå­—ï¼ˆ <code>total_cases</code>ï¼‰ï¼ŒDjango ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>id__count</code> è¿™ç§åå­—ã€‚</p>
</blockquote>
<hr>
<h3 id="äºŒã€-annotate-â€”â€”-ç»™æ¯ä¸ªå¯¹è±¡â€œè´´æ ‡ç­¾â€-Group-By"><a href="#äºŒã€-annotate-â€”â€”-ç»™æ¯ä¸ªå¯¹è±¡â€œè´´æ ‡ç­¾â€-Group-By" class="headerlink" title="äºŒã€ annotate() â€”â€” ç»™æ¯ä¸ªå¯¹è±¡â€œè´´æ ‡ç­¾â€ (Group By)"></a>äºŒã€ <code>annotate()</code> â€”â€” ç»™æ¯ä¸ªå¯¹è±¡â€œè´´æ ‡ç­¾â€ (Group By)</h3><p>å®ƒçš„æœ¬è´¨æ˜¯ SQL çš„ GROUP BYã€‚å®ƒè¿”å›çš„ä¾ç„¶æ˜¯ QuerySet (åˆ—è¡¨)ï¼Œä½†æ˜¯åˆ—è¡¨é‡Œçš„æ¯ä¸ªå¯¹è±¡å¤šäº†ä¸€ä¸ªå±æ€§ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šåœ¨â€œé¡¹ç›®åˆ—è¡¨â€é¡µï¼Œç›´æ¥æ˜¾ç¤ºæ¯ä¸ªé¡¹ç›®ä¸‹é¢æœ‰å¤šå°‘æ¡ç”¨ä¾‹ã€‚</p>
<h4 id="1-åŸºç¡€ç”¨æ³•-åå‘å…³è”ç»Ÿè®¡"><a href="#1-åŸºç¡€ç”¨æ³•-åå‘å…³è”ç»Ÿè®¡" class="headerlink" title="1. åŸºç¡€ç”¨æ³• (åå‘å…³è”ç»Ÿè®¡)"></a>1. åŸºç¡€ç”¨æ³• (åå‘å…³è”ç»Ÿè®¡)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æˆ‘ä»¬æŸ¥çš„æ˜¯ Projectï¼Œä½†æˆ‘ä»¬è¦ç»Ÿè®¡å®ƒåº•ä¸‹çš„ testcase æ•°é‡</span><br>projects = Project.objects.annotate(case_count=Count(<span class="hljs-string">&#x27;testcase&#x27;</span>))<br><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> projects:<br>    <span class="hljs-comment"># æ­¤æ—¶ p å¯¹è±¡å¤šäº†ä¸€ä¸ªå±æ€§ case_count</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é¡¹ç›®: <span class="hljs-subst">&#123;p.name&#125;</span>, ç”¨ä¾‹æ•°: <span class="hljs-subst">&#123;p.case_count&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># SQL ç¿»è¯‘:</span><br><span class="hljs-comment"># SELECT project.*, COUNT(test_case.id) </span><br><span class="hljs-comment"># FROM project </span><br><span class="hljs-comment"># LEFT OUTER JOIN test_case ON (...) </span><br><span class="hljs-comment"># GROUP BY project.id;</span><br></code></pre></td></tr></table></figure>

<h4 id="2-ç»“åˆ-values-å®ç°çœŸæ­£çš„-Group-By"><a href="#2-ç»“åˆ-values-å®ç°çœŸæ­£çš„-Group-By" class="headerlink" title="2. ç»“åˆ values() å®ç°çœŸæ­£çš„ Group By"></a>2. ç»“åˆ <code>values()</code> å®ç°çœŸæ­£çš„ Group By</h4><p>å¦‚æœä½ ä¸æƒ³æ‹¿å¯¹è±¡ï¼Œåªæƒ³æ‹¿â€œç»Ÿè®¡æŠ¥è¡¨â€ï¼Œæ¯”å¦‚**â€œæŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡ç”¨ä¾‹æ•°é‡â€**ï¼ˆæœ‰å¤šå°‘P1ï¼Œå¤šå°‘P2â€¦ï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1. values(&#x27;priority&#x27;): å…ˆæŒ‰ priority å­—æ®µåˆ†ç»„</span><br><span class="hljs-comment"># 2. annotate(...): å¯¹æ¯ä¸€ç»„è¿›è¡Œç»Ÿè®¡</span><br>report = TestCase.objects.values(<span class="hljs-string">&#x27;priority&#x27;</span>).annotate(count=Count(<span class="hljs-string">&#x27;id&#x27;</span>))<br><br><span class="hljs-built_in">print</span>(report)<br><span class="hljs-comment"># è¾“å‡º (QuerySetå…¶å®æ˜¯å­—å…¸åˆ—è¡¨): </span><br><span class="hljs-comment"># &lt;QuerySet [</span><br><span class="hljs-comment">#    &#123;&#x27;priority&#x27;: 1, &#x27;count&#x27;: 12&#125;, </span><br><span class="hljs-comment">#    &#123;&#x27;priority&#x27;: 2, &#x27;count&#x27;: 50&#125;, </span><br><span class="hljs-comment">#    &#123;&#x27;priority&#x27;: 3, &#x27;count&#x27;: 8&#125;</span><br><span class="hljs-comment"># ]&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="æ¡ä»¶èšåˆ-Conditional-Aggregation"><a href="#æ¡ä»¶èšåˆ-Conditional-Aggregation" class="headerlink" title="æ¡ä»¶èšåˆ (Conditional Aggregation)"></a>æ¡ä»¶èšåˆ (Conditional Aggregation)</h3><p>åœ¨èšåˆå‡½æ•°é‡ŒåŠ  filterã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.db.models <span class="hljs-keyword">import</span> Q<br><br><span class="hljs-comment"># ç»Ÿè®¡æ¯ä¸ªé¡¹ç›®ä¸‹çš„ï¼š1. æ€»ç”¨ä¾‹æ•°  2. å¤±è´¥ç”¨ä¾‹æ•°</span><br>projects = Project.objects.annotate(<br>    total=Count(<span class="hljs-string">&#x27;testcase&#x27;</span>),<br>    failed_count=Count(<span class="hljs-string">&#x27;testcase&#x27;</span>, <span class="hljs-built_in">filter</span>=Q(testcase__is_passed=<span class="hljs-literal">False</span>))<br>)<br><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> projects:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é¡¹ç›®: <span class="hljs-subst">&#123;p.name&#125;</span>, æ€»æ•°: <span class="hljs-subst">&#123;p.total&#125;</span>, å¤±è´¥: <span class="hljs-subst">&#123;p.failed_count&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>è¿™è¡Œä»£ç åœ¨ SQL å±‚é¢ä¼šè¢«ç¿»è¯‘æˆé«˜çº§çš„ <code>CASE WHEN ... THEN ...</code> è¯­å¥ï¼Œæ€§èƒ½æé«˜ã€‚</p>
<table>
<thead>
<tr>
<th><strong>æ–¹æ³•</strong></th>
<th><strong>è¿”å›ç±»å‹</strong></th>
<th><strong>SQL ç±»æ¯”</strong></th>
<th><strong>é€‚ç”¨åœºæ™¯</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>aggregate</code></strong></td>
<td><strong>å­—å…¸ (Dict)</strong></td>
<td><code>SELECT COUNT(*) ...</code></td>
<td>é¦–é¡µå¤§ç›˜æ•°æ®ï¼Œç®—å…¨ç«™æ€»å’Œ&#x2F;å¹³å‡å€¼ã€‚</td>
</tr>
<tr>
<td><strong><code>annotate</code></strong></td>
<td><strong>QuerySet (List)</strong></td>
<td><code>GROUP BY</code></td>
<td>åˆ—è¡¨é¡µï¼Œæ¯ä¸€è¡Œæ•°æ®éƒ½è¦å¸¦ä¸€ä¸ªç»Ÿè®¡å€¼ï¼ˆå¦‚ï¼šæ–‡ç« çš„ç‚¹èµæ•°ã€é¡¹ç›®çš„ç”¨ä¾‹æ•°ï¼‰ã€‚</td>
</tr>
</tbody></table>
<hr>
<h1 id="è¡¨å•"><a href="#è¡¨å•" class="headerlink" title="è¡¨å•"></a>è¡¨å•</h1><h2 id="è¡¨å•éªŒè¯"><a href="#è¡¨å•éªŒè¯" class="headerlink" title="è¡¨å•éªŒè¯"></a>è¡¨å•éªŒè¯</h2><h3 id="ä¸€ã€-è¡¨å•æ¦‚è¿°-Forms-Overview"><a href="#ä¸€ã€-è¡¨å•æ¦‚è¿°-Forms-Overview" class="headerlink" title="ä¸€ã€ è¡¨å•æ¦‚è¿° (Forms Overview)"></a>ä¸€ã€ è¡¨å•æ¦‚è¿° (Forms Overview)</h3><p>Django çš„è¡¨å•ç³»ç»Ÿä¸»è¦åšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><strong>ç”Ÿæˆ HTML</strong>ï¼šæŠŠ Python ç±»è‡ªåŠ¨å˜æˆ HTML ä»£ç ï¼ˆæ¯”å¦‚ <code>&lt;input type=&quot;text&quot;&gt;</code>ï¼‰ï¼ˆä¸å¸¸ç”¨ï¼‰</li>
<li><strong>éªŒè¯æ•°æ®</strong>ï¼šè¿™æ˜¯æ ¸å¿ƒï¼æ£€æŸ¥ç”¨æˆ·å¡«çš„æ˜¯ä¸æ˜¯é‚®ç®±ï¼Ÿå¯†ç å¤Ÿä¸å¤Ÿé•¿ï¼Ÿ</li>
<li><strong>æ¸…æ´—æ•°æ®</strong>ï¼šæŠŠç”¨æˆ·å¡«çš„çº¯æ–‡æœ¬ <code>&quot;1&quot;</code> å˜æˆ Python çš„æ•´æ•° <code>1</code>ã€‚</li>
</ol>
<h4 id="æ™®é€šè¡¨å•-forms-Form"><a href="#æ™®é€šè¡¨å•-forms-Form" class="headerlink" title="æ™®é€šè¡¨å• (forms.Form)"></a>æ™®é€šè¡¨å• (<code>forms.Form</code>)</h4><p>è¿™å°±åƒä¹‹å‰ç”¨ <code>JsonResponse</code> æ‰‹å†™ API ä¸€æ ·ï¼Œæ˜¯å®Œå…¨è‡ªå®šä¹‰çš„ï¼Œä¸ä¸€å®šéè¦å’Œæ•°æ®åº“æŒ‚é’©ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šæ¯”å¦‚ä¸€ä¸ªâ€œè¿è¡Œæµ‹è¯•ç”¨ä¾‹â€çš„è¡¨å•ï¼Œåªéœ€è¦ç”¨æˆ·å¡«ä¸€ä¸ªâ€œè¿è¡Œç¯å¢ƒâ€å’Œâ€œé‡è¯•æ¬¡æ•°â€ï¼Œè¿™äº›ä¸éœ€è¦å­˜æ•°æ®åº“ï¼Œåªæ˜¯ä¸ºäº†è§¦å‘ä»»åŠ¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> forms<br><span class="hljs-keyword">from</span> django.core <span class="hljs-keyword">import</span> validators<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageBoardForm</span>(forms.Form):<br>    title = forms.CharField(min_length=<span class="hljs-number">2</span>, max_length=<span class="hljs-number">20</span>, label=<span class="hljs-string">&#x27;æ ‡é¢˜&#x27;</span>, error_messages=&#123;<br>        <span class="hljs-string">&#x27;min_length&#x27;</span>: <span class="hljs-string">&#x27;æ ‡é¢˜é•¿åº¦ä¸èƒ½å°‘äº2ä¸ªå­—ç¬¦&#x27;</span>,<br>        <span class="hljs-string">&#x27;max_length&#x27;</span>: <span class="hljs-string">&#x27;æ ‡é¢˜é•¿åº¦ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦&#x27;</span>,<br>    &#125;)<br>    content = forms.CharField(widget=forms.Textarea, label=<span class="hljs-string">&#x27;å†…å®¹&#x27;</span>)<br>    email = forms.EmailField(label=<span class="hljs-string">&#x27;é‚®ç®±&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterForm</span>(forms.Form):<br>    telephone = forms.CharField(validators=[validators.RegexValidator(<span class="hljs-string">r&#x27;^1[3-9]\d&#123;9&#125;$&#x27;</span>, <span class="hljs-string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ï¼&#x27;</span>)], label=<span class="hljs-string">&#x27;æ‰‹æœºå·&#x27;</span>)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="äºŒã€-æ ¸å¿ƒï¼šæ•°æ®éªŒè¯-Validation"><a href="#äºŒã€-æ ¸å¿ƒï¼šæ•°æ®éªŒè¯-Validation" class="headerlink" title="äºŒã€ æ ¸å¿ƒï¼šæ•°æ®éªŒè¯ (Validation)"></a>äºŒã€ æ ¸å¿ƒï¼šæ•°æ®éªŒè¯ (Validation)</h3><p>è¿™æ˜¯ Form æœ€å¼ºå¤§çš„åœ°æ–¹ã€‚éªŒè¯åˆ†ä¸ºä¸¤å±‚ï¼š<strong>å­—æ®µçº§éªŒè¯</strong> å’Œ <strong>è¡¨å•çº§ï¼ˆæ•´ä½“ï¼‰éªŒè¯</strong>ã€‚</p>
<h4 id="1-å­—æ®µçº§éªŒè¯-clean"><a href="#1-å­—æ®µçº§éªŒè¯-clean" class="headerlink" title="1. å­—æ®µçº§éªŒè¯ (clean_&lt;fieldname&gt;)"></a>1. å­—æ®µçº§éªŒè¯ (<code>clean_&lt;fieldname&gt;</code>)</h4><p><strong>è§„åˆ™</strong>ï¼šå®šä¹‰æ–¹æ³•åä¸º <code>clean_å­—æ®µå</code>ã€‚ <strong>åœºæ™¯</strong>ï¼šæ£€æŸ¥â€œé‡è¯•æ¬¡æ•°â€ä¸èƒ½æ˜¯å¥‡æ•°ï¼ˆå‡è®¾ä¸šåŠ¡è§„å®šï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_retry_times</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-comment"># 1. å–å‡ºè¯¥å­—æ®µçš„å€¼</span><br>    data = <span class="hljs-variable language_">self</span>.cleaned_data[<span class="hljs-string">&#x27;retry_times&#x27;</span>]<br>    <br>    <span class="hljs-comment"># 2. åˆ¤æ–­é€»è¾‘</span><br>    <span class="hljs-keyword">if</span> data % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># 3. æŠ›å‡ºå¼‚å¸¸ -&gt; å‰ç«¯ä¼šæ˜¾ç¤ºçº¢è‰²é”™è¯¯æç¤º</span><br>        <span class="hljs-keyword">raise</span> forms.ValidationError(<span class="hljs-string">&quot;é‡è¯•æ¬¡æ•°å¿…é¡»æ˜¯å¶æ•°ï¼&quot;</span>)<br>        <br>    <span class="hljs-comment"># 4. å¿…é¡»è¿”å›æ¸…æ´—åçš„å€¼</span><br>    <span class="hljs-keyword">return</span> data<br></code></pre></td></tr></table></figure>

<h4 id="2-è¡¨å•çº§éªŒè¯-clean"><a href="#2-è¡¨å•çº§éªŒè¯-clean" class="headerlink" title="2. è¡¨å•çº§éªŒè¯ (clean)"></a>2. è¡¨å•çº§éªŒè¯ (<code>clean</code>)</h4><p><strong>è§„åˆ™</strong>ï¼šå®šä¹‰æ–¹æ³•åä¸º <code>clean</code>ã€‚ <strong>åœºæ™¯</strong>ï¼šè·¨å­—æ®µéªŒè¯ã€‚æ¯”å¦‚â€œå¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œé‡è¯•æ¬¡æ•°å¿…é¡»ä¸º 0â€ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">clean</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-comment"># 1. è·å–æ‰€æœ‰å·²é€šè¿‡å­—æ®µçº§éªŒè¯çš„æ•°æ®</span><br>    cleaned_data = <span class="hljs-built_in">super</span>().clean()<br>    <br>    env = cleaned_data.get(<span class="hljs-string">&#x27;environment&#x27;</span>)<br>    retry = cleaned_data.get(<span class="hljs-string">&#x27;retry_times&#x27;</span>)<br><br>    <span class="hljs-comment"># 2. è·¨å­—æ®µé€»è¾‘åˆ¤æ–­</span><br>    <span class="hljs-keyword">if</span> env == <span class="hljs-string">&#x27;prod&#x27;</span> <span class="hljs-keyword">and</span> retry &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-comment"># è¿™é‡Œçš„æŠ¥é”™å±äºæ•´ä¸ªè¡¨å•çš„é”™è¯¯ï¼Œä¸æ˜¯æŸä¸ªå­—æ®µçš„</span><br>        <span class="hljs-keyword">raise</span> forms.ValidationError(<span class="hljs-string">&quot;å±é™©æ“ä½œï¼šç”Ÿäº§ç¯å¢ƒç¦æ­¢é‡è¯•ï¼&quot;</span>)<br>        <br>    <span class="hljs-keyword">return</span> cleaned_data<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="ModelForm"><a href="#ModelForm" class="headerlink" title="ModelForm"></a>ModelForm</h2><p>å¦‚æœè¦å†™çš„è¡¨å•å’Œæ•°æ®åº“æ¨¡å‹ï¼ˆModelï¼‰å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰‹å†™ä¸€é <code>forms.Form</code> æ²¡å¿…è¦ã€‚<strong>ModelForm</strong> ç›´æ¥æ ¹æ® Model ç”Ÿæˆè¡¨å•ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> forms<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> TestCase<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCaseForm</span>(forms.ModelForm):<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        <span class="hljs-comment"># 1. ç»‘å®šæ¨¡å‹</span><br>        model = TestCase<br>        <span class="hljs-comment"># 2. æŒ‡å®šè¦æ˜¾ç¤ºçš„å­—æ®µ (&#x27;__all__&#x27; è¡¨ç¤ºæ‰€æœ‰)</span><br>        fields = [<span class="hljs-string">&#x27;project&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;method&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-string">&#x27;priority&#x27;</span>]<br>        <span class="hljs-comment"># 3. è‡ªå®šä¹‰æ§ä»¶æ ·å¼ (æ¯”å¦‚åŠ ä¸ª Bootstrap çš„ class)</span><br>        widgets = &#123;<br>            <span class="hljs-string">&#x27;name&#x27;</span>: forms.TextInput(attrs=&#123;<span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;form-control&#x27;</span>, <span class="hljs-string">&#x27;placeholder&#x27;</span>: <span class="hljs-string">&#x27;è¯·è¾“å…¥ç”¨ä¾‹å&#x27;</span>&#125;),<br>            <span class="hljs-string">&#x27;url&#x27;</span>: forms.TextInput(attrs=&#123;<span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;form-control&#x27;</span>&#125;),<br>        &#125;<br>        <br>    <span class="hljs-comment"># ModelForm ä¾ç„¶å¯ä»¥å†™è‡ªå®šä¹‰éªŒè¯ï¼</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_name</span>(<span class="hljs-params">self</span>):<br>        name = <span class="hljs-variable language_">self</span>.cleaned_data[<span class="hljs-string">&#x27;name&#x27;</span>]<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;æäº‹&quot;</span> <span class="hljs-keyword">in</span> name:<br>            <span class="hljs-keyword">raise</span> forms.ValidationError(<span class="hljs-string">&quot;ç”¨ä¾‹åç§°åŒ…å«æ•æ„Ÿè¯ï¼&quot;</span>)<br>        <span class="hljs-keyword">return</span> name<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="save-æ–¹æ³•"><a href="#save-æ–¹æ³•" class="headerlink" title="save() æ–¹æ³•"></a>save() æ–¹æ³•</h3><p>ModelForm æœ€æ–¹ä¾¿çš„æ˜¯å®ƒè‡ªå¸¦ <code>save()</code> æ–¹æ³•ã€‚</p>
<ul>
<li><strong>Create (æ–°å¢)</strong>: <code>form.save()</code> ä¼šç›´æ¥æ’å…¥æ•°æ®åº“ã€‚</li>
<li><strong>Update (æ›´æ–°)</strong>: å¦‚æœåˆå§‹åŒ–æ—¶ä¼ äº† <code>instance</code>ï¼Œ<code>save()</code> å°±æ˜¯æ›´æ–°ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect, get_object_or_404<br><span class="hljs-keyword">from</span> .forms <span class="hljs-keyword">import</span> TestCaseForm<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> TestCase<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_case</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># POST è¯·æ±‚ï¼šç”¨æˆ·æäº¤äº†è¡¨å•</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        form = TestCaseForm(request.POST) <span class="hljs-comment"># ç»‘å®šæ•°æ®</span><br>        <span class="hljs-keyword">if</span> form.is_valid(): <span class="hljs-comment"># è§¦å‘ä¸Šé¢çš„ clean_... æ–¹æ³•</span><br>            form.save() <span class="hljs-comment"># å­˜å…¥æ•°æ®åº“ï¼</span><br>            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;/case/list/&#x27;</span>) <span class="hljs-comment"># è·³è½¬</span><br>    <br>    <span class="hljs-comment"># GET è¯·æ±‚ï¼šç”¨æˆ·æƒ³è¦çœ‹ç©ºè¡¨å•</span><br>    <span class="hljs-keyword">else</span>:<br>        form = TestCaseForm()<br>    <br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;create_case.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;form&#x27;</span>: form&#125;)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">edit_case</span>(<span class="hljs-params">request, case_id</span>):<br>    <span class="hljs-comment"># æŸ¥å‡ºæ—§æ•°æ®</span><br>    <span class="hljs-keyword">case</span> = get_object_or_404(TestCase, pk=case_id)<br>    <br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œä¼ äº† instance=caseï¼Œè¡¨ç¤ºæ˜¯â€œæ›´æ–°â€è€Œä¸æ˜¯â€œæ–°å»ºâ€</span><br>        form = TestCaseForm(request.POST, instance=<span class="hljs-keyword">case</span>)<br>        <span class="hljs-keyword">if</span> form.is_valid():<br>            form.save() <span class="hljs-comment"># æ›´æ–°æ•°æ®åº“</span><br>            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">&#x27;/case/list/&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># GET è¯·æ±‚ï¼šè¡¨å•é‡Œä¼šé¢„å…ˆå¡«å¥½æ—§æ•°æ®</span><br>        form = TestCaseForm(instance=<span class="hljs-keyword">case</span>)<br>        <br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;edit_case.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;form&#x27;</span>: form&#125;)<br></code></pre></td></tr></table></figure>

<hr>
<h1 id="Session-ä¸-Cookie"><a href="#Session-ä¸-Cookie" class="headerlink" title="Session ä¸ Cookie"></a>Session ä¸ Cookie</h1><p>åœ¨ Web å¼€å‘ä¸­ï¼Œæœ€æ ¸å¿ƒçš„ç—›ç‚¹æ˜¯ï¼šHTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼ˆStatelessï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ åˆšè¯·æ±‚äº†â€œç™»å½•æ¥å£â€ï¼Œç´§æ¥ç€å»è¯·æ±‚â€œä¸ªäººä¸»é¡µâ€ï¼ŒæœåŠ¡å™¨æ ¹æœ¬è®°ä¸ä½â€œåˆšæ‰é‚£ä¸ªè¯·æ±‚æ˜¯ä½ å‘çš„â€ã€‚æœåŠ¡å™¨å¯¹å¾…æ¯ä¸€æ¬¡è¯·æ±‚éƒ½åƒæ¥å¾…æ–°å®¢äººä¸€æ ·ã€‚ä¸ºäº†è®©æœåŠ¡å™¨â€œè®°ä½ä½ â€ï¼Œå°±è¯ç”Ÿäº† Cookie å’Œ Sessionã€‚</p>
<hr>
<h3 id="ä¸€ã€-æ ¸å¿ƒæ¦‚å¿µä¸å½¢è±¡æ¯”å–»"><a href="#ä¸€ã€-æ ¸å¿ƒæ¦‚å¿µä¸å½¢è±¡æ¯”å–»" class="headerlink" title="ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µä¸å½¢è±¡æ¯”å–»"></a>ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µä¸å½¢è±¡æ¯”å–»</h3><p>æˆ‘ç”¨**â€œå»åŒ»é™¢çœ‹ç—…â€**æ¥æ¯”å–»ï¼Œéå¸¸ç›´è§‚ï¼š</p>
<h4 id="1-Cookie-å°±è¯Šå¡"><a href="#1-Cookie-å°±è¯Šå¡" class="headerlink" title="1. Cookie (å°±è¯Šå¡)"></a>1. Cookie (å°±è¯Šå¡)</h4><ul>
<li><strong>å®šä¹‰</strong>ï¼šå­˜å‚¨åœ¨**å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰**çš„ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯ã€‚</li>
<li><strong>æ¯”å–»</strong>ï¼šä½ çš„<strong>å°±è¯Šå¡</strong>ã€‚<ul>
<li>å¡åœ¨ä½ æ‰‹é‡Œï¼ˆæµè§ˆå™¨ï¼‰ã€‚</li>
<li>å¡ä¸Šåªæœ‰ä¸€ä¸²ç¼–å·ï¼ˆSession IDï¼‰ï¼Œæˆ–è€…ç®€å•çš„åå­—ä¿¡æ¯ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸å®‰å…¨ï¼ˆåˆ«äººæ¡åˆ°äº†èƒ½å†’å……ä½ ï¼‰ï¼Œå®¹é‡å°ï¼ˆå­˜ä¸äº†CTç‰‡å­ï¼‰ï¼Œæ¯æ¬¡çœ‹ç—…ï¼ˆå‘è¯·æ±‚ï¼‰éƒ½è¦é€’ç»™åŒ»ç”Ÿã€‚</li>
</ul>
</li>
</ul>
<h4 id="2-Session-ç—…å†æ¡£æ¡ˆ"><a href="#2-Session-ç—…å†æ¡£æ¡ˆ" class="headerlink" title="2. Session (ç—…å†æ¡£æ¡ˆ)"></a>2. Session (ç—…å†æ¡£æ¡ˆ)</h4><ul>
<li><strong>å®šä¹‰</strong>ï¼šå­˜å‚¨åœ¨**æœåŠ¡ç«¯ï¼ˆæœåŠ¡å™¨æ•°æ®åº“&#x2F;å†…å­˜ï¼‰**çš„æ•°æ®ã€‚</li>
<li><strong>æ¯”å–»</strong>ï¼šåŒ»é™¢ç”µè„‘é‡Œçš„<strong>ç—…å†è®°å½•</strong>ã€‚<ul>
<li>æ•°æ®åœ¨åŒ»é™¢æ‰‹é‡Œï¼ˆæœåŠ¡å™¨ï¼‰ã€‚</li>
<li>é‡Œé¢è¯¦ç»†è®°å½•äº†ä½ çš„ç—…æƒ…ã€å¼€çš„è¯ã€ä½ æ˜¯è°ï¼ˆç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå®‰å…¨ï¼ˆåœ¨æœåŠ¡å™¨å¤§æ¥¼é‡Œï¼‰ï¼Œå®¹é‡å¤§ã€‚</li>
</ul>
</li>
</ul>
<h4 id="3-å®ƒä»¬å¦‚ä½•é…åˆï¼Ÿ-æ ¸å¿ƒæµç¨‹"><a href="#3-å®ƒä»¬å¦‚ä½•é…åˆï¼Ÿ-æ ¸å¿ƒæµç¨‹" class="headerlink" title="3. å®ƒä»¬å¦‚ä½•é…åˆï¼Ÿ (æ ¸å¿ƒæµç¨‹)"></a>3. å®ƒä»¬å¦‚ä½•é…åˆï¼Ÿ (æ ¸å¿ƒæµç¨‹)</h4><ol>
<li><strong>æŒ‚å·ï¼ˆç™»å½•ï¼‰</strong>ï¼šä½ ç»™åŒ»é™¢ä¿¡æ¯ï¼ŒåŒ»é™¢åˆ›å»ºä¸€ä¸ªç—…å†ï¼ˆSessionï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªç¼–å· <code>10086</code>ã€‚</li>
<li><strong>å‘å¡ï¼ˆSet-Cookieï¼‰</strong>ï¼šåŒ»é™¢æŠŠå†™ç€ <code>10086</code> çš„å¡ï¼ˆCookieï¼‰ç»™ä½ ã€‚</li>
<li><strong>çœ‹ç—…ï¼ˆåç»­è¯·æ±‚ï¼‰</strong>ï¼šä½ å†æ¬¡å»æ‰¾åŒ»ç”Ÿï¼Œä¸ç”¨åºŸè¯ï¼Œç›´æ¥åˆ·å¡ï¼ˆå‘é€ Cookieï¼‰ã€‚</li>
<li><strong>æŸ¥æ¡£ï¼ˆSession Lookupï¼‰</strong>ï¼šåŒ»ç”Ÿé€šè¿‡å¡å· <code>10086</code>ï¼Œå»ç”µè„‘é‡Œè°ƒå‡ºä½ çš„æ¡£æ¡ˆï¼ˆSessionï¼‰</li>
</ol>
<hr>
<h3 id="äºŒã€-Django-ä¸­çš„å…·ä½“å®ç°"><a href="#äºŒã€-Django-ä¸­çš„å…·ä½“å®ç°" class="headerlink" title="äºŒã€ Django ä¸­çš„å…·ä½“å®ç°"></a>äºŒã€ Django ä¸­çš„å…·ä½“å®ç°</h3><p>Django æŠŠè¿™ä¸€åˆ‡å°è£…å¥½ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ“ä½œ Cookieï¼Œåªéœ€è¦æ“ä½œ <strong><code>request.session</code></strong> å­—å…¸å³å¯ã€‚</p>
<h4 id="1-å¼€å¯-Session-é»˜è®¤å·²å¼€å¯"><a href="#1-å¼€å¯-Session-é»˜è®¤å·²å¼€å¯" class="headerlink" title="1. å¼€å¯ Session (é»˜è®¤å·²å¼€å¯)"></a>1. å¼€å¯ Session (é»˜è®¤å·²å¼€å¯)</h4><p>åœ¨ <code>settings.py</code> ä¸­ï¼Œç¡®ä¿è¿™ä¸¤è¡Œæ˜¯å­˜åœ¨çš„ï¼ˆé»˜è®¤å°±æœ‰ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br>    ...<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>, <span class="hljs-comment"># è´Ÿè´£ Session é€»è¾‘</span><br>]<br><br>MIDDLEWARE = [<br>    ...<br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>, <span class="hljs-comment"># è´Ÿè´£åœ¨è¯·æ±‚å’Œå“åº”ä¸­æ¤å…¥ Cookie</span><br>]<br></code></pre></td></tr></table></figure>

<h4 id="2-ä»£ç å®æˆ˜ï¼šæ¨¡æ‹Ÿç™»å½•ä¸è·å–ä¿¡æ¯"><a href="#2-ä»£ç å®æˆ˜ï¼šæ¨¡æ‹Ÿç™»å½•ä¸è·å–ä¿¡æ¯" class="headerlink" title="2. ä»£ç å®æˆ˜ï¼šæ¨¡æ‹Ÿç™»å½•ä¸è·å–ä¿¡æ¯"></a>2. ä»£ç å®æˆ˜ï¼šæ¨¡æ‹Ÿç™»å½•ä¸è·å–ä¿¡æ¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse<br><br><span class="hljs-comment"># 1. ç™»å½• (å†™å…¥ Session)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># å‡è®¾æ ¡éªŒè´¦å·å¯†ç æˆåŠŸå...</span><br>    <br>    <span class="hljs-comment"># è¿™ä¸€æ­¥ï¼ŒDjango è‡ªåŠ¨åšäº†ä¸‰ä»¶äº‹ï¼š</span><br>    <span class="hljs-comment"># 1. ç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸² (Session ID)</span><br>    <span class="hljs-comment"># 2. åœ¨æ•°æ®åº“ django_session è¡¨é‡Œå­˜å…¥ key=&#x27;user_name&#x27;, value=&#x27;xiaoli&#x27;</span><br>    <span class="hljs-comment"># 3. ç»™æµè§ˆå™¨å‘ä¸€ä¸ªæŒ‡ä»¤ï¼šè¯·æŠŠ Session ID å­˜åˆ° Cookie é‡Œ</span><br>    request.session[<span class="hljs-string">&#x27;user_id&#x27;</span>] = <span class="hljs-number">1001</span><br>    request.session[<span class="hljs-string">&#x27;user_name&#x27;</span>] = <span class="hljs-string">&#x27;xiaoli&#x27;</span><br>    request.session[<span class="hljs-string">&#x27;is_login&#x27;</span>] = <span class="hljs-literal">True</span><br>    <br>    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç™»å½•æˆåŠŸ&quot;</span>&#125;)<br><br><span class="hljs-comment"># 2. åªæœ‰ç™»å½•æ‰èƒ½çœ‹çš„é¡µé¢ (è¯»å– Session)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_info</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># ä» Session ä¸­å–å€¼ (Django ä¼šè‡ªåŠ¨æ ¹æ® Cookie é‡Œçš„ ID å»æ•°æ®åº“æŸ¥)</span><br>    is_login = request.session.get(<span class="hljs-string">&#x27;is_login&#x27;</span>, <span class="hljs-literal">False</span>)<br>    <br>    <span class="hljs-keyword">if</span> is_login:<br>        name = request.session.get(<span class="hljs-string">&#x27;user_name&#x27;</span>)<br>        <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">f&quot;æ¬¢è¿å›æ¥ï¼Œ<span class="hljs-subst">&#123;name&#125;</span>&quot;</span>&#125;)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;è¯·å…ˆç™»å½•&quot;</span>&#125;, status=<span class="hljs-number">403</span>)<br><br><span class="hljs-comment"># 3. é€€å‡º (æ¸…é™¤ Session)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">logout</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># æ¸…ç©ºæœåŠ¡å™¨ç«¯çš„è®°å½•ï¼Œå¹¶å‘Šè¯‰æµè§ˆå™¨åˆ é™¤ Cookie</span><br>    request.session.flush()<br>    <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;é€€å‡ºæˆåŠŸ&quot;</span>&#125;)<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="1-Session-å­˜åœ¨å“ªï¼Ÿ"><a href="#1-Session-å­˜åœ¨å“ªï¼Ÿ" class="headerlink" title="1. Session å­˜åœ¨å“ªï¼Ÿ"></a>1. Session å­˜åœ¨å“ªï¼Ÿ</h4><ul>
<li><strong>é»˜è®¤</strong>ï¼šå­˜åœ¨æ•°æ®åº“é‡Œçš„ <strong><code>django_session</code></strong> è¡¨ã€‚<ul>
<li>å¯ä»¥å»æ•°æ®åº“çœ‹çœ‹ï¼Œæ¯æ¬¡ç™»å½•ï¼Œè¿™é‡Œå°±ä¼šå¤šä¸€è¡Œä¹±ç ä¸€æ ·çš„æ•°æ®ï¼ˆåŠ å¯†çš„ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šå¤§å‚é«˜å¹¶å‘æ—¶ï¼Œé€šå¸¸å­˜åœ¨ <strong>Redis</strong> é‡Œï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰ã€‚<ul>
<li>é…ç½®ï¼š<code>SESSION_ENGINE = &#39;django.contrib.sessions.backends.cache&#39;</code></li>
</ul>
</li>
</ul>
<h4 id="2-Cookie-é‡Œçš„-sessionid"><a href="#2-Cookie-é‡Œçš„-sessionid" class="headerlink" title="2. Cookie é‡Œçš„ sessionid"></a>2. Cookie é‡Œçš„ <code>sessionid</code></h4><p>å½“ç™»å½• Django æˆåŠŸåï¼ŒæŒ‰ F12 æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· -&gt; Application -&gt; Cookiesã€‚</p>
<p>ä¼šçœ‹åˆ°ä¸€ä¸ªå« sessionid çš„ Keyã€‚</p>
<ul>
<li>è¿™å°±æ˜¯â€œå°±è¯Šå¡å·â€ã€‚</li>
<li>å¦‚æœä½ æ‰‹åŠ¨æŠŠè¿™ä¸ª value åˆ äº†ï¼Œåˆ·æ–°é¡µé¢ï¼Œä½ å°±å˜æˆâ€œæœªç™»å½•â€çŠ¶æ€äº†ã€‚</li>
</ul>
<h4 id="3-CSRF-Token-Django-çš„ä¿é•–"><a href="#3-CSRF-Token-Django-çš„ä¿é•–" class="headerlink" title="3. CSRF Token (Django çš„ä¿é•–)"></a>3. CSRF Token (Django çš„ä¿é•–)</h4><p>ä¼šå‘ç°åœ¨ Cookie é‡Œé™¤äº† sessionidï¼Œé€šå¸¸è¿˜æœ‰ä¸€ä¸ª csrftokenã€‚</p>
<p>è¿™æ˜¯ Django ä¸ºäº†é˜²æ­¢ è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡» è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<ul>
<li><strong>æµ‹è¯•å‘ç‚¹</strong>ï¼šå¦‚æœä½ ç”¨ Postman æˆ– Python ä»£ç ï¼ˆRequestsï¼‰å»æµ‹ Django çš„ POST æ¥å£ï¼Œå¾€å¾€ä¼šæŠ¥ <code>403 Forbidden</code>ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šæµ‹è¯•æ—¶é€šå¸¸ä¼šåœ¨ <code>settings.py</code> çš„ <code>MIDDLEWARE</code> é‡Œæš‚æ—¶æ³¨é‡Šæ‰ <code>CsrfViewMiddleware</code>ï¼Œæˆ–è€…åœ¨è¯·æ±‚å¤´é‡Œå¸¦ä¸Š Tokenã€‚</li>
</ul>
<hr>
<h3 id="Token-vs-Session"><a href="#Token-vs-Session" class="headerlink" title="Token vs Session"></a>Token vs Session</h3><p>è¿™æ˜¯<strong>å‰åç«¯åˆ†ç¦»</strong>ï¼ˆFastAPI&#x2F;DRFï¼‰å’Œ<strong>ä¼ ç»Ÿæ¨¡å¼</strong>ï¼ˆDjango Templateï¼‰æœ€å¤§çš„åŒºåˆ«ã€‚</p>
<ul>
<li><strong>Session æ¨¡å¼ (ä¼ ç»Ÿ)</strong>ï¼š<ul>
<li>çŠ¶æ€å­˜åœ¨<strong>æœåŠ¡ç«¯</strong>ã€‚</li>
<li>ä¾èµ– Cookieï¼ˆæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šï¼‰ã€‚</li>
<li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨å‹åŠ›å¤§ï¼›å¦‚æœä¸åšç‰¹æ®Šå¤„ç†ï¼Œä¸æ”¯æŒæ‰‹æœº Appï¼ˆApp æ²¡æœ‰æµè§ˆå™¨é‚£æ ·çš„ Cookie æœºåˆ¶ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>Token æ¨¡å¼ (ç°ä»£ï¼Œå¦‚ JWT)</strong>ï¼š<ul>
<li>çŠ¶æ€å­˜åœ¨<strong>å®¢æˆ·ç«¯</strong>ã€‚</li>
<li>ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨å‘ç»™ä½ ä¸€ä¸²å¾ˆé•¿çš„åŠ å¯†å­—ç¬¦ä¸²ï¼ˆTokenï¼‰ã€‚</li>
<li>ä»¥åæ¯æ¬¡è¯·æ±‚ï¼Œä½ éƒ½è¦<strong>æ‰‹åŠ¨</strong>åœ¨ Header é‡Œå¸¦ä¸Š <code>Authorization: Bearer &lt;token&gt;</code>ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæœåŠ¡å™¨ä¸ç”¨å­˜æ•°æ®ï¼ˆçœå†…å­˜ï¼‰ï¼Œå®Œç¾æ”¯æŒ App å’Œå‰åç«¯åˆ†ç¦»ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><h3 id="ä¸€ã€-ä»€ä¹ˆæ˜¯-CSRFï¼Ÿï¼ˆæ”»å‡»åŸç†ï¼‰"><a href="#ä¸€ã€-ä»€ä¹ˆæ˜¯-CSRFï¼Ÿï¼ˆæ”»å‡»åŸç†ï¼‰" class="headerlink" title="ä¸€ã€ ä»€ä¹ˆæ˜¯ CSRFï¼Ÿï¼ˆæ”»å‡»åŸç†ï¼‰"></a>ä¸€ã€ ä»€ä¹ˆæ˜¯ CSRFï¼Ÿï¼ˆæ”»å‡»åŸç†ï¼‰</h3><p>å…¨ç§°ï¼šCross-Site Request Forgery æ ¸å¿ƒé€»è¾‘ï¼šâ€œç›—ç”¨ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚â€</p>
<p>CSRFï¼šåˆ©ç”¨æµè§ˆå™¨**â€œè‡ªåŠ¨æºå¸¦ Cookieâ€**çš„ç‰¹æ€§ï¼Œéª—è¿‡æœåŠ¡å™¨ã€‚</p>
<ol>
<li>ç”¨æˆ·ç™»å½•å—ä¿¡ä»»ç½‘ç«™ Aï¼Œå¹¶åœ¨æœ¬åœ°ç”Ÿæˆ Cookieã€‚</li>
<li>åœ¨ä¸ç™»å‡ºçš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·è®¿é—®æ¶æ„ç½‘ç«™ Bã€‚</li>
<li>ç½‘ç«™ B çš„é¡µé¢é‡Œéšè—äº†ä¸€æ®µä»£ç ï¼ˆæ¯”å¦‚ä¸€ä¸ªè‡ªåŠ¨æäº¤çš„è¡¨å•ï¼‰ï¼Œå‘ç½‘ç«™ A å‘é€è¯·æ±‚ï¼ˆæ¯”å¦‚ <code>POST /transfer_money</code>ï¼‰ã€‚</li>
<li>æµè§ˆå™¨å‘ç°æ˜¯å‘ç»™ç½‘ç«™ A çš„ï¼Œäºæ˜¯<strong>è‡ªåŠ¨</strong>æŠŠç½‘ç«™ A çš„ Cookie è´´ä¸Šå»ã€‚</li>
<li>ç½‘ç«™ A æ”¶åˆ°è¯·æ±‚ï¼Œä»¥ä¸ºæ˜¯ç”¨æˆ·è‡ªæ„¿æ“ä½œçš„ï¼Œæ‰§è¡ŒæˆåŠŸã€‚</li>
</ol>
<hr>
<h3 id="Django-å¦‚ä½•é˜²å¾¡ï¼Ÿï¼ˆToken-æœºåˆ¶ï¼‰"><a href="#Django-å¦‚ä½•é˜²å¾¡ï¼Ÿï¼ˆToken-æœºåˆ¶ï¼‰" class="headerlink" title="Django å¦‚ä½•é˜²å¾¡ï¼Ÿï¼ˆToken æœºåˆ¶ï¼‰"></a>Django å¦‚ä½•é˜²å¾¡ï¼Ÿï¼ˆToken æœºåˆ¶ï¼‰</h3><p>Django çš„é˜²å¾¡ç­–ç•¥éå¸¸ç®€å•ç²—æš´ï¼š<strong>â€œæš—å·ï¼ˆTokenï¼‰â€</strong>ã€‚</p>
<p>å®ƒä¸å†å•å•ä¿¡ä»» Cookieï¼Œè€Œæ˜¯è¦æ±‚æ¯æ¬¡å‘é€ <code>POST/PUT/DELETE</code> è¯·æ±‚æ—¶ï¼Œå¿…é¡»å¸¦ä¸Šä¸€ä¸ª<strong>éšæœºç”Ÿæˆçš„ã€ä¸€æ¬¡æ€§çš„å­—ç¬¦ä¸²ï¼ˆCSRF Tokenï¼‰</strong>ã€‚</p>
<h4 id="é˜²å¾¡æµç¨‹ï¼š"><a href="#é˜²å¾¡æµç¨‹ï¼š" class="headerlink" title="é˜²å¾¡æµç¨‹ï¼š"></a>é˜²å¾¡æµç¨‹ï¼š</h4><ol>
<li><strong>å‘å·</strong>ï¼šå½“ä½ è®¿é—®è¡¨å•é¡µé¢æ—¶ï¼ŒDjango ä¼šåœ¨ HTML é‡Œè—ä¸€ä¸ª <code>&lt;input type=&quot;hidden&quot; name=&quot;csrfmiddlewaretoken&quot; value=&quot;éšæœºä¹±ç &quot;&gt;</code>ã€‚åŒæ—¶ï¼ŒCookie é‡Œä¹Ÿä¼šå­˜ä¸€ä»½ã€‚</li>
<li><strong>æ ¸å¯¹</strong>ï¼šå½“ä½ æäº¤è¡¨å•æ—¶ï¼ŒDjango åç«¯ä¼šåšä¸¤ä»¶äº‹ï¼š<ul>
<li>æ‹¿ä½ æäº¤ä¸Šæ¥çš„ <code>value</code>ã€‚</li>
<li>æ‹¿ Cookie é‡Œçš„ <code>secret</code>ã€‚</li>
<li><strong>æ¯”å¯¹</strong>ï¼šå¦‚æœä¸¤è€…å¯¹ä¸ä¸Šï¼Œæˆ–è€…æ²¡å¸¦ Tokenï¼Œç›´æ¥ä¸¢å¼ƒè¯·æ±‚ï¼Œè¿”å› <strong>403 Forbidden</strong>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ¶æ„ç½‘ç«™ B æ‹¿ä¸åˆ°è¿™ä¸ª Token</strong>ï¼ˆå—é™äºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œå®ƒè¯»ä¸åˆ°ç½‘ç«™ A çš„ DOM å’Œ Cookieï¼‰ï¼Œæ‰€ä»¥å®ƒçš„ä¼ªé€ è¯·æ±‚ä¼šå¤±è´¥ã€‚</p>
<hr>
<p>åœ¨å†™ä»£ç æˆ–æµ‹è¯•æ—¶ï¼Œä¼šåœ¨è¿™ä¸‰ç§åœºæ™¯é‡åˆ° CSRF é—®é¢˜ï¼š</p>
<h4 id="åœºæ™¯-1ï¼šä¼ ç»Ÿ-Django-æ¨¡ç‰ˆ-Template"><a href="#åœºæ™¯-1ï¼šä¼ ç»Ÿ-Django-æ¨¡ç‰ˆ-Template" class="headerlink" title="åœºæ™¯ 1ï¼šä¼ ç»Ÿ Django æ¨¡ç‰ˆ (Template)"></a>åœºæ™¯ 1ï¼šä¼ ç»Ÿ Django æ¨¡ç‰ˆ (Template)</h4><p>è¿™æ˜¯æœ€æ ‡å‡†çš„ç”¨æ³•ã€‚å¿…é¡»åœ¨æ¯ä¸€ä¸ª <code>form</code> æ ‡ç­¾é‡Œæ‰‹åŠ¨åŠ ä¸Š tagã€‚</p>


<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/login/&quot;</span>&gt;</span><br>    &#123;% csrf_token %&#125;<br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p><em>å¦‚æœå¿˜äº†åŠ è¿™ä¸€è¡Œï¼Œæäº¤æ—¶å¿…æŠ¥ 403ã€‚</em></p>
<h4 id="åœºæ™¯-2ï¼šå‰åç«¯åˆ†ç¦»-Vue-React-Django-AJAX"><a href="#åœºæ™¯-2ï¼šå‰åç«¯åˆ†ç¦»-Vue-React-Django-AJAX" class="headerlink" title="åœºæ™¯ 2ï¼šå‰åç«¯åˆ†ç¦» (Vue&#x2F;React + Django) &#x2F; AJAX"></a>åœºæ™¯ 2ï¼šå‰åç«¯åˆ†ç¦» (Vue&#x2F;React + Django) &#x2F; AJAX</h4><p>å‰ç«¯ä»£ç ä¸åœ¨ Django æ¨¡ç‰ˆé‡Œï¼Œæ²¡æ³•ç”¨ csrf_tokenã€‚</p>
<p>åšæ³•ï¼šå‰ç«¯ï¼ˆJSï¼‰éœ€è¦ä» Cookie é‡Œè¯»å– csrftokenï¼Œå¹¶åœ¨å‘é€è¯·æ±‚ï¼ˆAxios&#x2F;Fetchï¼‰æ—¶ï¼ŒæŠŠå®ƒæ”¾åˆ° HTTP Header é‡Œã€‚</p>
<ul>
<li><strong>Header Key</strong>: <code>X-CSRFToken</code></li>
<li><strong>Header Value</strong>: ä» Cookie <code>csrftoken</code> å­—æ®µè¯»å‡ºæ¥çš„å€¼ã€‚</li>
</ul>
<h4 id="åœºæ™¯-3ï¼šDRF-æ¥å£ä¸è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#åœºæ™¯-3ï¼šDRF-æ¥å£ä¸è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="åœºæ™¯ 3ï¼šDRF æ¥å£ä¸è‡ªåŠ¨åŒ–æµ‹è¯•"></a>åœºæ™¯ 3ï¼šDRF æ¥å£ä¸è‡ªåŠ¨åŒ–æµ‹è¯•</h4><p><strong>â€œç°åœ¨çš„ DRF æ¥å£å¼€å‘ï¼Œè¿˜éœ€è¦ CSRF é˜²å¾¡å—ï¼Ÿâ€</strong></p>
<p><strong>ç­”æ¡ˆï¼šçœ‹è®¤è¯æ–¹å¼ã€‚</strong></p>
<ol>
<li><strong>å¦‚æœç”¨ SessionAuthentication (Session è®¤è¯)</strong>ï¼š<ul>
<li><strong>éœ€è¦ï¼</strong> å› ä¸º Session ä¾èµ– Cookieï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ï¼Œæ‰€ä»¥å®¹æ˜“è¢« CSRFã€‚</li>
<li>DRF ä¼šå¼ºåˆ¶æ£€æŸ¥ CSRF Tokenã€‚</li>
</ul>
</li>
<li><strong>å¦‚æœç”¨ TokenAuthentication &#x2F; JWT (Token è®¤è¯)</strong>ï¼š<ul>
<li><strong>ä¸éœ€è¦ï¼</strong></li>
<li>å› ä¸º JWT æ˜¯æ”¾åœ¨ Header (<code>Authorization: Bearer &lt;token&gt;</code>) é‡Œçš„ã€‚æµè§ˆå™¨<strong>ä¸ä¼šè‡ªåŠ¨</strong>ç»™æ¶æ„ç½‘ç«™å‘å‡ºçš„è¯·æ±‚å¸¦ä¸Š Headerã€‚æ¶æ„ç½‘ç«™æ²¡æœ‰ä½ çš„ Tokenï¼Œä¹Ÿå°±é€ ä¸å‡ºè¯·æ±‚ã€‚</li>
<li>æ‰€ä»¥ï¼Œå¤§éƒ¨åˆ†çº¯ API é¡¹ç›®ï¼Œé€šå¸¸ä¼š<strong>å…³é—­ CSRF æ£€æŸ¥</strong>ã€‚</li>
</ul>
</li>
</ol>
<hr>
<p>æœ‰æ—¶å€™åšæµ‹è¯•å·¥å…·ï¼Œæˆ–è€…å¯¹æ¥ç¬¬ä¸‰æ–¹å›è°ƒï¼ˆæ¯”å¦‚å¾®ä¿¡æ”¯ä»˜å›è°ƒï¼‰ï¼Œå¯¹æ–¹å‘è¿‡æ¥è¯·æ±‚è‚¯å®šæ²¡æœ‰ä½ çš„ Tokenï¼Œè¿™æ—¶éœ€è¦å±€éƒ¨å…³é—­æ£€æŸ¥ã€‚</p>
<p>ä½¿ç”¨è£…é¥°å™¨ <strong><code>@csrf_exempt</code></strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.views.decorators.csrf <span class="hljs-keyword">import</span> csrf_exempt<br><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> JsonResponse<br><br><span class="hljs-meta">@csrf_exempt  </span><span class="hljs-comment"># ç»™è¿™ä¸ªè§†å›¾å‘â€œå…æ£€é‡‘ç‰Œâ€</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_webhook</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        <span class="hljs-keyword">return</span> JsonResponse(&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;å³ä¾¿æ²¡æœ‰Tokenï¼Œæˆ‘ä¹Ÿèƒ½é€šè¿‡ï¼&quot;</span>&#125;)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ€ä¹ˆç»•è¿‡ï¼Ÿ"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ€ä¹ˆç»•è¿‡ï¼Ÿ" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ€ä¹ˆç»•è¿‡ï¼Ÿ"></a>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ€ä¹ˆç»•è¿‡ï¼Ÿ</h3><p>ä½ åœ¨å†™ Python è„šæœ¬ï¼ˆrequests&#x2F;pytestï¼‰æµ‹æ¥å£æ—¶ï¼Œç»å¸¸è¢« 403 æ‹¦ä½ã€‚è§£å†³æ–¹æ¡ˆæœ‰äºŒï¼š</p>
<h4 id="æ–¹æ³•-Aï¼šåšä¸€ä¸ªå®ˆè§„çŸ©çš„â€œè‰¯æ°‘â€"><a href="#æ–¹æ³•-Aï¼šåšä¸€ä¸ªå®ˆè§„çŸ©çš„â€œè‰¯æ°‘â€" class="headerlink" title="æ–¹æ³• Aï¼šåšä¸€ä¸ªå®ˆè§„çŸ©çš„â€œè‰¯æ°‘â€"></a>æ–¹æ³• Aï¼šåšä¸€ä¸ªå®ˆè§„çŸ©çš„â€œè‰¯æ°‘â€</h4><p>å…ˆè¯·æ±‚ä¸€æ¬¡ GET æ‹¿åˆ° Cookiesï¼Œå†ä» Cookies é‡Œæå– Token å‘ POSTã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>client = requests.Session()<br><br><span class="hljs-comment"># 1. å…ˆè®¿é—®é¦–é¡µæˆ–ç™»å½•é¡µï¼Œè·å– cookie (é‡Œé¢åŒ…å« csrftoken)</span><br>client.get(<span class="hljs-string">&quot;http://127.0.0.1:8000/api/login/&quot;</span>)<br><br><span class="hljs-comment"># 2. ä» cookie ä¸­æå– token</span><br>token = client.cookies[<span class="hljs-string">&#x27;csrftoken&#x27;</span>]<br><br><span class="hljs-comment"># 3. æ‰‹åŠ¨å¸¦åœ¨ Header é‡Œå‘é€ POST</span><br>headers = &#123;<span class="hljs-string">&#x27;X-CSRFToken&#x27;</span>: token&#125;<br>resp = client.post(<span class="hljs-string">&quot;http://127.0.0.1:8000/api/cases/&quot;</span>, data=&#123;...&#125;, headers=headers)<br></code></pre></td></tr></table></figure>

<h4 id="æ–¹æ³•-Bï¼šä½¿ç”¨-Django-æä¾›çš„-APIClient-æ¨è"><a href="#æ–¹æ³•-Bï¼šä½¿ç”¨-Django-æä¾›çš„-APIClient-æ¨è" class="headerlink" title="æ–¹æ³• Bï¼šä½¿ç”¨ Django æä¾›çš„ APIClient (æ¨è)"></a>æ–¹æ³• Bï¼šä½¿ç”¨ Django æä¾›çš„ <code>APIClient</code> (æ¨è)</h4><p>å¦‚æœæ˜¯åœ¨ Django é¡¹ç›®å†…éƒ¨å†™ <code>tests.py</code>ï¼Œä¸è¦ç”¨ <code>requests</code>ï¼Œç”¨ DRF è‡ªå¸¦çš„æµ‹è¯•å®¢æˆ·ç«¯ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ å¤„ç† CSRFã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework.test <span class="hljs-keyword">import</span> APIClient<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_create_case</span>():<br>    client = APIClient()<br>    <span class="hljs-comment"># APIClient ä¼šè‡ªåŠ¨å¿½ç•¥ CSRF æ£€æŸ¥ï¼Œæˆ–è€…è‡ªåŠ¨å¡«å……</span><br>    resp = client.post(<span class="hljs-string">&#x27;/api/cases/&#x27;</span>, &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;test&#x27;</span>&#125;, <span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;json&#x27;</span>)<br>    <span class="hljs-keyword">assert</span> resp.status_code == <span class="hljs-number">201</span><br></code></pre></td></tr></table></figure>

<hr>
<h1 id="DRF"><a href="#DRF" class="headerlink" title="DRF"></a>DRF</h1><p><strong>Django REST Framework (DRF)</strong> èƒ½åœ¨çŸ­æ—¶é—´å†…ï¼Œä¸ºä¸€ä¸ªåªæœ‰æ•°æ®åº“æ¨¡å‹çš„ç³»ç»Ÿï¼Œç”Ÿæˆä¸€å¥—æ ‡å‡†çš„ã€å¸¦é¡µé¢æ–‡æ¡£çš„ã€æ”¯æŒå¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰çš„ RESTful APIã€‚<strong>Serializerï¼ˆåºåˆ—åŒ–å™¨ï¼‰ã€ViewSetï¼ˆè§†å›¾é›†ï¼‰ã€Routerï¼ˆè·¯ç”±ï¼‰</strong>ã€‚</p>
<hr>
<h3 id="1-å®‰è£…ä¸æ³¨å†Œ"><a href="#1-å®‰è£…ä¸æ³¨å†Œ" class="headerlink" title="1. å®‰è£…ä¸æ³¨å†Œ"></a>1. å®‰è£…ä¸æ³¨å†Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install djangorestframework markdown django-filter<br></code></pre></td></tr></table></figure>

<p>ç„¶åå» <code>TestPlatform/settings.py</code>ï¼ŒæŠŠ <code>rest_framework</code> æ³¨å†Œè¿›å»ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">INSTALLED_APPS = [<br>    ...<br>    <span class="hljs-string">&#x27;case_manager&#x27;</span>,<br>    <span class="hljs-string">&#x27;rest_framework&#x27;</span>, <span class="hljs-comment"># å¿…é¡»åŠ è¿™ä¸ªï¼Œå¦åˆ™æŠ¥é”™</span><br>]<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="2-æ ¸å¿ƒç»„ä»¶ä¸€ï¼šSerializer-åºåˆ—åŒ–å™¨"><a href="#2-æ ¸å¿ƒç»„ä»¶ä¸€ï¼šSerializer-åºåˆ—åŒ–å™¨" class="headerlink" title="2. æ ¸å¿ƒç»„ä»¶ä¸€ï¼šSerializer (åºåˆ—åŒ–å™¨)"></a>2. æ ¸å¿ƒç»„ä»¶ä¸€ï¼šSerializer (åºåˆ—åŒ–å™¨)</h3><p><strong>å®ƒçš„ä½œç”¨</strong>ï¼š<strong>ç¿»è¯‘å®˜</strong>ã€‚</p>
<ul>
<li><strong>æŠŠæ¨¡å‹å˜æˆ JSON (åºåˆ—åŒ–)</strong>ï¼šæ•°æ®åº“æŸ¥å‡ºæ¥çš„ <code>TestCase</code> å¯¹è±¡ -&gt; å‰ç«¯èƒ½æ‡‚çš„ JSONã€‚</li>
<li><strong>æŠŠ JSON å˜æˆæ¨¡å‹ (ååºåˆ—åŒ–)</strong>ï¼šå‰ç«¯å‘æ¥çš„ JSON -&gt; å­˜å…¥æ•°æ®åº“å‰çš„æ•°æ®æ ¡éªŒå’Œæ¸…æ´—ã€‚</li>
</ul>
<p><strong>ç±»æ¯” FastAPI</strong>ï¼šå®ƒå°±ç­‰äº FastAPI é‡Œçš„ <strong>Pydantic Model</strong> (<code>class UserSchema(BaseModel): ...</code>)ã€‚</p>
<p>åœ¨ <code>case_manager</code> ä¸‹æ–°å»º <code>serializers.py</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> serializers<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> TestCase, Project<br><br><span class="hljs-comment"># å†™æ³•æå…¶ç±»ä¼¼ ModelForm</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectSerializer</span>(serializers.ModelSerializer):<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        model = Project<br>        fields = <span class="hljs-string">&#x27;__all__&#x27;</span> <span class="hljs-comment"># å·æ‡’å†™æ³•ï¼šæ‰€æœ‰å­—æ®µéƒ½åºåˆ—åŒ–</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCaseSerializer</span>(serializers.ModelSerializer):<br>    <span class="hljs-comment"># æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€äº›åªè¯»å­—æ®µï¼Œæˆ–è€…åµŒå¥—æ˜¾ç¤º</span><br>    <span class="hljs-comment"># æ¯”å¦‚ï¼šæˆ‘æƒ³åœ¨è¿”å›ç”¨ä¾‹æ—¶ï¼Œç›´æ¥çœ‹åˆ°é¡¹ç›®çš„åå­—ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ª project_id</span><br>    project_name = serializers.CharField(source=<span class="hljs-string">&#x27;project.name&#x27;</span>, read_only=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        model = TestCase<br>        <span class="hljs-comment"># æŒ‡å®šæˆ‘è¦æš´éœ²ç»™æ¥å£çš„å­—æ®µ</span><br>        fields = [<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;method&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-string">&#x27;priority&#x27;</span>, <span class="hljs-string">&#x27;is_passed&#x27;</span>, <span class="hljs-string">&#x27;project&#x27;</span>, <span class="hljs-string">&#x27;project_name&#x27;</span>, <span class="hljs-string">&#x27;created_time&#x27;</span>]<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="3-æ ¸å¿ƒç»„ä»¶äºŒï¼šViewSet-è§†å›¾é›†"><a href="#3-æ ¸å¿ƒç»„ä»¶äºŒï¼šViewSet-è§†å›¾é›†" class="headerlink" title="3. æ ¸å¿ƒç»„ä»¶äºŒï¼šViewSet (è§†å›¾é›†)"></a>3. æ ¸å¿ƒç»„ä»¶äºŒï¼šViewSet (è§†å›¾é›†)</h3><p>å®ƒçš„ä½œç”¨ï¼šå…¨èƒ½ç®¡å®¶ã€‚</p>
<p>ModelViewSet ä¸€ä¸ªç±»ç›´æ¥é€ä½  5 ä¸ªæ¥å£ï¼šåˆ—è¡¨(List)ã€è¯¦æƒ…(Retrieve)ã€åˆ›å»º(Create)ã€æ›´æ–°(Update)ã€åˆ é™¤(Destroy)ã€‚</p>
<p> <code>case_manager/views.py</code>ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> rest_framework <span class="hljs-keyword">import</span> viewsets<br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> TestCase, Project<br><span class="hljs-keyword">from</span> .serializers <span class="hljs-keyword">import</span> TestCaseSerializer, ProjectSerializer<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectViewSet</span>(viewsets.ModelViewSet):<br>    queryset = Project.objects.<span class="hljs-built_in">all</span>()<br>    serializer_class = ProjectSerializer<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestCaseViewSet</span>(viewsets.ModelViewSet):<br>    queryset = TestCase.objects.<span class="hljs-built_in">all</span>().order_by(<span class="hljs-string">&#x27;-created_time&#x27;</span>) <span class="hljs-comment"># å®šä¹‰æŸ¥ä»€ä¹ˆæ•°æ®</span><br>    serializer_class = TestCaseSerializer <span class="hljs-comment"># å®šä¹‰ç”¨å“ªä¸ªç¿»è¯‘å®˜</span><br>    <br>    <span class="hljs-comment"># ä½ ç”šè‡³å¯ä»¥ç›´æ¥åŠ æœç´¢åŠŸèƒ½</span><br>    search_fields = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;url&#x27;</span>] <br></code></pre></td></tr></table></figure>

<hr>
<h3 id="4-æ ¸å¿ƒç»„ä»¶ä¸‰ï¼šRouter-è‡ªåŠ¨è·¯ç”±"><a href="#4-æ ¸å¿ƒç»„ä»¶ä¸‰ï¼šRouter-è‡ªåŠ¨è·¯ç”±" class="headerlink" title="4. æ ¸å¿ƒç»„ä»¶ä¸‰ï¼šRouter (è‡ªåŠ¨è·¯ç”±)"></a>4. æ ¸å¿ƒç»„ä»¶ä¸‰ï¼šRouter (è‡ªåŠ¨è·¯ç”±)</h3><p>å®ƒçš„ä½œç”¨ï¼šè‡ªåŠ¨å¯¼èˆªã€‚</p>
<p>ä¸éœ€è¦å†å†™ path(â€˜case&#x2F;list&#x2F;â€˜, â€¦) è¿™ç§æ­»æ¿çš„è·¯ç”±äº†ã€‚Router ä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆç¬¦åˆ RESTful è§„èŒƒçš„ URLã€‚</p>
<p>ä¿®æ”¹ <code>case_manager/urls.py</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path, include<br><span class="hljs-keyword">from</span> rest_framework.routers <span class="hljs-keyword">import</span> DefaultRouter<br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views<br><br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨</span><br>router = DefaultRouter()<br><br><span class="hljs-comment"># æ³¨å†Œæˆ‘ä»¬çš„è§†å›¾é›†</span><br><span class="hljs-comment"># r&#x27;projects&#x27; æ˜¯ URL å‰ç¼€</span><br>router.register(<span class="hljs-string">r&#x27;projects&#x27;</span>, views.ProjectViewSet) <br>router.register(<span class="hljs-string">r&#x27;cases&#x27;</span>, views.TestCaseViewSet)<br><br>urlpatterns = [<br>    <span class="hljs-comment"># router.urls ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å † URLï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬åŒ…è¿›æ¥</span><br>    path(<span class="hljs-string">&#x27;api/&#x27;</span>, include(router.urls)),<br>]<br></code></pre></td></tr></table></figure>

<p><em>(æ³¨ï¼šè®°å¾—ç¡®ä¿ä¸»é¡¹ç›® <code>TestPlatform/urls.py</code> é‡ŒåŒ…å«äº†è¿™ä¸ªæ–‡ä»¶çš„è·¯ç”±)</em></p>
<hr>
<h3 id="å¯¹æ¯”-FastAPI"><a href="#å¯¹æ¯”-FastAPI" class="headerlink" title="å¯¹æ¯” FastAPI"></a>å¯¹æ¯” FastAPI</h3><table>
<thead>
<tr>
<th><strong>æ¦‚å¿µ</strong></th>
<th><strong>FastAPI</strong></th>
<th><strong>Django DRF</strong></th>
<th><strong>å¤‡æ³¨</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ•°æ®æ ¡éªŒ&#x2F;å®šä¹‰</strong></td>
<td><code>Pydantic BaseModel</code></td>
<td><code>Serializer</code></td>
<td>DRF ç›´æ¥è·Ÿ ORM ç»‘å®šï¼Œçœä»£ç </td>
</tr>
<tr>
<td><strong>è·¯ç”±å®šä¹‰</strong></td>
<td><code>@app.get(&quot;/items&quot;)</code></td>
<td><code>Router</code> + <code>urls.py</code></td>
<td>DRF è‡ªåŠ¨ç”Ÿæˆä¸€å¥— CRUD</td>
</tr>
<tr>
<td><strong>ä¾èµ–æ³¨å…¥</strong></td>
<td><code>Depends()</code></td>
<td><code>Mixin</code> &#x2F; <code>Permission</code></td>
<td>Django ç”¨ç±»ç»§æ‰¿æ¥å®ç°å¤ç”¨</td>
</tr>
<tr>
<td><strong>æ–‡æ¡£</strong></td>
<td>Swagger UI (<code>/docs</code>)</td>
<td>Browsable API &#x2F; Swagger (éœ€æ’ä»¶)</td>
<td>DRF è‡ªå¸¦çš„ç•Œé¢é€‚åˆè°ƒè¯•</td>
</tr>
</tbody></table>
<hr>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python/" class="category-chain-item">Python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/python/" class="print-no-link">#python</a>
      
        <a href="/tags/Django/" class="print-no-link">#Django</a>
      
        <a href="/tags/%E8%B7%AF%E7%94%B1/" class="print-no-link">#è·¯ç”±</a>
      
        <a href="/tags/%E6%A8%A1%E7%89%88/" class="print-no-link">#æ¨¡ç‰ˆ</a>
      
        <a href="/tags/ORM/" class="print-no-link">#ORM</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>djangoåŸºç¡€å­¦ä¹ </div>
      <div>https://lilpear2002.github.io/2025/12/15/djangoåŸºç¡€å­¦ä¹ /</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>æµ‹å¼€æ±‚èŒè€…</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´12æœˆ15æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/12/15/Postman%E5%AD%A6%E4%B9%A0/" title="Postmanå­¦ä¹ ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Postmanå­¦ä¹ </span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/12/14/Pytest%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" title="PyteståŸºç¡€å­¦ä¹ ">
                        <span class="hidden-mobile">PyteståŸºç¡€å­¦ä¹ </span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
